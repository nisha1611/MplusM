{"ast":null,"code":"'use strict';\n\nconst each = require('../helpers/each');\n\n/*!\r\n * ignore\r\n */\n\nmodule.exports = function removeSubdocs(schema) {\n  const unshift = true;\n  schema.s.hooks.pre('remove', false, function removeSubDocsPreRemove(next) {\n    if (this.$isSubdocument) {\n      next();\n      return;\n    }\n    const _this = this;\n    const subdocs = this.$getAllSubdocs();\n    each(subdocs, function (subdoc, cb) {\n      subdoc.$__remove(cb);\n    }, function (error) {\n      if (error) {\n        return _this.$__schema.s.hooks.execPost('remove:error', _this, [_this], {\n          error: error\n        }, function (error) {\n          next(error);\n        });\n      }\n      next();\n    });\n  }, null, unshift);\n};","map":{"version":3,"names":["each","require","module","exports","removeSubdocs","schema","unshift","s","hooks","pre","removeSubDocsPreRemove","next","$isSubdocument","_this","subdocs","$getAllSubdocs","subdoc","cb","$__remove","error","$__schema","execPost"],"sources":["C:/Users/91930/Desktop/Github projects/Pharmacy Demo/back-end/node_modules/mongoose/lib/plugins/removeSubdocs.js"],"sourcesContent":["'use strict';\r\n\r\nconst each = require('../helpers/each');\r\n\r\n/*!\r\n * ignore\r\n */\r\n\r\nmodule.exports = function removeSubdocs(schema) {\r\n  const unshift = true;\r\n  schema.s.hooks.pre('remove', false, function removeSubDocsPreRemove(next) {\r\n    if (this.$isSubdocument) {\r\n      next();\r\n      return;\r\n    }\r\n\r\n    const _this = this;\r\n    const subdocs = this.$getAllSubdocs();\r\n\r\n    each(subdocs, function(subdoc, cb) {\r\n      subdoc.$__remove(cb);\r\n    }, function(error) {\r\n      if (error) {\r\n        return _this.$__schema.s.hooks.execPost('remove:error', _this, [_this], { error: error }, function(error) {\r\n          next(error);\r\n        });\r\n      }\r\n      next();\r\n    });\r\n  }, null, unshift);\r\n};\r\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,IAAI,GAAGC,OAAO,CAAC,iBAAiB,CAAC;;AAEvC;AACA;AACA;;AAEAC,MAAM,CAACC,OAAO,GAAG,SAASC,aAAa,CAACC,MAAM,EAAE;EAC9C,MAAMC,OAAO,GAAG,IAAI;EACpBD,MAAM,CAACE,CAAC,CAACC,KAAK,CAACC,GAAG,CAAC,QAAQ,EAAE,KAAK,EAAE,SAASC,sBAAsB,CAACC,IAAI,EAAE;IACxE,IAAI,IAAI,CAACC,cAAc,EAAE;MACvBD,IAAI,EAAE;MACN;IACF;IAEA,MAAME,KAAK,GAAG,IAAI;IAClB,MAAMC,OAAO,GAAG,IAAI,CAACC,cAAc,EAAE;IAErCf,IAAI,CAACc,OAAO,EAAE,UAASE,MAAM,EAAEC,EAAE,EAAE;MACjCD,MAAM,CAACE,SAAS,CAACD,EAAE,CAAC;IACtB,CAAC,EAAE,UAASE,KAAK,EAAE;MACjB,IAAIA,KAAK,EAAE;QACT,OAAON,KAAK,CAACO,SAAS,CAACb,CAAC,CAACC,KAAK,CAACa,QAAQ,CAAC,cAAc,EAAER,KAAK,EAAE,CAACA,KAAK,CAAC,EAAE;UAAEM,KAAK,EAAEA;QAAM,CAAC,EAAE,UAASA,KAAK,EAAE;UACxGR,IAAI,CAACQ,KAAK,CAAC;QACb,CAAC,CAAC;MACJ;MACAR,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC,EAAE,IAAI,EAAEL,OAAO,CAAC;AACnB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}