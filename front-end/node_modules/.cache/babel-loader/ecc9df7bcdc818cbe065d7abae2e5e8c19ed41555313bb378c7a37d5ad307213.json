{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fromCognitoIdentityPool = void 0;\nconst client_cognito_identity_1 = require(\"@aws-sdk/client-cognito-identity\");\nconst property_provider_1 = require(\"@aws-sdk/property-provider\");\nconst fromCognitoIdentity_1 = require(\"./fromCognitoIdentity\");\nconst localStorage_1 = require(\"./localStorage\");\nconst resolveLogins_1 = require(\"./resolveLogins\");\nfunction fromCognitoIdentityPool(_ref) {\n  let {\n    accountId,\n    cache = (0, localStorage_1.localStorage)(),\n    client,\n    customRoleArn,\n    identityPoolId,\n    logins,\n    userIdentifier = !logins || Object.keys(logins).length === 0 ? \"ANONYMOUS\" : undefined\n  } = _ref;\n  const cacheKey = userIdentifier ? `aws:cognito-identity-credentials:${identityPoolId}:${userIdentifier}` : undefined;\n  let provider = async () => {\n    let identityId = cacheKey && (await cache.getItem(cacheKey));\n    if (!identityId) {\n      const {\n        IdentityId = throwOnMissingId()\n      } = await client.send(new client_cognito_identity_1.GetIdCommand({\n        AccountId: accountId,\n        IdentityPoolId: identityPoolId,\n        Logins: logins ? await (0, resolveLogins_1.resolveLogins)(logins) : undefined\n      }));\n      identityId = IdentityId;\n      if (cacheKey) {\n        Promise.resolve(cache.setItem(cacheKey, identityId)).catch(() => {});\n      }\n    }\n    provider = (0, fromCognitoIdentity_1.fromCognitoIdentity)({\n      client,\n      customRoleArn,\n      logins,\n      identityId\n    });\n    return provider();\n  };\n  return () => provider().catch(async err => {\n    if (cacheKey) {\n      Promise.resolve(cache.removeItem(cacheKey)).catch(() => {});\n    }\n    throw err;\n  });\n}\nexports.fromCognitoIdentityPool = fromCognitoIdentityPool;\nfunction throwOnMissingId() {\n  throw new property_provider_1.CredentialsProviderError(\"Response from Amazon Cognito contained no identity ID\");\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","fromCognitoIdentityPool","client_cognito_identity_1","require","property_provider_1","fromCognitoIdentity_1","localStorage_1","resolveLogins_1","accountId","cache","localStorage","client","customRoleArn","identityPoolId","logins","userIdentifier","keys","length","undefined","cacheKey","provider","identityId","getItem","IdentityId","throwOnMissingId","send","GetIdCommand","AccountId","IdentityPoolId","Logins","resolveLogins","Promise","resolve","setItem","catch","fromCognitoIdentity","err","removeItem","CredentialsProviderError"],"sources":["C:/Users/91930/Desktop/Github projects/Pharmacy Demo/back-end/node_modules/@aws-sdk/credential-provider-cognito-identity/dist-cjs/fromCognitoIdentityPool.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fromCognitoIdentityPool = void 0;\r\nconst client_cognito_identity_1 = require(\"@aws-sdk/client-cognito-identity\");\r\nconst property_provider_1 = require(\"@aws-sdk/property-provider\");\r\nconst fromCognitoIdentity_1 = require(\"./fromCognitoIdentity\");\r\nconst localStorage_1 = require(\"./localStorage\");\r\nconst resolveLogins_1 = require(\"./resolveLogins\");\r\nfunction fromCognitoIdentityPool({ accountId, cache = (0, localStorage_1.localStorage)(), client, customRoleArn, identityPoolId, logins, userIdentifier = !logins || Object.keys(logins).length === 0 ? \"ANONYMOUS\" : undefined, }) {\r\n    const cacheKey = userIdentifier ? `aws:cognito-identity-credentials:${identityPoolId}:${userIdentifier}` : undefined;\r\n    let provider = async () => {\r\n        let identityId = cacheKey && (await cache.getItem(cacheKey));\r\n        if (!identityId) {\r\n            const { IdentityId = throwOnMissingId() } = await client.send(new client_cognito_identity_1.GetIdCommand({\r\n                AccountId: accountId,\r\n                IdentityPoolId: identityPoolId,\r\n                Logins: logins ? await (0, resolveLogins_1.resolveLogins)(logins) : undefined,\r\n            }));\r\n            identityId = IdentityId;\r\n            if (cacheKey) {\r\n                Promise.resolve(cache.setItem(cacheKey, identityId)).catch(() => { });\r\n            }\r\n        }\r\n        provider = (0, fromCognitoIdentity_1.fromCognitoIdentity)({\r\n            client,\r\n            customRoleArn,\r\n            logins,\r\n            identityId,\r\n        });\r\n        return provider();\r\n    };\r\n    return () => provider().catch(async (err) => {\r\n        if (cacheKey) {\r\n            Promise.resolve(cache.removeItem(cacheKey)).catch(() => { });\r\n        }\r\n        throw err;\r\n    });\r\n}\r\nexports.fromCognitoIdentityPool = fromCognitoIdentityPool;\r\nfunction throwOnMissingId() {\r\n    throw new property_provider_1.CredentialsProviderError(\"Response from Amazon Cognito contained no identity ID\");\r\n}\r\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,uBAAuB,GAAG,KAAK,CAAC;AACxC,MAAMC,yBAAyB,GAAGC,OAAO,CAAC,kCAAkC,CAAC;AAC7E,MAAMC,mBAAmB,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AACjE,MAAME,qBAAqB,GAAGF,OAAO,CAAC,uBAAuB,CAAC;AAC9D,MAAMG,cAAc,GAAGH,OAAO,CAAC,gBAAgB,CAAC;AAChD,MAAMI,eAAe,GAAGJ,OAAO,CAAC,iBAAiB,CAAC;AAClD,SAASF,uBAAuB,OAAoM;EAAA,IAAnM;IAAEO,SAAS;IAAEC,KAAK,GAAG,CAAC,CAAC,EAAEH,cAAc,CAACI,YAAY,GAAG;IAAEC,MAAM;IAAEC,aAAa;IAAEC,cAAc;IAAEC,MAAM;IAAEC,cAAc,GAAG,CAACD,MAAM,IAAIjB,MAAM,CAACmB,IAAI,CAACF,MAAM,CAAC,CAACG,MAAM,KAAK,CAAC,GAAG,WAAW,GAAGC;EAAW,CAAC;EAC9N,MAAMC,QAAQ,GAAGJ,cAAc,GAAI,oCAAmCF,cAAe,IAAGE,cAAe,EAAC,GAAGG,SAAS;EACpH,IAAIE,QAAQ,GAAG,YAAY;IACvB,IAAIC,UAAU,GAAGF,QAAQ,KAAK,MAAMV,KAAK,CAACa,OAAO,CAACH,QAAQ,CAAC,CAAC;IAC5D,IAAI,CAACE,UAAU,EAAE;MACb,MAAM;QAAEE,UAAU,GAAGC,gBAAgB;MAAG,CAAC,GAAG,MAAMb,MAAM,CAACc,IAAI,CAAC,IAAIvB,yBAAyB,CAACwB,YAAY,CAAC;QACrGC,SAAS,EAAEnB,SAAS;QACpBoB,cAAc,EAAEf,cAAc;QAC9BgB,MAAM,EAAEf,MAAM,GAAG,MAAM,CAAC,CAAC,EAAEP,eAAe,CAACuB,aAAa,EAAEhB,MAAM,CAAC,GAAGI;MACxE,CAAC,CAAC,CAAC;MACHG,UAAU,GAAGE,UAAU;MACvB,IAAIJ,QAAQ,EAAE;QACVY,OAAO,CAACC,OAAO,CAACvB,KAAK,CAACwB,OAAO,CAACd,QAAQ,EAAEE,UAAU,CAAC,CAAC,CAACa,KAAK,CAAC,MAAM,CAAE,CAAC,CAAC;MACzE;IACJ;IACAd,QAAQ,GAAG,CAAC,CAAC,EAAEf,qBAAqB,CAAC8B,mBAAmB,EAAE;MACtDxB,MAAM;MACNC,aAAa;MACbE,MAAM;MACNO;IACJ,CAAC,CAAC;IACF,OAAOD,QAAQ,EAAE;EACrB,CAAC;EACD,OAAO,MAAMA,QAAQ,EAAE,CAACc,KAAK,CAAC,MAAOE,GAAG,IAAK;IACzC,IAAIjB,QAAQ,EAAE;MACVY,OAAO,CAACC,OAAO,CAACvB,KAAK,CAAC4B,UAAU,CAAClB,QAAQ,CAAC,CAAC,CAACe,KAAK,CAAC,MAAM,CAAE,CAAC,CAAC;IAChE;IACA,MAAME,GAAG;EACb,CAAC,CAAC;AACN;AACArC,OAAO,CAACE,uBAAuB,GAAGA,uBAAuB;AACzD,SAASuB,gBAAgB,GAAG;EACxB,MAAM,IAAIpB,mBAAmB,CAACkC,wBAAwB,CAAC,uDAAuD,CAAC;AACnH"},"metadata":{},"sourceType":"script","externalDependencies":[]}