{"ast":null,"code":"/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\n\n\"use strict\";\n\nconst eslintScope = require(\"eslint-scope\");\nconst Referencer = require(\"eslint-scope/lib/referencer\");\nconst {\n  CachedSource,\n  ConcatSource,\n  ReplaceSource\n} = require(\"webpack-sources\");\nconst ConcatenationScope = require(\"../ConcatenationScope\");\nconst {\n  UsageState\n} = require(\"../ExportsInfo\");\nconst Module = require(\"../Module\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst Template = require(\"../Template\");\nconst HarmonyImportDependency = require(\"../dependencies/HarmonyImportDependency\");\nconst JavascriptParser = require(\"../javascript/JavascriptParser\");\nconst {\n  equals\n} = require(\"../util/ArrayHelpers\");\nconst LazySet = require(\"../util/LazySet\");\nconst {\n  concatComparators\n} = require(\"../util/comparators\");\nconst createHash = require(\"../util/createHash\");\nconst {\n  makePathsRelative\n} = require(\"../util/identifier\");\nconst makeSerializable = require(\"../util/makeSerializable\");\nconst propertyAccess = require(\"../util/propertyAccess\");\nconst {\n  filterRuntime,\n  intersectRuntime,\n  mergeRuntimeCondition,\n  mergeRuntimeConditionNonFalse,\n  runtimeConditionToString,\n  subtractRuntimeCondition\n} = require(\"../util/runtime\");\n\n/** @typedef {import(\"eslint-scope\").Scope} Scope */\n/** @typedef {import(\"webpack-sources\").Source} Source */\n/** @typedef {import(\"../../declarations/WebpackOptions\").WebpackOptionsNormalized} WebpackOptions */\n/** @typedef {import(\"../ChunkGraph\")} ChunkGraph */\n/** @typedef {import(\"../CodeGenerationResults\")} CodeGenerationResults */\n/** @typedef {import(\"../Compilation\")} Compilation */\n/** @typedef {import(\"../Dependency\")} Dependency */\n/** @typedef {import(\"../Dependency\").UpdateHashContext} UpdateHashContext */\n/** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\n/** @typedef {import(\"../DependencyTemplates\")} DependencyTemplates */\n/** @typedef {import(\"../ExportsInfo\").ExportInfo} ExportInfo */\n/** @template T @typedef {import(\"../InitFragment\")<T>} InitFragment */\n/** @typedef {import(\"../Module\").CodeGenerationContext} CodeGenerationContext */\n/** @typedef {import(\"../Module\").CodeGenerationResult} CodeGenerationResult */\n/** @typedef {import(\"../Module\").LibIdentOptions} LibIdentOptions */\n/** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n/** @typedef {import(\"../ModuleGraphConnection\")} ModuleGraphConnection */\n/** @typedef {import(\"../ModuleGraphConnection\").ConnectionState} ConnectionState */\n/** @typedef {import(\"../RequestShortener\")} RequestShortener */\n/** @typedef {import(\"../ResolverFactory\").ResolverWithOptions} ResolverWithOptions */\n/** @typedef {import(\"../RuntimeTemplate\")} RuntimeTemplate */\n/** @typedef {import(\"../WebpackError\")} WebpackError */\n/** @typedef {import(\"../javascript/JavascriptModulesPlugin\").ChunkRenderContext} ChunkRenderContext */\n/** @typedef {import(\"../util/Hash\")} Hash */\n/** @typedef {typeof import(\"../util/Hash\")} HashConstructor */\n/** @typedef {import(\"../util/fs\").InputFileSystem} InputFileSystem */\n/** @typedef {import(\"../util/runtime\").RuntimeSpec} RuntimeSpec */\n\n// fix eslint-scope to support class properties correctly\n// cspell:word Referencer\nconst ReferencerClass = Referencer;\nif (!ReferencerClass.prototype.PropertyDefinition) {\n  ReferencerClass.prototype.PropertyDefinition = ReferencerClass.prototype.Property;\n}\n\n/**\r\n * @typedef {Object} ReexportInfo\r\n * @property {Module} module\r\n * @property {string[]} export\r\n */\n\n/** @typedef {RawBinding | SymbolBinding} Binding */\n\n/**\r\n * @typedef {Object} RawBinding\r\n * @property {ModuleInfo} info\r\n * @property {string} rawName\r\n * @property {string=} comment\r\n * @property {string[]} ids\r\n * @property {string[]} exportName\r\n */\n\n/**\r\n * @typedef {Object} SymbolBinding\r\n * @property {ConcatenatedModuleInfo} info\r\n * @property {string} name\r\n * @property {string=} comment\r\n * @property {string[]} ids\r\n * @property {string[]} exportName\r\n */\n\n/** @typedef {ConcatenatedModuleInfo | ExternalModuleInfo } ModuleInfo */\n/** @typedef {ConcatenatedModuleInfo | ExternalModuleInfo | ReferenceToModuleInfo } ModuleInfoOrReference */\n\n/**\r\n * @typedef {Object} ConcatenatedModuleInfo\r\n * @property {\"concatenated\"} type\r\n * @property {Module} module\r\n * @property {number} index\r\n * @property {Object} ast\r\n * @property {Source} internalSource\r\n * @property {ReplaceSource} source\r\n * @property {InitFragment<ChunkRenderContext>[]=} chunkInitFragments\r\n * @property {Iterable<string>} runtimeRequirements\r\n * @property {Scope} globalScope\r\n * @property {Scope} moduleScope\r\n * @property {Map<string, string>} internalNames\r\n * @property {Map<string, string>} exportMap\r\n * @property {Map<string, string>} rawExportMap\r\n * @property {string=} namespaceExportSymbol\r\n * @property {string} namespaceObjectName\r\n * @property {boolean} interopNamespaceObjectUsed\r\n * @property {string} interopNamespaceObjectName\r\n * @property {boolean} interopNamespaceObject2Used\r\n * @property {string} interopNamespaceObject2Name\r\n * @property {boolean} interopDefaultAccessUsed\r\n * @property {string} interopDefaultAccessName\r\n */\n\n/**\r\n * @typedef {Object} ExternalModuleInfo\r\n * @property {\"external\"} type\r\n * @property {Module} module\r\n * @property {RuntimeSpec | boolean} runtimeCondition\r\n * @property {number} index\r\n * @property {string} name\r\n * @property {boolean} interopNamespaceObjectUsed\r\n * @property {string} interopNamespaceObjectName\r\n * @property {boolean} interopNamespaceObject2Used\r\n * @property {string} interopNamespaceObject2Name\r\n * @property {boolean} interopDefaultAccessUsed\r\n * @property {string} interopDefaultAccessName\r\n */\n\n/**\r\n * @typedef {Object} ReferenceToModuleInfo\r\n * @property {\"reference\"} type\r\n * @property {RuntimeSpec | boolean} runtimeCondition\r\n * @property {ConcatenatedModuleInfo | ExternalModuleInfo} target\r\n */\n\nconst RESERVED_NAMES = new Set([\n// internal names (should always be renamed)\nConcatenationScope.DEFAULT_EXPORT, ConcatenationScope.NAMESPACE_OBJECT_EXPORT,\n// keywords\n\"abstract,arguments,async,await,boolean,break,byte,case,catch,char,class,const,continue\", \"debugger,default,delete,do,double,else,enum,eval,export,extends,false,final,finally,float\", \"for,function,goto,if,implements,import,in,instanceof,int,interface,let,long,native,new,null\", \"package,private,protected,public,return,short,static,super,switch,synchronized,this,throw\", \"throws,transient,true,try,typeof,var,void,volatile,while,with,yield\",\n// commonjs/amd\n\"module,__dirname,__filename,exports,require,define\",\n// js globals\n\"Array,Date,eval,function,hasOwnProperty,Infinity,isFinite,isNaN,isPrototypeOf,length,Math\", \"NaN,name,Number,Object,prototype,String,toString,undefined,valueOf\",\n// browser globals\n\"alert,all,anchor,anchors,area,assign,blur,button,checkbox,clearInterval,clearTimeout\", \"clientInformation,close,closed,confirm,constructor,crypto,decodeURI,decodeURIComponent\", \"defaultStatus,document,element,elements,embed,embeds,encodeURI,encodeURIComponent,escape\", \"event,fileUpload,focus,form,forms,frame,innerHeight,innerWidth,layer,layers,link,location\", \"mimeTypes,navigate,navigator,frames,frameRate,hidden,history,image,images,offscreenBuffering\", \"open,opener,option,outerHeight,outerWidth,packages,pageXOffset,pageYOffset,parent,parseFloat\", \"parseInt,password,pkcs11,plugin,prompt,propertyIsEnum,radio,reset,screenX,screenY,scroll\", \"secure,select,self,setInterval,setTimeout,status,submit,taint,text,textarea,top,unescape\", \"untaint,window\",\n// window events\n\"onblur,onclick,onerror,onfocus,onkeydown,onkeypress,onkeyup,onmouseover,onload,onmouseup,onmousedown,onsubmit\"].join(\",\").split(\",\"));\nconst createComparator = (property, comparator) => (a, b) => comparator(a[property], b[property]);\nconst compareNumbers = (a, b) => {\n  if (isNaN(a)) {\n    if (!isNaN(b)) {\n      return 1;\n    }\n  } else {\n    if (isNaN(b)) {\n      return -1;\n    }\n    if (a !== b) {\n      return a < b ? -1 : 1;\n    }\n  }\n  return 0;\n};\nconst bySourceOrder = createComparator(\"sourceOrder\", compareNumbers);\nconst byRangeStart = createComparator(\"rangeStart\", compareNumbers);\nconst joinIterableWithComma = iterable => {\n  // This is more performant than Array.from().join(\", \")\n  // as it doesn't create an array\n  let str = \"\";\n  let first = true;\n  for (const item of iterable) {\n    if (first) {\n      first = false;\n    } else {\n      str += \", \";\n    }\n    str += item;\n  }\n  return str;\n};\n\n/**\r\n * @typedef {Object} ConcatenationEntry\r\n * @property {\"concatenated\" | \"external\"} type\r\n * @property {Module} module\r\n * @property {RuntimeSpec | boolean} runtimeCondition\r\n */\n\n/**\r\n * @param {ModuleGraph} moduleGraph the module graph\r\n * @param {ModuleInfo} info module info\r\n * @param {string[]} exportName exportName\r\n * @param {Map<Module, ModuleInfo>} moduleToInfoMap moduleToInfoMap\r\n * @param {RuntimeSpec} runtime for which runtime\r\n * @param {RequestShortener} requestShortener the request shortener\r\n * @param {RuntimeTemplate} runtimeTemplate the runtime template\r\n * @param {Set<ConcatenatedModuleInfo>} neededNamespaceObjects modules for which a namespace object should be generated\r\n * @param {boolean} asCall asCall\r\n * @param {boolean} strictHarmonyModule strictHarmonyModule\r\n * @param {boolean | undefined} asiSafe asiSafe\r\n * @param {Set<ExportInfo>} alreadyVisited alreadyVisited\r\n * @returns {Binding} the final variable\r\n */\nconst getFinalBinding = function (moduleGraph, info, exportName, moduleToInfoMap, runtime, requestShortener, runtimeTemplate, neededNamespaceObjects, asCall, strictHarmonyModule, asiSafe) {\n  let alreadyVisited = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : new Set();\n  const exportsType = info.module.getExportsType(moduleGraph, strictHarmonyModule);\n  if (exportName.length === 0) {\n    switch (exportsType) {\n      case \"default-only\":\n        info.interopNamespaceObject2Used = true;\n        return {\n          info,\n          rawName: info.interopNamespaceObject2Name,\n          ids: exportName,\n          exportName\n        };\n      case \"default-with-named\":\n        info.interopNamespaceObjectUsed = true;\n        return {\n          info,\n          rawName: info.interopNamespaceObjectName,\n          ids: exportName,\n          exportName\n        };\n      case \"namespace\":\n      case \"dynamic\":\n        break;\n      default:\n        throw new Error(`Unexpected exportsType ${exportsType}`);\n    }\n  } else {\n    switch (exportsType) {\n      case \"namespace\":\n        break;\n      case \"default-with-named\":\n        switch (exportName[0]) {\n          case \"default\":\n            exportName = exportName.slice(1);\n            break;\n          case \"__esModule\":\n            return {\n              info,\n              rawName: \"/* __esModule */true\",\n              ids: exportName.slice(1),\n              exportName\n            };\n        }\n        break;\n      case \"default-only\":\n        {\n          const exportId = exportName[0];\n          if (exportId === \"__esModule\") {\n            return {\n              info,\n              rawName: \"/* __esModule */true\",\n              ids: exportName.slice(1),\n              exportName\n            };\n          }\n          exportName = exportName.slice(1);\n          if (exportId !== \"default\") {\n            return {\n              info,\n              rawName: \"/* non-default import from default-exporting module */undefined\",\n              ids: exportName,\n              exportName\n            };\n          }\n          break;\n        }\n      case \"dynamic\":\n        switch (exportName[0]) {\n          case \"default\":\n            {\n              exportName = exportName.slice(1);\n              info.interopDefaultAccessUsed = true;\n              const defaultExport = asCall ? `${info.interopDefaultAccessName}()` : asiSafe ? `(${info.interopDefaultAccessName}())` : asiSafe === false ? `;(${info.interopDefaultAccessName}())` : `${info.interopDefaultAccessName}.a`;\n              return {\n                info,\n                rawName: defaultExport,\n                ids: exportName,\n                exportName\n              };\n            }\n          case \"__esModule\":\n            return {\n              info,\n              rawName: \"/* __esModule */true\",\n              ids: exportName.slice(1),\n              exportName\n            };\n        }\n        break;\n      default:\n        throw new Error(`Unexpected exportsType ${exportsType}`);\n    }\n  }\n  if (exportName.length === 0) {\n    switch (info.type) {\n      case \"concatenated\":\n        neededNamespaceObjects.add(info);\n        return {\n          info,\n          rawName: info.namespaceObjectName,\n          ids: exportName,\n          exportName\n        };\n      case \"external\":\n        return {\n          info,\n          rawName: info.name,\n          ids: exportName,\n          exportName\n        };\n    }\n  }\n  const exportsInfo = moduleGraph.getExportsInfo(info.module);\n  const exportInfo = exportsInfo.getExportInfo(exportName[0]);\n  if (alreadyVisited.has(exportInfo)) {\n    return {\n      info,\n      rawName: \"/* circular reexport */ Object(function x() { x() }())\",\n      ids: [],\n      exportName\n    };\n  }\n  alreadyVisited.add(exportInfo);\n  switch (info.type) {\n    case \"concatenated\":\n      {\n        const exportId = exportName[0];\n        if (exportInfo.provided === false) {\n          // It's not provided, but it could be on the prototype\n          neededNamespaceObjects.add(info);\n          return {\n            info,\n            rawName: info.namespaceObjectName,\n            ids: exportName,\n            exportName\n          };\n        }\n        const directExport = info.exportMap && info.exportMap.get(exportId);\n        if (directExport) {\n          const usedName = /** @type {string[]} */\n          exportsInfo.getUsedName(exportName, runtime);\n          if (!usedName) {\n            return {\n              info,\n              rawName: \"/* unused export */ undefined\",\n              ids: exportName.slice(1),\n              exportName\n            };\n          }\n          return {\n            info,\n            name: directExport,\n            ids: usedName.slice(1),\n            exportName\n          };\n        }\n        const rawExport = info.rawExportMap && info.rawExportMap.get(exportId);\n        if (rawExport) {\n          return {\n            info,\n            rawName: rawExport,\n            ids: exportName.slice(1),\n            exportName\n          };\n        }\n        const reexport = exportInfo.findTarget(moduleGraph, module => moduleToInfoMap.has(module));\n        if (reexport === false) {\n          throw new Error(`Target module of reexport from '${info.module.readableIdentifier(requestShortener)}' is not part of the concatenation (export '${exportId}')\\nModules in the concatenation:\\n${Array.from(moduleToInfoMap, _ref => {\n            let [m, info] = _ref;\n            return ` * ${info.type} ${m.readableIdentifier(requestShortener)}`;\n          }).join(\"\\n\")}`);\n        }\n        if (reexport) {\n          const refInfo = moduleToInfoMap.get(reexport.module);\n          return getFinalBinding(moduleGraph, refInfo, reexport.export ? [...reexport.export, ...exportName.slice(1)] : exportName.slice(1), moduleToInfoMap, runtime, requestShortener, runtimeTemplate, neededNamespaceObjects, asCall, info.module.buildMeta.strictHarmonyModule, asiSafe, alreadyVisited);\n        }\n        if (info.namespaceExportSymbol) {\n          const usedName = /** @type {string[]} */\n          exportsInfo.getUsedName(exportName, runtime);\n          return {\n            info,\n            rawName: info.namespaceObjectName,\n            ids: usedName,\n            exportName\n          };\n        }\n        throw new Error(`Cannot get final name for export '${exportName.join(\".\")}' of ${info.module.readableIdentifier(requestShortener)}`);\n      }\n    case \"external\":\n      {\n        const used = /** @type {string[]} */\n        exportsInfo.getUsedName(exportName, runtime);\n        if (!used) {\n          return {\n            info,\n            rawName: \"/* unused export */ undefined\",\n            ids: exportName.slice(1),\n            exportName\n          };\n        }\n        const comment = equals(used, exportName) ? \"\" : Template.toNormalComment(`${exportName.join(\".\")}`);\n        return {\n          info,\n          rawName: info.name + comment,\n          ids: used,\n          exportName\n        };\n      }\n  }\n};\n\n/**\r\n * @param {ModuleGraph} moduleGraph the module graph\r\n * @param {ModuleInfo} info module info\r\n * @param {string[]} exportName exportName\r\n * @param {Map<Module, ModuleInfo>} moduleToInfoMap moduleToInfoMap\r\n * @param {RuntimeSpec} runtime for which runtime\r\n * @param {RequestShortener} requestShortener the request shortener\r\n * @param {RuntimeTemplate} runtimeTemplate the runtime template\r\n * @param {Set<ConcatenatedModuleInfo>} neededNamespaceObjects modules for which a namespace object should be generated\r\n * @param {boolean} asCall asCall\r\n * @param {boolean} callContext callContext\r\n * @param {boolean} strictHarmonyModule strictHarmonyModule\r\n * @param {boolean | undefined} asiSafe asiSafe\r\n * @returns {string} the final name\r\n */\nconst getFinalName = (moduleGraph, info, exportName, moduleToInfoMap, runtime, requestShortener, runtimeTemplate, neededNamespaceObjects, asCall, callContext, strictHarmonyModule, asiSafe) => {\n  const binding = getFinalBinding(moduleGraph, info, exportName, moduleToInfoMap, runtime, requestShortener, runtimeTemplate, neededNamespaceObjects, asCall, strictHarmonyModule, asiSafe);\n  {\n    const {\n      ids,\n      comment\n    } = binding;\n    let reference;\n    let isPropertyAccess;\n    if (\"rawName\" in binding) {\n      reference = `${binding.rawName}${comment || \"\"}${propertyAccess(ids)}`;\n      isPropertyAccess = ids.length > 0;\n    } else {\n      const {\n        info,\n        name: exportId\n      } = binding;\n      const name = info.internalNames.get(exportId);\n      if (!name) {\n        throw new Error(`The export \"${exportId}\" in \"${info.module.readableIdentifier(requestShortener)}\" has no internal name (existing names: ${Array.from(info.internalNames, _ref2 => {\n          let [name, symbol] = _ref2;\n          return `${name}: ${symbol}`;\n        }).join(\", \") || \"none\"})`);\n      }\n      reference = `${name}${comment || \"\"}${propertyAccess(ids)}`;\n      isPropertyAccess = ids.length > 1;\n    }\n    if (isPropertyAccess && asCall && callContext === false) {\n      return asiSafe ? `(0,${reference})` : asiSafe === false ? `;(0,${reference})` : `/*#__PURE__*/Object(${reference})`;\n    }\n    return reference;\n  }\n};\nconst addScopeSymbols = (s, nameSet, scopeSet1, scopeSet2) => {\n  let scope = s;\n  while (scope) {\n    if (scopeSet1.has(scope)) break;\n    if (scopeSet2.has(scope)) break;\n    scopeSet1.add(scope);\n    for (const variable of scope.variables) {\n      nameSet.add(variable.name);\n    }\n    scope = scope.upper;\n  }\n};\nconst getAllReferences = variable => {\n  let set = variable.references;\n  // Look for inner scope variables too (like in class Foo { t() { Foo } })\n  const identifiers = new Set(variable.identifiers);\n  for (const scope of variable.scope.childScopes) {\n    for (const innerVar of scope.variables) {\n      if (innerVar.identifiers.some(id => identifiers.has(id))) {\n        set = set.concat(innerVar.references);\n        break;\n      }\n    }\n  }\n  return set;\n};\nconst getPathInAst = (ast, node) => {\n  if (ast === node) {\n    return [];\n  }\n  const nr = node.range;\n  const enterNode = n => {\n    if (!n) return undefined;\n    const r = n.range;\n    if (r) {\n      if (r[0] <= nr[0] && r[1] >= nr[1]) {\n        const path = getPathInAst(n, node);\n        if (path) {\n          path.push(n);\n          return path;\n        }\n      }\n    }\n    return undefined;\n  };\n  if (Array.isArray(ast)) {\n    for (let i = 0; i < ast.length; i++) {\n      const enterResult = enterNode(ast[i]);\n      if (enterResult !== undefined) return enterResult;\n    }\n  } else if (ast && typeof ast === \"object\") {\n    const keys = Object.keys(ast);\n    for (let i = 0; i < keys.length; i++) {\n      const value = ast[keys[i]];\n      if (Array.isArray(value)) {\n        const pathResult = getPathInAst(value, node);\n        if (pathResult !== undefined) return pathResult;\n      } else if (value && typeof value === \"object\") {\n        const enterResult = enterNode(value);\n        if (enterResult !== undefined) return enterResult;\n      }\n    }\n  }\n};\nconst TYPES = new Set([\"javascript\"]);\nclass ConcatenatedModule extends Module {\n  /**\r\n   * @param {Module} rootModule the root module of the concatenation\r\n   * @param {Set<Module>} modules all modules in the concatenation (including the root module)\r\n   * @param {RuntimeSpec} runtime the runtime\r\n   * @param {Object=} associatedObjectForCache object for caching\r\n   * @param {string | HashConstructor=} hashFunction hash function to use\r\n   * @returns {ConcatenatedModule} the module\r\n   */\n  static create(rootModule, modules, runtime, associatedObjectForCache) {\n    let hashFunction = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"md4\";\n    const identifier = ConcatenatedModule._createIdentifier(rootModule, modules, associatedObjectForCache, hashFunction);\n    return new ConcatenatedModule({\n      identifier,\n      rootModule,\n      modules,\n      runtime\n    });\n  }\n\n  /**\r\n   * @param {Object} options options\r\n   * @param {string} options.identifier the identifier of the module\r\n   * @param {Module=} options.rootModule the root module of the concatenation\r\n   * @param {RuntimeSpec} options.runtime the selected runtime\r\n   * @param {Set<Module>=} options.modules all concatenated modules\r\n   */\n  constructor(_ref3) {\n    let {\n      identifier,\n      rootModule,\n      modules,\n      runtime\n    } = _ref3;\n    super(\"javascript/esm\", null, rootModule && rootModule.layer);\n\n    // Info from Factory\n    /** @type {string} */\n    this._identifier = identifier;\n    /** @type {Module} */\n    this.rootModule = rootModule;\n    /** @type {Set<Module>} */\n    this._modules = modules;\n    this._runtime = runtime;\n    this.factoryMeta = rootModule && rootModule.factoryMeta;\n  }\n\n  /**\r\n   * Assuming this module is in the cache. Update the (cached) module with\r\n   * the fresh module from the factory. Usually updates internal references\r\n   * and properties.\r\n   * @param {Module} module fresh module\r\n   * @returns {void}\r\n   */\n  updateCacheModule(module) {\n    throw new Error(\"Must not be called\");\n  }\n\n  /**\r\n   * @returns {Set<string>} types available (do not mutate)\r\n   */\n  getSourceTypes() {\n    return TYPES;\n  }\n  get modules() {\n    return Array.from(this._modules);\n  }\n\n  /**\r\n   * @returns {string} a unique identifier of the module\r\n   */\n  identifier() {\n    return this._identifier;\n  }\n\n  /**\r\n   * @param {RequestShortener} requestShortener the request shortener\r\n   * @returns {string} a user readable identifier of the module\r\n   */\n  readableIdentifier(requestShortener) {\n    return this.rootModule.readableIdentifier(requestShortener) + ` + ${this._modules.size - 1} modules`;\n  }\n\n  /**\r\n   * @param {LibIdentOptions} options options\r\n   * @returns {string | null} an identifier for library inclusion\r\n   */\n  libIdent(options) {\n    return this.rootModule.libIdent(options);\n  }\n\n  /**\r\n   * @returns {string | null} absolute path which should be used for condition matching (usually the resource path)\r\n   */\n  nameForCondition() {\n    return this.rootModule.nameForCondition();\n  }\n\n  /**\r\n   * @param {ModuleGraph} moduleGraph the module graph\r\n   * @returns {ConnectionState} how this module should be connected to referencing modules when consumed for side-effects only\r\n   */\n  getSideEffectsConnectionState(moduleGraph) {\n    return this.rootModule.getSideEffectsConnectionState(moduleGraph);\n  }\n\n  /**\r\n   * @param {WebpackOptions} options webpack options\r\n   * @param {Compilation} compilation the compilation\r\n   * @param {ResolverWithOptions} resolver the resolver\r\n   * @param {InputFileSystem} fs the file system\r\n   * @param {function(WebpackError=): void} callback callback function\r\n   * @returns {void}\r\n   */\n  build(options, compilation, resolver, fs, callback) {\n    const {\n      rootModule\n    } = this;\n    this.buildInfo = {\n      strict: true,\n      cacheable: true,\n      moduleArgument: rootModule.buildInfo.moduleArgument,\n      exportsArgument: rootModule.buildInfo.exportsArgument,\n      fileDependencies: new LazySet(),\n      contextDependencies: new LazySet(),\n      missingDependencies: new LazySet(),\n      topLevelDeclarations: new Set(),\n      assets: undefined\n    };\n    this.buildMeta = rootModule.buildMeta;\n    this.clearDependenciesAndBlocks();\n    this.clearWarningsAndErrors();\n    for (const m of this._modules) {\n      // populate cacheable\n      if (!m.buildInfo.cacheable) {\n        this.buildInfo.cacheable = false;\n      }\n\n      // populate dependencies\n      for (const d of m.dependencies.filter(dep => !(dep instanceof HarmonyImportDependency) || !this._modules.has(compilation.moduleGraph.getModule(dep)))) {\n        this.dependencies.push(d);\n      }\n      // populate blocks\n      for (const d of m.blocks) {\n        this.blocks.push(d);\n      }\n\n      // populate warnings\n      const warnings = m.getWarnings();\n      if (warnings !== undefined) {\n        for (const warning of warnings) {\n          this.addWarning(warning);\n        }\n      }\n\n      // populate errors\n      const errors = m.getErrors();\n      if (errors !== undefined) {\n        for (const error of errors) {\n          this.addError(error);\n        }\n      }\n\n      // populate topLevelDeclarations\n      if (m.buildInfo.topLevelDeclarations) {\n        const topLevelDeclarations = this.buildInfo.topLevelDeclarations;\n        if (topLevelDeclarations !== undefined) {\n          for (const decl of m.buildInfo.topLevelDeclarations) {\n            topLevelDeclarations.add(decl);\n          }\n        }\n      } else {\n        this.buildInfo.topLevelDeclarations = undefined;\n      }\n\n      // populate assets\n      if (m.buildInfo.assets) {\n        if (this.buildInfo.assets === undefined) {\n          this.buildInfo.assets = Object.create(null);\n        }\n        Object.assign(this.buildInfo.assets, m.buildInfo.assets);\n      }\n      if (m.buildInfo.assetsInfo) {\n        if (this.buildInfo.assetsInfo === undefined) {\n          this.buildInfo.assetsInfo = new Map();\n        }\n        for (const [key, value] of m.buildInfo.assetsInfo) {\n          this.buildInfo.assetsInfo.set(key, value);\n        }\n      }\n    }\n    callback();\n  }\n\n  /**\r\n   * @param {string=} type the source type for which the size should be estimated\r\n   * @returns {number} the estimated size of the module (must be non-zero)\r\n   */\n  size(type) {\n    // Guess size from embedded modules\n    let size = 0;\n    for (const module of this._modules) {\n      size += module.size(type);\n    }\n    return size;\n  }\n\n  /**\r\n   * @private\r\n   * @param {Module} rootModule the root of the concatenation\r\n   * @param {Set<Module>} modulesSet a set of modules which should be concatenated\r\n   * @param {RuntimeSpec} runtime for this runtime\r\n   * @param {ModuleGraph} moduleGraph the module graph\r\n   * @returns {ConcatenationEntry[]} concatenation list\r\n   */\n  _createConcatenationList(rootModule, modulesSet, runtime, moduleGraph) {\n    /** @type {ConcatenationEntry[]} */\n    const list = [];\n    /** @type {Map<Module, RuntimeSpec | true>} */\n    const existingEntries = new Map();\n\n    /**\r\n     * @param {Module} module a module\r\n     * @returns {Iterable<{ connection: ModuleGraphConnection, runtimeCondition: RuntimeSpec | true }>} imported modules in order\r\n     */\n    const getConcatenatedImports = module => {\n      let connections = Array.from(moduleGraph.getOutgoingConnections(module));\n      if (module === rootModule) {\n        for (const c of moduleGraph.getOutgoingConnections(this)) connections.push(c);\n      }\n      /**\r\n       * @type {Array<{ connection: ModuleGraphConnection, sourceOrder: number, rangeStart: number }>}\r\n       */\n      const references = connections.filter(connection => {\n        if (!(connection.dependency instanceof HarmonyImportDependency)) return false;\n        return connection && connection.resolvedOriginModule === module && connection.module && connection.isTargetActive(runtime);\n      }).map(connection => {\n        const dep = /** @type {HarmonyImportDependency} */\n        connection.dependency;\n        return {\n          connection,\n          sourceOrder: dep.sourceOrder,\n          rangeStart: dep.range && dep.range[0]\n        };\n      });\n      /**\r\n       * bySourceOrder\r\n       * @example\r\n       * import a from \"a\"; // sourceOrder=1\r\n       * import b from \"b\"; // sourceOrder=2\r\n       *\r\n       * byRangeStart\r\n       * @example\r\n       * import {a, b} from \"a\"; // sourceOrder=1\r\n       * a.a(); // first range\r\n       * b.b(); // second range\r\n       *\r\n       * If there is no reexport, we have the same source.\r\n       * If there is reexport, but module has side effects, this will lead to reexport module only.\r\n       * If there is side-effects-free reexport, we can get simple deterministic result with range start comparison.\r\n       */\n      references.sort(concatComparators(bySourceOrder, byRangeStart));\n      /** @type {Map<Module, { connection: ModuleGraphConnection, runtimeCondition: RuntimeSpec | true }>} */\n      const referencesMap = new Map();\n      for (const {\n        connection\n      } of references) {\n        const runtimeCondition = filterRuntime(runtime, r => connection.isTargetActive(r));\n        if (runtimeCondition === false) continue;\n        const module = connection.module;\n        const entry = referencesMap.get(module);\n        if (entry === undefined) {\n          referencesMap.set(module, {\n            connection,\n            runtimeCondition\n          });\n          continue;\n        }\n        entry.runtimeCondition = mergeRuntimeConditionNonFalse(entry.runtimeCondition, runtimeCondition, runtime);\n      }\n      return referencesMap.values();\n    };\n\n    /**\r\n     * @param {ModuleGraphConnection} connection graph connection\r\n     * @param {RuntimeSpec | true} runtimeCondition runtime condition\r\n     * @returns {void}\r\n     */\n    const enterModule = (connection, runtimeCondition) => {\n      const module = connection.module;\n      if (!module) return;\n      const existingEntry = existingEntries.get(module);\n      if (existingEntry === true) {\n        return;\n      }\n      if (modulesSet.has(module)) {\n        existingEntries.set(module, true);\n        if (runtimeCondition !== true) {\n          throw new Error(`Cannot runtime-conditional concatenate a module (${module.identifier()} in ${this.rootModule.identifier()}, ${runtimeConditionToString(runtimeCondition)}). This should not happen.`);\n        }\n        const imports = getConcatenatedImports(module);\n        for (const {\n          connection,\n          runtimeCondition\n        } of imports) enterModule(connection, runtimeCondition);\n        list.push({\n          type: \"concatenated\",\n          module: connection.module,\n          runtimeCondition\n        });\n      } else {\n        if (existingEntry !== undefined) {\n          const reducedRuntimeCondition = subtractRuntimeCondition(runtimeCondition, existingEntry, runtime);\n          if (reducedRuntimeCondition === false) return;\n          runtimeCondition = reducedRuntimeCondition;\n          existingEntries.set(connection.module, mergeRuntimeConditionNonFalse(existingEntry, runtimeCondition, runtime));\n        } else {\n          existingEntries.set(connection.module, runtimeCondition);\n        }\n        if (list.length > 0) {\n          const lastItem = list[list.length - 1];\n          if (lastItem.type === \"external\" && lastItem.module === connection.module) {\n            lastItem.runtimeCondition = mergeRuntimeCondition(lastItem.runtimeCondition, runtimeCondition, runtime);\n            return;\n          }\n        }\n        list.push({\n          type: \"external\",\n          get module() {\n            // We need to use a getter here, because the module in the dependency\n            // could be replaced by some other process (i. e. also replaced with a\n            // concatenated module)\n            return connection.module;\n          },\n          runtimeCondition\n        });\n      }\n    };\n    existingEntries.set(rootModule, true);\n    const imports = getConcatenatedImports(rootModule);\n    for (const {\n      connection,\n      runtimeCondition\n    } of imports) enterModule(connection, runtimeCondition);\n    list.push({\n      type: \"concatenated\",\n      module: rootModule,\n      runtimeCondition: true\n    });\n    return list;\n  }\n\n  /**\r\n   * @param {Module} rootModule the root module of the concatenation\r\n   * @param {Set<Module>} modules all modules in the concatenation (including the root module)\r\n   * @param {Object=} associatedObjectForCache object for caching\r\n   * @param {string | HashConstructor=} hashFunction hash function to use\r\n   * @returns {string} the identifier\r\n   */\n  static _createIdentifier(rootModule, modules, associatedObjectForCache) {\n    let hashFunction = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"md4\";\n    const cachedMakePathsRelative = makePathsRelative.bindContextCache(rootModule.context, associatedObjectForCache);\n    let identifiers = [];\n    for (const module of modules) {\n      identifiers.push(cachedMakePathsRelative(module.identifier()));\n    }\n    identifiers.sort();\n    const hash = createHash(hashFunction);\n    hash.update(identifiers.join(\" \"));\n    return rootModule.identifier() + \"|\" + hash.digest(\"hex\");\n  }\n\n  /**\r\n   * @param {LazySet<string>} fileDependencies set where file dependencies are added to\r\n   * @param {LazySet<string>} contextDependencies set where context dependencies are added to\r\n   * @param {LazySet<string>} missingDependencies set where missing dependencies are added to\r\n   * @param {LazySet<string>} buildDependencies set where build dependencies are added to\r\n   */\n  addCacheDependencies(fileDependencies, contextDependencies, missingDependencies, buildDependencies) {\n    for (const module of this._modules) {\n      module.addCacheDependencies(fileDependencies, contextDependencies, missingDependencies, buildDependencies);\n    }\n  }\n\n  /**\r\n   * @param {CodeGenerationContext} context context for code generation\r\n   * @returns {CodeGenerationResult} result\r\n   */\n  codeGeneration(_ref4) {\n    let {\n      dependencyTemplates,\n      runtimeTemplate,\n      moduleGraph,\n      chunkGraph,\n      runtime: generationRuntime,\n      codeGenerationResults\n    } = _ref4;\n    /** @type {Set<string>} */\n    const runtimeRequirements = new Set();\n    const runtime = intersectRuntime(generationRuntime, this._runtime);\n    const requestShortener = runtimeTemplate.requestShortener;\n    // Meta info for each module\n    const [modulesWithInfo, moduleToInfoMap] = this._getModulesWithInfo(moduleGraph, runtime);\n\n    // Set with modules that need a generated namespace object\n    /** @type {Set<ConcatenatedModuleInfo>} */\n    const neededNamespaceObjects = new Set();\n\n    // Generate source code and analyse scopes\n    // Prepare a ReplaceSource for the final source\n    for (const info of moduleToInfoMap.values()) {\n      this._analyseModule(moduleToInfoMap, info, dependencyTemplates, runtimeTemplate, moduleGraph, chunkGraph, runtime, codeGenerationResults);\n    }\n\n    // List of all used names to avoid conflicts\n    const allUsedNames = new Set(RESERVED_NAMES);\n    // Updated Top level declarations are created by renaming\n    const topLevelDeclarations = new Set();\n\n    // List of additional names in scope for module references\n    /** @type {Map<string, { usedNames: Set<string>, alreadyCheckedScopes: Set<TODO> }>} */\n    const usedNamesInScopeInfo = new Map();\n    /**\r\n     * @param {string} module module identifier\r\n     * @param {string} id export id\r\n     * @returns {{ usedNames: Set<string>, alreadyCheckedScopes: Set<TODO> }} info\r\n     */\n    const getUsedNamesInScopeInfo = (module, id) => {\n      const key = `${module}-${id}`;\n      let info = usedNamesInScopeInfo.get(key);\n      if (info === undefined) {\n        info = {\n          usedNames: new Set(),\n          alreadyCheckedScopes: new Set()\n        };\n        usedNamesInScopeInfo.set(key, info);\n      }\n      return info;\n    };\n\n    // Set of already checked scopes\n    const ignoredScopes = new Set();\n\n    // get all global names\n    for (const info of modulesWithInfo) {\n      if (info.type === \"concatenated\") {\n        // ignore symbols from moduleScope\n        if (info.moduleScope) {\n          ignoredScopes.add(info.moduleScope);\n        }\n\n        // The super class expression in class scopes behaves weird\n        // We get ranges of all super class expressions to make\n        // renaming to work correctly\n        const superClassCache = new WeakMap();\n        const getSuperClassExpressions = scope => {\n          const cacheEntry = superClassCache.get(scope);\n          if (cacheEntry !== undefined) return cacheEntry;\n          const superClassExpressions = [];\n          for (const childScope of scope.childScopes) {\n            if (childScope.type !== \"class\") continue;\n            const block = childScope.block;\n            if ((block.type === \"ClassDeclaration\" || block.type === \"ClassExpression\") && block.superClass) {\n              superClassExpressions.push({\n                range: block.superClass.range,\n                variables: childScope.variables\n              });\n            }\n          }\n          superClassCache.set(scope, superClassExpressions);\n          return superClassExpressions;\n        };\n\n        // add global symbols\n        if (info.globalScope) {\n          for (const reference of info.globalScope.through) {\n            const name = reference.identifier.name;\n            if (ConcatenationScope.isModuleReference(name)) {\n              const match = ConcatenationScope.matchModuleReference(name);\n              if (!match) continue;\n              const referencedInfo = modulesWithInfo[match.index];\n              if (referencedInfo.type === \"reference\") throw new Error(\"Module reference can't point to a reference\");\n              const binding = getFinalBinding(moduleGraph, referencedInfo, match.ids, moduleToInfoMap, runtime, requestShortener, runtimeTemplate, neededNamespaceObjects, false, info.module.buildMeta.strictHarmonyModule, true);\n              if (!binding.ids) continue;\n              const {\n                usedNames,\n                alreadyCheckedScopes\n              } = getUsedNamesInScopeInfo(binding.info.module.identifier(), \"name\" in binding ? binding.name : \"\");\n              for (const expr of getSuperClassExpressions(reference.from)) {\n                if (expr.range[0] <= reference.identifier.range[0] && expr.range[1] >= reference.identifier.range[1]) {\n                  for (const variable of expr.variables) {\n                    usedNames.add(variable.name);\n                  }\n                }\n              }\n              addScopeSymbols(reference.from, usedNames, alreadyCheckedScopes, ignoredScopes);\n            } else {\n              allUsedNames.add(name);\n            }\n          }\n        }\n      }\n    }\n\n    // generate names for symbols\n    for (const info of moduleToInfoMap.values()) {\n      const {\n        usedNames: namespaceObjectUsedNames\n      } = getUsedNamesInScopeInfo(info.module.identifier(), \"\");\n      switch (info.type) {\n        case \"concatenated\":\n          {\n            for (const variable of info.moduleScope.variables) {\n              const name = variable.name;\n              const {\n                usedNames,\n                alreadyCheckedScopes\n              } = getUsedNamesInScopeInfo(info.module.identifier(), name);\n              if (allUsedNames.has(name) || usedNames.has(name)) {\n                const references = getAllReferences(variable);\n                for (const ref of references) {\n                  addScopeSymbols(ref.from, usedNames, alreadyCheckedScopes, ignoredScopes);\n                }\n                const newName = this.findNewName(name, allUsedNames, usedNames, info.module.readableIdentifier(requestShortener));\n                allUsedNames.add(newName);\n                info.internalNames.set(name, newName);\n                topLevelDeclarations.add(newName);\n                const source = info.source;\n                const allIdentifiers = new Set(references.map(r => r.identifier).concat(variable.identifiers));\n                for (const identifier of allIdentifiers) {\n                  const r = identifier.range;\n                  const path = getPathInAst(info.ast, identifier);\n                  if (path && path.length > 1) {\n                    const maybeProperty = path[1].type === \"AssignmentPattern\" && path[1].left === path[0] ? path[2] : path[1];\n                    if (maybeProperty.type === \"Property\" && maybeProperty.shorthand) {\n                      source.insert(r[1], `: ${newName}`);\n                      continue;\n                    }\n                  }\n                  source.replace(r[0], r[1] - 1, newName);\n                }\n              } else {\n                allUsedNames.add(name);\n                info.internalNames.set(name, name);\n                topLevelDeclarations.add(name);\n              }\n            }\n            let namespaceObjectName;\n            if (info.namespaceExportSymbol) {\n              namespaceObjectName = info.internalNames.get(info.namespaceExportSymbol);\n            } else {\n              namespaceObjectName = this.findNewName(\"namespaceObject\", allUsedNames, namespaceObjectUsedNames, info.module.readableIdentifier(requestShortener));\n              allUsedNames.add(namespaceObjectName);\n            }\n            info.namespaceObjectName = namespaceObjectName;\n            topLevelDeclarations.add(namespaceObjectName);\n            break;\n          }\n        case \"external\":\n          {\n            const externalName = this.findNewName(\"\", allUsedNames, namespaceObjectUsedNames, info.module.readableIdentifier(requestShortener));\n            allUsedNames.add(externalName);\n            info.name = externalName;\n            topLevelDeclarations.add(externalName);\n            break;\n          }\n      }\n      if (info.module.buildMeta.exportsType !== \"namespace\") {\n        const externalNameInterop = this.findNewName(\"namespaceObject\", allUsedNames, namespaceObjectUsedNames, info.module.readableIdentifier(requestShortener));\n        allUsedNames.add(externalNameInterop);\n        info.interopNamespaceObjectName = externalNameInterop;\n        topLevelDeclarations.add(externalNameInterop);\n      }\n      if (info.module.buildMeta.exportsType === \"default\" && info.module.buildMeta.defaultObject !== \"redirect\") {\n        const externalNameInterop = this.findNewName(\"namespaceObject2\", allUsedNames, namespaceObjectUsedNames, info.module.readableIdentifier(requestShortener));\n        allUsedNames.add(externalNameInterop);\n        info.interopNamespaceObject2Name = externalNameInterop;\n        topLevelDeclarations.add(externalNameInterop);\n      }\n      if (info.module.buildMeta.exportsType === \"dynamic\" || !info.module.buildMeta.exportsType) {\n        const externalNameInterop = this.findNewName(\"default\", allUsedNames, namespaceObjectUsedNames, info.module.readableIdentifier(requestShortener));\n        allUsedNames.add(externalNameInterop);\n        info.interopDefaultAccessName = externalNameInterop;\n        topLevelDeclarations.add(externalNameInterop);\n      }\n    }\n\n    // Find and replace references to modules\n    for (const info of moduleToInfoMap.values()) {\n      if (info.type === \"concatenated\") {\n        for (const reference of info.globalScope.through) {\n          const name = reference.identifier.name;\n          const match = ConcatenationScope.matchModuleReference(name);\n          if (match) {\n            const referencedInfo = modulesWithInfo[match.index];\n            if (referencedInfo.type === \"reference\") throw new Error(\"Module reference can't point to a reference\");\n            const finalName = getFinalName(moduleGraph, referencedInfo, match.ids, moduleToInfoMap, runtime, requestShortener, runtimeTemplate, neededNamespaceObjects, match.call, !match.directImport, info.module.buildMeta.strictHarmonyModule, match.asiSafe);\n            const r = reference.identifier.range;\n            const source = info.source;\n            // range is extended by 2 chars to cover the appended \"._\"\n            source.replace(r[0], r[1] + 1, finalName);\n          }\n        }\n      }\n    }\n\n    // Map with all root exposed used exports\n    /** @type {Map<string, function(RequestShortener): string>} */\n    const exportsMap = new Map();\n\n    // Set with all root exposed unused exports\n    /** @type {Set<string>} */\n    const unusedExports = new Set();\n    const rootInfo = /** @type {ConcatenatedModuleInfo} */\n    moduleToInfoMap.get(this.rootModule);\n    const strictHarmonyModule = rootInfo.module.buildMeta.strictHarmonyModule;\n    const exportsInfo = moduleGraph.getExportsInfo(rootInfo.module);\n    for (const exportInfo of exportsInfo.orderedExports) {\n      const name = exportInfo.name;\n      if (exportInfo.provided === false) continue;\n      const used = exportInfo.getUsedName(undefined, runtime);\n      if (!used) {\n        unusedExports.add(name);\n        continue;\n      }\n      exportsMap.set(used, requestShortener => {\n        try {\n          const finalName = getFinalName(moduleGraph, rootInfo, [name], moduleToInfoMap, runtime, requestShortener, runtimeTemplate, neededNamespaceObjects, false, false, strictHarmonyModule, true);\n          return `/* ${exportInfo.isReexport() ? \"reexport\" : \"binding\"} */ ${finalName}`;\n        } catch (e) {\n          e.message += `\\nwhile generating the root export '${name}' (used name: '${used}')`;\n          throw e;\n        }\n      });\n    }\n    const result = new ConcatSource();\n\n    // add harmony compatibility flag (must be first because of possible circular dependencies)\n    if (moduleGraph.getExportsInfo(this).otherExportsInfo.getUsed(runtime) !== UsageState.Unused) {\n      result.add(`// ESM COMPAT FLAG\\n`);\n      result.add(runtimeTemplate.defineEsModuleFlagStatement({\n        exportsArgument: this.exportsArgument,\n        runtimeRequirements\n      }));\n    }\n\n    // define exports\n    if (exportsMap.size > 0) {\n      runtimeRequirements.add(RuntimeGlobals.exports);\n      runtimeRequirements.add(RuntimeGlobals.definePropertyGetters);\n      const definitions = [];\n      for (const [key, value] of exportsMap) {\n        definitions.push(`\\n  ${JSON.stringify(key)}: ${runtimeTemplate.returningFunction(value(requestShortener))}`);\n      }\n      result.add(`\\n// EXPORTS\\n`);\n      result.add(`${RuntimeGlobals.definePropertyGetters}(${this.exportsArgument}, {${definitions.join(\",\")}\\n});\\n`);\n    }\n\n    // list unused exports\n    if (unusedExports.size > 0) {\n      result.add(`\\n// UNUSED EXPORTS: ${joinIterableWithComma(unusedExports)}\\n`);\n    }\n\n    // generate namespace objects\n    const namespaceObjectSources = new Map();\n    for (const info of neededNamespaceObjects) {\n      if (info.namespaceExportSymbol) continue;\n      const nsObj = [];\n      const exportsInfo = moduleGraph.getExportsInfo(info.module);\n      for (const exportInfo of exportsInfo.orderedExports) {\n        if (exportInfo.provided === false) continue;\n        const usedName = exportInfo.getUsedName(undefined, runtime);\n        if (usedName) {\n          const finalName = getFinalName(moduleGraph, info, [exportInfo.name], moduleToInfoMap, runtime, requestShortener, runtimeTemplate, neededNamespaceObjects, false, undefined, info.module.buildMeta.strictHarmonyModule, true);\n          nsObj.push(`\\n  ${JSON.stringify(usedName)}: ${runtimeTemplate.returningFunction(finalName)}`);\n        }\n      }\n      const name = info.namespaceObjectName;\n      const defineGetters = nsObj.length > 0 ? `${RuntimeGlobals.definePropertyGetters}(${name}, {${nsObj.join(\",\")}\\n});\\n` : \"\";\n      if (nsObj.length > 0) runtimeRequirements.add(RuntimeGlobals.definePropertyGetters);\n      namespaceObjectSources.set(info, `\n// NAMESPACE OBJECT: ${info.module.readableIdentifier(requestShortener)}\nvar ${name} = {};\n${RuntimeGlobals.makeNamespaceObject}(${name});\n${defineGetters}`);\n      runtimeRequirements.add(RuntimeGlobals.makeNamespaceObject);\n    }\n\n    // define required namespace objects (must be before evaluation modules)\n    for (const info of modulesWithInfo) {\n      if (info.type === \"concatenated\") {\n        const source = namespaceObjectSources.get(info);\n        if (!source) continue;\n        result.add(source);\n      }\n    }\n    const chunkInitFragments = [];\n\n    // evaluate modules in order\n    for (const rawInfo of modulesWithInfo) {\n      let name;\n      let isConditional = false;\n      const info = rawInfo.type === \"reference\" ? rawInfo.target : rawInfo;\n      switch (info.type) {\n        case \"concatenated\":\n          {\n            result.add(`\\n;// CONCATENATED MODULE: ${info.module.readableIdentifier(requestShortener)}\\n`);\n            result.add(info.source);\n            if (info.chunkInitFragments) {\n              for (const f of info.chunkInitFragments) chunkInitFragments.push(f);\n            }\n            if (info.runtimeRequirements) {\n              for (const r of info.runtimeRequirements) {\n                runtimeRequirements.add(r);\n              }\n            }\n            name = info.namespaceObjectName;\n            break;\n          }\n        case \"external\":\n          {\n            result.add(`\\n// EXTERNAL MODULE: ${info.module.readableIdentifier(requestShortener)}\\n`);\n            runtimeRequirements.add(RuntimeGlobals.require);\n            const {\n              runtimeCondition\n            } = /** @type {ExternalModuleInfo | ReferenceToModuleInfo} */rawInfo;\n            const condition = runtimeTemplate.runtimeConditionExpression({\n              chunkGraph,\n              runtimeCondition,\n              runtime,\n              runtimeRequirements\n            });\n            if (condition !== \"true\") {\n              isConditional = true;\n              result.add(`if (${condition}) {\\n`);\n            }\n            result.add(`var ${info.name} = __webpack_require__(${JSON.stringify(chunkGraph.getModuleId(info.module))});`);\n            name = info.name;\n            break;\n          }\n        default:\n          // @ts-expect-error never is expected here\n          throw new Error(`Unsupported concatenation entry type ${info.type}`);\n      }\n      if (info.interopNamespaceObjectUsed) {\n        runtimeRequirements.add(RuntimeGlobals.createFakeNamespaceObject);\n        result.add(`\\nvar ${info.interopNamespaceObjectName} = /*#__PURE__*/${RuntimeGlobals.createFakeNamespaceObject}(${name}, 2);`);\n      }\n      if (info.interopNamespaceObject2Used) {\n        runtimeRequirements.add(RuntimeGlobals.createFakeNamespaceObject);\n        result.add(`\\nvar ${info.interopNamespaceObject2Name} = /*#__PURE__*/${RuntimeGlobals.createFakeNamespaceObject}(${name});`);\n      }\n      if (info.interopDefaultAccessUsed) {\n        runtimeRequirements.add(RuntimeGlobals.compatGetDefaultExport);\n        result.add(`\\nvar ${info.interopDefaultAccessName} = /*#__PURE__*/${RuntimeGlobals.compatGetDefaultExport}(${name});`);\n      }\n      if (isConditional) {\n        result.add(\"\\n}\");\n      }\n    }\n    const data = new Map();\n    if (chunkInitFragments.length > 0) data.set(\"chunkInitFragments\", chunkInitFragments);\n    data.set(\"topLevelDeclarations\", topLevelDeclarations);\n\n    /** @type {CodeGenerationResult} */\n    const resultEntry = {\n      sources: new Map([[\"javascript\", new CachedSource(result)]]),\n      data,\n      runtimeRequirements\n    };\n    return resultEntry;\n  }\n\n  /**\r\n   * @param {Map<Module, ModuleInfo>} modulesMap modulesMap\r\n   * @param {ModuleInfo} info info\r\n   * @param {DependencyTemplates} dependencyTemplates dependencyTemplates\r\n   * @param {RuntimeTemplate} runtimeTemplate runtimeTemplate\r\n   * @param {ModuleGraph} moduleGraph moduleGraph\r\n   * @param {ChunkGraph} chunkGraph chunkGraph\r\n   * @param {RuntimeSpec} runtime runtime\r\n   * @param {CodeGenerationResults} codeGenerationResults codeGenerationResults\r\n   */\n  _analyseModule(modulesMap, info, dependencyTemplates, runtimeTemplate, moduleGraph, chunkGraph, runtime, codeGenerationResults) {\n    if (info.type === \"concatenated\") {\n      const m = info.module;\n      try {\n        // Create a concatenation scope to track and capture information\n        const concatenationScope = new ConcatenationScope(modulesMap, info);\n\n        // TODO cache codeGeneration results\n        const codeGenResult = m.codeGeneration({\n          dependencyTemplates,\n          runtimeTemplate,\n          moduleGraph,\n          chunkGraph,\n          runtime,\n          concatenationScope,\n          codeGenerationResults,\n          sourceTypes: TYPES\n        });\n        const source = codeGenResult.sources.get(\"javascript\");\n        const data = codeGenResult.data;\n        const chunkInitFragments = data && data.get(\"chunkInitFragments\");\n        const code = source.source().toString();\n        let ast;\n        try {\n          ast = JavascriptParser._parse(code, {\n            sourceType: \"module\"\n          });\n        } catch (err) {\n          if (err.loc && typeof err.loc === \"object\" && typeof err.loc.line === \"number\") {\n            const lineNumber = err.loc.line;\n            const lines = code.split(\"\\n\");\n            err.message += \"\\n| \" + lines.slice(Math.max(0, lineNumber - 3), lineNumber + 2).join(\"\\n| \");\n          }\n          throw err;\n        }\n        const scopeManager = eslintScope.analyze(ast, {\n          ecmaVersion: 6,\n          sourceType: \"module\",\n          optimistic: true,\n          ignoreEval: true,\n          impliedStrict: true\n        });\n        const globalScope = scopeManager.acquire(ast);\n        const moduleScope = globalScope.childScopes[0];\n        const resultSource = new ReplaceSource(source);\n        info.runtimeRequirements = codeGenResult.runtimeRequirements;\n        info.ast = ast;\n        info.internalSource = source;\n        info.source = resultSource;\n        info.chunkInitFragments = chunkInitFragments;\n        info.globalScope = globalScope;\n        info.moduleScope = moduleScope;\n      } catch (err) {\n        err.message += `\\nwhile analyzing module ${m.identifier()} for concatenation`;\n        throw err;\n      }\n    }\n  }\n\n  /**\r\n   * @param {ModuleGraph} moduleGraph the module graph\r\n   * @param {RuntimeSpec} runtime the runtime\r\n   * @returns {[ModuleInfoOrReference[], Map<Module, ModuleInfo>]} module info items\r\n   */\n  _getModulesWithInfo(moduleGraph, runtime) {\n    const orderedConcatenationList = this._createConcatenationList(this.rootModule, this._modules, runtime, moduleGraph);\n    /** @type {Map<Module, ModuleInfo>} */\n    const map = new Map();\n    const list = orderedConcatenationList.map((info, index) => {\n      let item = map.get(info.module);\n      if (item === undefined) {\n        switch (info.type) {\n          case \"concatenated\":\n            item = {\n              type: \"concatenated\",\n              module: info.module,\n              index,\n              ast: undefined,\n              internalSource: undefined,\n              runtimeRequirements: undefined,\n              source: undefined,\n              globalScope: undefined,\n              moduleScope: undefined,\n              internalNames: new Map(),\n              exportMap: undefined,\n              rawExportMap: undefined,\n              namespaceExportSymbol: undefined,\n              namespaceObjectName: undefined,\n              interopNamespaceObjectUsed: false,\n              interopNamespaceObjectName: undefined,\n              interopNamespaceObject2Used: false,\n              interopNamespaceObject2Name: undefined,\n              interopDefaultAccessUsed: false,\n              interopDefaultAccessName: undefined\n            };\n            break;\n          case \"external\":\n            item = {\n              type: \"external\",\n              module: info.module,\n              runtimeCondition: info.runtimeCondition,\n              index,\n              name: undefined,\n              interopNamespaceObjectUsed: false,\n              interopNamespaceObjectName: undefined,\n              interopNamespaceObject2Used: false,\n              interopNamespaceObject2Name: undefined,\n              interopDefaultAccessUsed: false,\n              interopDefaultAccessName: undefined\n            };\n            break;\n          default:\n            throw new Error(`Unsupported concatenation entry type ${info.type}`);\n        }\n        map.set(item.module, item);\n        return item;\n      } else {\n        /** @type {ReferenceToModuleInfo} */\n        const ref = {\n          type: \"reference\",\n          runtimeCondition: info.runtimeCondition,\n          target: item\n        };\n        return ref;\n      }\n    });\n    return [list, map];\n  }\n  findNewName(oldName, usedNamed1, usedNamed2, extraInfo) {\n    let name = oldName;\n    if (name === ConcatenationScope.DEFAULT_EXPORT) {\n      name = \"\";\n    }\n    if (name === ConcatenationScope.NAMESPACE_OBJECT_EXPORT) {\n      name = \"namespaceObject\";\n    }\n\n    // Remove uncool stuff\n    extraInfo = extraInfo.replace(/\\.+\\/|(\\/index)?\\.([a-zA-Z0-9]{1,4})($|\\s|\\?)|\\s*\\+\\s*\\d+\\s*modules/g, \"\");\n    const splittedInfo = extraInfo.split(\"/\");\n    while (splittedInfo.length) {\n      name = splittedInfo.pop() + (name ? \"_\" + name : \"\");\n      const nameIdent = Template.toIdentifier(name);\n      if (!usedNamed1.has(nameIdent) && (!usedNamed2 || !usedNamed2.has(nameIdent))) return nameIdent;\n    }\n    let i = 0;\n    let nameWithNumber = Template.toIdentifier(`${name}_${i}`);\n    while (usedNamed1.has(nameWithNumber) || usedNamed2 && usedNamed2.has(nameWithNumber)) {\n      i++;\n      nameWithNumber = Template.toIdentifier(`${name}_${i}`);\n    }\n    return nameWithNumber;\n  }\n\n  /**\r\n   * @param {Hash} hash the hash used to track dependencies\r\n   * @param {UpdateHashContext} context context\r\n   * @returns {void}\r\n   */\n  updateHash(hash, context) {\n    const {\n      chunkGraph,\n      runtime\n    } = context;\n    for (const info of this._createConcatenationList(this.rootModule, this._modules, intersectRuntime(runtime, this._runtime), chunkGraph.moduleGraph)) {\n      switch (info.type) {\n        case \"concatenated\":\n          info.module.updateHash(hash, context);\n          break;\n        case \"external\":\n          hash.update(`${chunkGraph.getModuleId(info.module)}`);\n          // TODO runtimeCondition\n          break;\n      }\n    }\n    super.updateHash(hash, context);\n  }\n  static deserialize(context) {\n    const obj = new ConcatenatedModule({\n      identifier: undefined,\n      rootModule: undefined,\n      modules: undefined,\n      runtime: undefined\n    });\n    obj.deserialize(context);\n    return obj;\n  }\n}\nmakeSerializable(ConcatenatedModule, \"webpack/lib/optimize/ConcatenatedModule\");\nmodule.exports = ConcatenatedModule;","map":{"version":3,"names":["eslintScope","require","Referencer","CachedSource","ConcatSource","ReplaceSource","ConcatenationScope","UsageState","Module","RuntimeGlobals","Template","HarmonyImportDependency","JavascriptParser","equals","LazySet","concatComparators","createHash","makePathsRelative","makeSerializable","propertyAccess","filterRuntime","intersectRuntime","mergeRuntimeCondition","mergeRuntimeConditionNonFalse","runtimeConditionToString","subtractRuntimeCondition","ReferencerClass","prototype","PropertyDefinition","Property","RESERVED_NAMES","Set","DEFAULT_EXPORT","NAMESPACE_OBJECT_EXPORT","join","split","createComparator","property","comparator","a","b","compareNumbers","isNaN","bySourceOrder","byRangeStart","joinIterableWithComma","iterable","str","first","item","getFinalBinding","moduleGraph","info","exportName","moduleToInfoMap","runtime","requestShortener","runtimeTemplate","neededNamespaceObjects","asCall","strictHarmonyModule","asiSafe","alreadyVisited","exportsType","module","getExportsType","length","interopNamespaceObject2Used","rawName","interopNamespaceObject2Name","ids","interopNamespaceObjectUsed","interopNamespaceObjectName","Error","slice","exportId","interopDefaultAccessUsed","defaultExport","interopDefaultAccessName","type","add","namespaceObjectName","name","exportsInfo","getExportsInfo","exportInfo","getExportInfo","has","provided","directExport","exportMap","get","usedName","getUsedName","rawExport","rawExportMap","reexport","findTarget","readableIdentifier","Array","from","m","refInfo","export","buildMeta","namespaceExportSymbol","used","comment","toNormalComment","getFinalName","callContext","binding","reference","isPropertyAccess","internalNames","symbol","addScopeSymbols","s","nameSet","scopeSet1","scopeSet2","scope","variable","variables","upper","getAllReferences","set","references","identifiers","childScopes","innerVar","some","id","concat","getPathInAst","ast","node","nr","range","enterNode","n","undefined","r","path","push","isArray","i","enterResult","keys","Object","value","pathResult","TYPES","ConcatenatedModule","create","rootModule","modules","associatedObjectForCache","hashFunction","identifier","_createIdentifier","constructor","layer","_identifier","_modules","_runtime","factoryMeta","updateCacheModule","getSourceTypes","size","libIdent","options","nameForCondition","getSideEffectsConnectionState","build","compilation","resolver","fs","callback","buildInfo","strict","cacheable","moduleArgument","exportsArgument","fileDependencies","contextDependencies","missingDependencies","topLevelDeclarations","assets","clearDependenciesAndBlocks","clearWarningsAndErrors","d","dependencies","filter","dep","getModule","blocks","warnings","getWarnings","warning","addWarning","errors","getErrors","error","addError","decl","assign","assetsInfo","Map","key","_createConcatenationList","modulesSet","list","existingEntries","getConcatenatedImports","connections","getOutgoingConnections","c","connection","dependency","resolvedOriginModule","isTargetActive","map","sourceOrder","rangeStart","sort","referencesMap","runtimeCondition","entry","values","enterModule","existingEntry","imports","reducedRuntimeCondition","lastItem","cachedMakePathsRelative","bindContextCache","context","hash","update","digest","addCacheDependencies","buildDependencies","codeGeneration","dependencyTemplates","chunkGraph","generationRuntime","codeGenerationResults","runtimeRequirements","modulesWithInfo","_getModulesWithInfo","_analyseModule","allUsedNames","usedNamesInScopeInfo","getUsedNamesInScopeInfo","usedNames","alreadyCheckedScopes","ignoredScopes","moduleScope","superClassCache","WeakMap","getSuperClassExpressions","cacheEntry","superClassExpressions","childScope","block","superClass","globalScope","through","isModuleReference","match","matchModuleReference","referencedInfo","index","expr","namespaceObjectUsedNames","ref","newName","findNewName","source","allIdentifiers","maybeProperty","left","shorthand","insert","replace","externalName","externalNameInterop","defaultObject","finalName","call","directImport","exportsMap","unusedExports","rootInfo","orderedExports","isReexport","e","message","result","otherExportsInfo","getUsed","Unused","defineEsModuleFlagStatement","exports","definePropertyGetters","definitions","JSON","stringify","returningFunction","namespaceObjectSources","nsObj","defineGetters","makeNamespaceObject","chunkInitFragments","rawInfo","isConditional","target","f","condition","runtimeConditionExpression","getModuleId","createFakeNamespaceObject","compatGetDefaultExport","data","resultEntry","sources","modulesMap","concatenationScope","codeGenResult","sourceTypes","code","toString","_parse","sourceType","err","loc","line","lineNumber","lines","Math","max","scopeManager","analyze","ecmaVersion","optimistic","ignoreEval","impliedStrict","acquire","resultSource","internalSource","orderedConcatenationList","oldName","usedNamed1","usedNamed2","extraInfo","splittedInfo","pop","nameIdent","toIdentifier","nameWithNumber","updateHash","deserialize","obj"],"sources":["C:/Users/91930/Desktop/Github projects/Pharmacy Demo/front-end/node_modules/webpack/lib/optimize/ConcatenatedModule.js"],"sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n\r\n\"use strict\";\r\n\r\nconst eslintScope = require(\"eslint-scope\");\r\nconst Referencer = require(\"eslint-scope/lib/referencer\");\r\nconst {\r\n\tCachedSource,\r\n\tConcatSource,\r\n\tReplaceSource\r\n} = require(\"webpack-sources\");\r\nconst ConcatenationScope = require(\"../ConcatenationScope\");\r\nconst { UsageState } = require(\"../ExportsInfo\");\r\nconst Module = require(\"../Module\");\r\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\r\nconst Template = require(\"../Template\");\r\nconst HarmonyImportDependency = require(\"../dependencies/HarmonyImportDependency\");\r\nconst JavascriptParser = require(\"../javascript/JavascriptParser\");\r\nconst { equals } = require(\"../util/ArrayHelpers\");\r\nconst LazySet = require(\"../util/LazySet\");\r\nconst { concatComparators } = require(\"../util/comparators\");\r\nconst createHash = require(\"../util/createHash\");\r\nconst { makePathsRelative } = require(\"../util/identifier\");\r\nconst makeSerializable = require(\"../util/makeSerializable\");\r\nconst propertyAccess = require(\"../util/propertyAccess\");\r\nconst {\r\n\tfilterRuntime,\r\n\tintersectRuntime,\r\n\tmergeRuntimeCondition,\r\n\tmergeRuntimeConditionNonFalse,\r\n\truntimeConditionToString,\r\n\tsubtractRuntimeCondition\r\n} = require(\"../util/runtime\");\r\n\r\n/** @typedef {import(\"eslint-scope\").Scope} Scope */\r\n/** @typedef {import(\"webpack-sources\").Source} Source */\r\n/** @typedef {import(\"../../declarations/WebpackOptions\").WebpackOptionsNormalized} WebpackOptions */\r\n/** @typedef {import(\"../ChunkGraph\")} ChunkGraph */\r\n/** @typedef {import(\"../CodeGenerationResults\")} CodeGenerationResults */\r\n/** @typedef {import(\"../Compilation\")} Compilation */\r\n/** @typedef {import(\"../Dependency\")} Dependency */\r\n/** @typedef {import(\"../Dependency\").UpdateHashContext} UpdateHashContext */\r\n/** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\r\n/** @typedef {import(\"../DependencyTemplates\")} DependencyTemplates */\r\n/** @typedef {import(\"../ExportsInfo\").ExportInfo} ExportInfo */\r\n/** @template T @typedef {import(\"../InitFragment\")<T>} InitFragment */\r\n/** @typedef {import(\"../Module\").CodeGenerationContext} CodeGenerationContext */\r\n/** @typedef {import(\"../Module\").CodeGenerationResult} CodeGenerationResult */\r\n/** @typedef {import(\"../Module\").LibIdentOptions} LibIdentOptions */\r\n/** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\r\n/** @typedef {import(\"../ModuleGraphConnection\")} ModuleGraphConnection */\r\n/** @typedef {import(\"../ModuleGraphConnection\").ConnectionState} ConnectionState */\r\n/** @typedef {import(\"../RequestShortener\")} RequestShortener */\r\n/** @typedef {import(\"../ResolverFactory\").ResolverWithOptions} ResolverWithOptions */\r\n/** @typedef {import(\"../RuntimeTemplate\")} RuntimeTemplate */\r\n/** @typedef {import(\"../WebpackError\")} WebpackError */\r\n/** @typedef {import(\"../javascript/JavascriptModulesPlugin\").ChunkRenderContext} ChunkRenderContext */\r\n/** @typedef {import(\"../util/Hash\")} Hash */\r\n/** @typedef {typeof import(\"../util/Hash\")} HashConstructor */\r\n/** @typedef {import(\"../util/fs\").InputFileSystem} InputFileSystem */\r\n/** @typedef {import(\"../util/runtime\").RuntimeSpec} RuntimeSpec */\r\n\r\n// fix eslint-scope to support class properties correctly\r\n// cspell:word Referencer\r\nconst ReferencerClass = Referencer;\r\nif (!ReferencerClass.prototype.PropertyDefinition) {\r\n\tReferencerClass.prototype.PropertyDefinition =\r\n\t\tReferencerClass.prototype.Property;\r\n}\r\n\r\n/**\r\n * @typedef {Object} ReexportInfo\r\n * @property {Module} module\r\n * @property {string[]} export\r\n */\r\n\r\n/** @typedef {RawBinding | SymbolBinding} Binding */\r\n\r\n/**\r\n * @typedef {Object} RawBinding\r\n * @property {ModuleInfo} info\r\n * @property {string} rawName\r\n * @property {string=} comment\r\n * @property {string[]} ids\r\n * @property {string[]} exportName\r\n */\r\n\r\n/**\r\n * @typedef {Object} SymbolBinding\r\n * @property {ConcatenatedModuleInfo} info\r\n * @property {string} name\r\n * @property {string=} comment\r\n * @property {string[]} ids\r\n * @property {string[]} exportName\r\n */\r\n\r\n/** @typedef {ConcatenatedModuleInfo | ExternalModuleInfo } ModuleInfo */\r\n/** @typedef {ConcatenatedModuleInfo | ExternalModuleInfo | ReferenceToModuleInfo } ModuleInfoOrReference */\r\n\r\n/**\r\n * @typedef {Object} ConcatenatedModuleInfo\r\n * @property {\"concatenated\"} type\r\n * @property {Module} module\r\n * @property {number} index\r\n * @property {Object} ast\r\n * @property {Source} internalSource\r\n * @property {ReplaceSource} source\r\n * @property {InitFragment<ChunkRenderContext>[]=} chunkInitFragments\r\n * @property {Iterable<string>} runtimeRequirements\r\n * @property {Scope} globalScope\r\n * @property {Scope} moduleScope\r\n * @property {Map<string, string>} internalNames\r\n * @property {Map<string, string>} exportMap\r\n * @property {Map<string, string>} rawExportMap\r\n * @property {string=} namespaceExportSymbol\r\n * @property {string} namespaceObjectName\r\n * @property {boolean} interopNamespaceObjectUsed\r\n * @property {string} interopNamespaceObjectName\r\n * @property {boolean} interopNamespaceObject2Used\r\n * @property {string} interopNamespaceObject2Name\r\n * @property {boolean} interopDefaultAccessUsed\r\n * @property {string} interopDefaultAccessName\r\n */\r\n\r\n/**\r\n * @typedef {Object} ExternalModuleInfo\r\n * @property {\"external\"} type\r\n * @property {Module} module\r\n * @property {RuntimeSpec | boolean} runtimeCondition\r\n * @property {number} index\r\n * @property {string} name\r\n * @property {boolean} interopNamespaceObjectUsed\r\n * @property {string} interopNamespaceObjectName\r\n * @property {boolean} interopNamespaceObject2Used\r\n * @property {string} interopNamespaceObject2Name\r\n * @property {boolean} interopDefaultAccessUsed\r\n * @property {string} interopDefaultAccessName\r\n */\r\n\r\n/**\r\n * @typedef {Object} ReferenceToModuleInfo\r\n * @property {\"reference\"} type\r\n * @property {RuntimeSpec | boolean} runtimeCondition\r\n * @property {ConcatenatedModuleInfo | ExternalModuleInfo} target\r\n */\r\n\r\nconst RESERVED_NAMES = new Set(\r\n\t[\r\n\t\t// internal names (should always be renamed)\r\n\t\tConcatenationScope.DEFAULT_EXPORT,\r\n\t\tConcatenationScope.NAMESPACE_OBJECT_EXPORT,\r\n\r\n\t\t// keywords\r\n\t\t\"abstract,arguments,async,await,boolean,break,byte,case,catch,char,class,const,continue\",\r\n\t\t\"debugger,default,delete,do,double,else,enum,eval,export,extends,false,final,finally,float\",\r\n\t\t\"for,function,goto,if,implements,import,in,instanceof,int,interface,let,long,native,new,null\",\r\n\t\t\"package,private,protected,public,return,short,static,super,switch,synchronized,this,throw\",\r\n\t\t\"throws,transient,true,try,typeof,var,void,volatile,while,with,yield\",\r\n\r\n\t\t// commonjs/amd\r\n\t\t\"module,__dirname,__filename,exports,require,define\",\r\n\r\n\t\t// js globals\r\n\t\t\"Array,Date,eval,function,hasOwnProperty,Infinity,isFinite,isNaN,isPrototypeOf,length,Math\",\r\n\t\t\"NaN,name,Number,Object,prototype,String,toString,undefined,valueOf\",\r\n\r\n\t\t// browser globals\r\n\t\t\"alert,all,anchor,anchors,area,assign,blur,button,checkbox,clearInterval,clearTimeout\",\r\n\t\t\"clientInformation,close,closed,confirm,constructor,crypto,decodeURI,decodeURIComponent\",\r\n\t\t\"defaultStatus,document,element,elements,embed,embeds,encodeURI,encodeURIComponent,escape\",\r\n\t\t\"event,fileUpload,focus,form,forms,frame,innerHeight,innerWidth,layer,layers,link,location\",\r\n\t\t\"mimeTypes,navigate,navigator,frames,frameRate,hidden,history,image,images,offscreenBuffering\",\r\n\t\t\"open,opener,option,outerHeight,outerWidth,packages,pageXOffset,pageYOffset,parent,parseFloat\",\r\n\t\t\"parseInt,password,pkcs11,plugin,prompt,propertyIsEnum,radio,reset,screenX,screenY,scroll\",\r\n\t\t\"secure,select,self,setInterval,setTimeout,status,submit,taint,text,textarea,top,unescape\",\r\n\t\t\"untaint,window\",\r\n\r\n\t\t// window events\r\n\t\t\"onblur,onclick,onerror,onfocus,onkeydown,onkeypress,onkeyup,onmouseover,onload,onmouseup,onmousedown,onsubmit\"\r\n\t]\r\n\t\t.join(\",\")\r\n\t\t.split(\",\")\r\n);\r\n\r\nconst createComparator = (property, comparator) => (a, b) =>\r\n\tcomparator(a[property], b[property]);\r\nconst compareNumbers = (a, b) => {\r\n\tif (isNaN(a)) {\r\n\t\tif (!isNaN(b)) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t} else {\r\n\t\tif (isNaN(b)) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (a !== b) {\r\n\t\t\treturn a < b ? -1 : 1;\r\n\t\t}\r\n\t}\r\n\treturn 0;\r\n};\r\nconst bySourceOrder = createComparator(\"sourceOrder\", compareNumbers);\r\nconst byRangeStart = createComparator(\"rangeStart\", compareNumbers);\r\n\r\nconst joinIterableWithComma = iterable => {\r\n\t// This is more performant than Array.from().join(\", \")\r\n\t// as it doesn't create an array\r\n\tlet str = \"\";\r\n\tlet first = true;\r\n\tfor (const item of iterable) {\r\n\t\tif (first) {\r\n\t\t\tfirst = false;\r\n\t\t} else {\r\n\t\t\tstr += \", \";\r\n\t\t}\r\n\t\tstr += item;\r\n\t}\r\n\treturn str;\r\n};\r\n\r\n/**\r\n * @typedef {Object} ConcatenationEntry\r\n * @property {\"concatenated\" | \"external\"} type\r\n * @property {Module} module\r\n * @property {RuntimeSpec | boolean} runtimeCondition\r\n */\r\n\r\n/**\r\n * @param {ModuleGraph} moduleGraph the module graph\r\n * @param {ModuleInfo} info module info\r\n * @param {string[]} exportName exportName\r\n * @param {Map<Module, ModuleInfo>} moduleToInfoMap moduleToInfoMap\r\n * @param {RuntimeSpec} runtime for which runtime\r\n * @param {RequestShortener} requestShortener the request shortener\r\n * @param {RuntimeTemplate} runtimeTemplate the runtime template\r\n * @param {Set<ConcatenatedModuleInfo>} neededNamespaceObjects modules for which a namespace object should be generated\r\n * @param {boolean} asCall asCall\r\n * @param {boolean} strictHarmonyModule strictHarmonyModule\r\n * @param {boolean | undefined} asiSafe asiSafe\r\n * @param {Set<ExportInfo>} alreadyVisited alreadyVisited\r\n * @returns {Binding} the final variable\r\n */\r\nconst getFinalBinding = (\r\n\tmoduleGraph,\r\n\tinfo,\r\n\texportName,\r\n\tmoduleToInfoMap,\r\n\truntime,\r\n\trequestShortener,\r\n\truntimeTemplate,\r\n\tneededNamespaceObjects,\r\n\tasCall,\r\n\tstrictHarmonyModule,\r\n\tasiSafe,\r\n\talreadyVisited = new Set()\r\n) => {\r\n\tconst exportsType = info.module.getExportsType(\r\n\t\tmoduleGraph,\r\n\t\tstrictHarmonyModule\r\n\t);\r\n\tif (exportName.length === 0) {\r\n\t\tswitch (exportsType) {\r\n\t\t\tcase \"default-only\":\r\n\t\t\t\tinfo.interopNamespaceObject2Used = true;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinfo,\r\n\t\t\t\t\trawName: info.interopNamespaceObject2Name,\r\n\t\t\t\t\tids: exportName,\r\n\t\t\t\t\texportName\r\n\t\t\t\t};\r\n\t\t\tcase \"default-with-named\":\r\n\t\t\t\tinfo.interopNamespaceObjectUsed = true;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinfo,\r\n\t\t\t\t\trawName: info.interopNamespaceObjectName,\r\n\t\t\t\t\tids: exportName,\r\n\t\t\t\t\texportName\r\n\t\t\t\t};\r\n\t\t\tcase \"namespace\":\r\n\t\t\tcase \"dynamic\":\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Unexpected exportsType ${exportsType}`);\r\n\t\t}\r\n\t} else {\r\n\t\tswitch (exportsType) {\r\n\t\t\tcase \"namespace\":\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"default-with-named\":\r\n\t\t\t\tswitch (exportName[0]) {\r\n\t\t\t\t\tcase \"default\":\r\n\t\t\t\t\t\texportName = exportName.slice(1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"__esModule\":\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tinfo,\r\n\t\t\t\t\t\t\trawName: \"/* __esModule */true\",\r\n\t\t\t\t\t\t\tids: exportName.slice(1),\r\n\t\t\t\t\t\t\texportName\r\n\t\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"default-only\": {\r\n\t\t\t\tconst exportId = exportName[0];\r\n\t\t\t\tif (exportId === \"__esModule\") {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tinfo,\r\n\t\t\t\t\t\trawName: \"/* __esModule */true\",\r\n\t\t\t\t\t\tids: exportName.slice(1),\r\n\t\t\t\t\t\texportName\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\texportName = exportName.slice(1);\r\n\t\t\t\tif (exportId !== \"default\") {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tinfo,\r\n\t\t\t\t\t\trawName:\r\n\t\t\t\t\t\t\t\"/* non-default import from default-exporting module */undefined\",\r\n\t\t\t\t\t\tids: exportName,\r\n\t\t\t\t\t\texportName\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"dynamic\":\r\n\t\t\t\tswitch (exportName[0]) {\r\n\t\t\t\t\tcase \"default\": {\r\n\t\t\t\t\t\texportName = exportName.slice(1);\r\n\t\t\t\t\t\tinfo.interopDefaultAccessUsed = true;\r\n\t\t\t\t\t\tconst defaultExport = asCall\r\n\t\t\t\t\t\t\t? `${info.interopDefaultAccessName}()`\r\n\t\t\t\t\t\t\t: asiSafe\r\n\t\t\t\t\t\t\t? `(${info.interopDefaultAccessName}())`\r\n\t\t\t\t\t\t\t: asiSafe === false\r\n\t\t\t\t\t\t\t? `;(${info.interopDefaultAccessName}())`\r\n\t\t\t\t\t\t\t: `${info.interopDefaultAccessName}.a`;\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tinfo,\r\n\t\t\t\t\t\t\trawName: defaultExport,\r\n\t\t\t\t\t\t\tids: exportName,\r\n\t\t\t\t\t\t\texportName\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase \"__esModule\":\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tinfo,\r\n\t\t\t\t\t\t\trawName: \"/* __esModule */true\",\r\n\t\t\t\t\t\t\tids: exportName.slice(1),\r\n\t\t\t\t\t\t\texportName\r\n\t\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Unexpected exportsType ${exportsType}`);\r\n\t\t}\r\n\t}\r\n\tif (exportName.length === 0) {\r\n\t\tswitch (info.type) {\r\n\t\t\tcase \"concatenated\":\r\n\t\t\t\tneededNamespaceObjects.add(info);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinfo,\r\n\t\t\t\t\trawName: info.namespaceObjectName,\r\n\t\t\t\t\tids: exportName,\r\n\t\t\t\t\texportName\r\n\t\t\t\t};\r\n\t\t\tcase \"external\":\r\n\t\t\t\treturn { info, rawName: info.name, ids: exportName, exportName };\r\n\t\t}\r\n\t}\r\n\tconst exportsInfo = moduleGraph.getExportsInfo(info.module);\r\n\tconst exportInfo = exportsInfo.getExportInfo(exportName[0]);\r\n\tif (alreadyVisited.has(exportInfo)) {\r\n\t\treturn {\r\n\t\t\tinfo,\r\n\t\t\trawName: \"/* circular reexport */ Object(function x() { x() }())\",\r\n\t\t\tids: [],\r\n\t\t\texportName\r\n\t\t};\r\n\t}\r\n\talreadyVisited.add(exportInfo);\r\n\tswitch (info.type) {\r\n\t\tcase \"concatenated\": {\r\n\t\t\tconst exportId = exportName[0];\r\n\t\t\tif (exportInfo.provided === false) {\r\n\t\t\t\t// It's not provided, but it could be on the prototype\r\n\t\t\t\tneededNamespaceObjects.add(info);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinfo,\r\n\t\t\t\t\trawName: info.namespaceObjectName,\r\n\t\t\t\t\tids: exportName,\r\n\t\t\t\t\texportName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst directExport = info.exportMap && info.exportMap.get(exportId);\r\n\t\t\tif (directExport) {\r\n\t\t\t\tconst usedName = /** @type {string[]} */ (\r\n\t\t\t\t\texportsInfo.getUsedName(exportName, runtime)\r\n\t\t\t\t);\r\n\t\t\t\tif (!usedName) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tinfo,\r\n\t\t\t\t\t\trawName: \"/* unused export */ undefined\",\r\n\t\t\t\t\t\tids: exportName.slice(1),\r\n\t\t\t\t\t\texportName\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinfo,\r\n\t\t\t\t\tname: directExport,\r\n\t\t\t\t\tids: usedName.slice(1),\r\n\t\t\t\t\texportName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst rawExport = info.rawExportMap && info.rawExportMap.get(exportId);\r\n\t\t\tif (rawExport) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinfo,\r\n\t\t\t\t\trawName: rawExport,\r\n\t\t\t\t\tids: exportName.slice(1),\r\n\t\t\t\t\texportName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst reexport = exportInfo.findTarget(moduleGraph, module =>\r\n\t\t\t\tmoduleToInfoMap.has(module)\r\n\t\t\t);\r\n\t\t\tif (reexport === false) {\r\n\t\t\t\tthrow new Error(\r\n\t\t\t\t\t`Target module of reexport from '${info.module.readableIdentifier(\r\n\t\t\t\t\t\trequestShortener\r\n\t\t\t\t\t)}' is not part of the concatenation (export '${exportId}')\\nModules in the concatenation:\\n${Array.from(\r\n\t\t\t\t\t\tmoduleToInfoMap,\r\n\t\t\t\t\t\t([m, info]) =>\r\n\t\t\t\t\t\t\t` * ${info.type} ${m.readableIdentifier(requestShortener)}`\r\n\t\t\t\t\t).join(\"\\n\")}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (reexport) {\r\n\t\t\t\tconst refInfo = moduleToInfoMap.get(reexport.module);\r\n\t\t\t\treturn getFinalBinding(\r\n\t\t\t\t\tmoduleGraph,\r\n\t\t\t\t\trefInfo,\r\n\t\t\t\t\treexport.export\r\n\t\t\t\t\t\t? [...reexport.export, ...exportName.slice(1)]\r\n\t\t\t\t\t\t: exportName.slice(1),\r\n\t\t\t\t\tmoduleToInfoMap,\r\n\t\t\t\t\truntime,\r\n\t\t\t\t\trequestShortener,\r\n\t\t\t\t\truntimeTemplate,\r\n\t\t\t\t\tneededNamespaceObjects,\r\n\t\t\t\t\tasCall,\r\n\t\t\t\t\tinfo.module.buildMeta.strictHarmonyModule,\r\n\t\t\t\t\tasiSafe,\r\n\t\t\t\t\talreadyVisited\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (info.namespaceExportSymbol) {\r\n\t\t\t\tconst usedName = /** @type {string[]} */ (\r\n\t\t\t\t\texportsInfo.getUsedName(exportName, runtime)\r\n\t\t\t\t);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinfo,\r\n\t\t\t\t\trawName: info.namespaceObjectName,\r\n\t\t\t\t\tids: usedName,\r\n\t\t\t\t\texportName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tthrow new Error(\r\n\t\t\t\t`Cannot get final name for export '${exportName.join(\r\n\t\t\t\t\t\".\"\r\n\t\t\t\t)}' of ${info.module.readableIdentifier(requestShortener)}`\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tcase \"external\": {\r\n\t\t\tconst used = /** @type {string[]} */ (\r\n\t\t\t\texportsInfo.getUsedName(exportName, runtime)\r\n\t\t\t);\r\n\t\t\tif (!used) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinfo,\r\n\t\t\t\t\trawName: \"/* unused export */ undefined\",\r\n\t\t\t\t\tids: exportName.slice(1),\r\n\t\t\t\t\texportName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst comment = equals(used, exportName)\r\n\t\t\t\t? \"\"\r\n\t\t\t\t: Template.toNormalComment(`${exportName.join(\".\")}`);\r\n\t\t\treturn { info, rawName: info.name + comment, ids: used, exportName };\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @param {ModuleGraph} moduleGraph the module graph\r\n * @param {ModuleInfo} info module info\r\n * @param {string[]} exportName exportName\r\n * @param {Map<Module, ModuleInfo>} moduleToInfoMap moduleToInfoMap\r\n * @param {RuntimeSpec} runtime for which runtime\r\n * @param {RequestShortener} requestShortener the request shortener\r\n * @param {RuntimeTemplate} runtimeTemplate the runtime template\r\n * @param {Set<ConcatenatedModuleInfo>} neededNamespaceObjects modules for which a namespace object should be generated\r\n * @param {boolean} asCall asCall\r\n * @param {boolean} callContext callContext\r\n * @param {boolean} strictHarmonyModule strictHarmonyModule\r\n * @param {boolean | undefined} asiSafe asiSafe\r\n * @returns {string} the final name\r\n */\r\nconst getFinalName = (\r\n\tmoduleGraph,\r\n\tinfo,\r\n\texportName,\r\n\tmoduleToInfoMap,\r\n\truntime,\r\n\trequestShortener,\r\n\truntimeTemplate,\r\n\tneededNamespaceObjects,\r\n\tasCall,\r\n\tcallContext,\r\n\tstrictHarmonyModule,\r\n\tasiSafe\r\n) => {\r\n\tconst binding = getFinalBinding(\r\n\t\tmoduleGraph,\r\n\t\tinfo,\r\n\t\texportName,\r\n\t\tmoduleToInfoMap,\r\n\t\truntime,\r\n\t\trequestShortener,\r\n\t\truntimeTemplate,\r\n\t\tneededNamespaceObjects,\r\n\t\tasCall,\r\n\t\tstrictHarmonyModule,\r\n\t\tasiSafe\r\n\t);\r\n\t{\r\n\t\tconst { ids, comment } = binding;\r\n\t\tlet reference;\r\n\t\tlet isPropertyAccess;\r\n\t\tif (\"rawName\" in binding) {\r\n\t\t\treference = `${binding.rawName}${comment || \"\"}${propertyAccess(ids)}`;\r\n\t\t\tisPropertyAccess = ids.length > 0;\r\n\t\t} else {\r\n\t\t\tconst { info, name: exportId } = binding;\r\n\t\t\tconst name = info.internalNames.get(exportId);\r\n\t\t\tif (!name) {\r\n\t\t\t\tthrow new Error(\r\n\t\t\t\t\t`The export \"${exportId}\" in \"${info.module.readableIdentifier(\r\n\t\t\t\t\t\trequestShortener\r\n\t\t\t\t\t)}\" has no internal name (existing names: ${\r\n\t\t\t\t\t\tArray.from(\r\n\t\t\t\t\t\t\tinfo.internalNames,\r\n\t\t\t\t\t\t\t([name, symbol]) => `${name}: ${symbol}`\r\n\t\t\t\t\t\t).join(\", \") || \"none\"\r\n\t\t\t\t\t})`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treference = `${name}${comment || \"\"}${propertyAccess(ids)}`;\r\n\t\t\tisPropertyAccess = ids.length > 1;\r\n\t\t}\r\n\t\tif (isPropertyAccess && asCall && callContext === false) {\r\n\t\t\treturn asiSafe\r\n\t\t\t\t? `(0,${reference})`\r\n\t\t\t\t: asiSafe === false\r\n\t\t\t\t? `;(0,${reference})`\r\n\t\t\t\t: `/*#__PURE__*/Object(${reference})`;\r\n\t\t}\r\n\t\treturn reference;\r\n\t}\r\n};\r\n\r\nconst addScopeSymbols = (s, nameSet, scopeSet1, scopeSet2) => {\r\n\tlet scope = s;\r\n\twhile (scope) {\r\n\t\tif (scopeSet1.has(scope)) break;\r\n\t\tif (scopeSet2.has(scope)) break;\r\n\t\tscopeSet1.add(scope);\r\n\t\tfor (const variable of scope.variables) {\r\n\t\t\tnameSet.add(variable.name);\r\n\t\t}\r\n\t\tscope = scope.upper;\r\n\t}\r\n};\r\n\r\nconst getAllReferences = variable => {\r\n\tlet set = variable.references;\r\n\t// Look for inner scope variables too (like in class Foo { t() { Foo } })\r\n\tconst identifiers = new Set(variable.identifiers);\r\n\tfor (const scope of variable.scope.childScopes) {\r\n\t\tfor (const innerVar of scope.variables) {\r\n\t\t\tif (innerVar.identifiers.some(id => identifiers.has(id))) {\r\n\t\t\t\tset = set.concat(innerVar.references);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn set;\r\n};\r\n\r\nconst getPathInAst = (ast, node) => {\r\n\tif (ast === node) {\r\n\t\treturn [];\r\n\t}\r\n\r\n\tconst nr = node.range;\r\n\r\n\tconst enterNode = n => {\r\n\t\tif (!n) return undefined;\r\n\t\tconst r = n.range;\r\n\t\tif (r) {\r\n\t\t\tif (r[0] <= nr[0] && r[1] >= nr[1]) {\r\n\t\t\t\tconst path = getPathInAst(n, node);\r\n\t\t\t\tif (path) {\r\n\t\t\t\t\tpath.push(n);\r\n\t\t\t\t\treturn path;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t};\r\n\r\n\tif (Array.isArray(ast)) {\r\n\t\tfor (let i = 0; i < ast.length; i++) {\r\n\t\t\tconst enterResult = enterNode(ast[i]);\r\n\t\t\tif (enterResult !== undefined) return enterResult;\r\n\t\t}\r\n\t} else if (ast && typeof ast === \"object\") {\r\n\t\tconst keys = Object.keys(ast);\r\n\t\tfor (let i = 0; i < keys.length; i++) {\r\n\t\t\tconst value = ast[keys[i]];\r\n\t\t\tif (Array.isArray(value)) {\r\n\t\t\t\tconst pathResult = getPathInAst(value, node);\r\n\t\t\t\tif (pathResult !== undefined) return pathResult;\r\n\t\t\t} else if (value && typeof value === \"object\") {\r\n\t\t\t\tconst enterResult = enterNode(value);\r\n\t\t\t\tif (enterResult !== undefined) return enterResult;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst TYPES = new Set([\"javascript\"]);\r\n\r\nclass ConcatenatedModule extends Module {\r\n\t/**\r\n\t * @param {Module} rootModule the root module of the concatenation\r\n\t * @param {Set<Module>} modules all modules in the concatenation (including the root module)\r\n\t * @param {RuntimeSpec} runtime the runtime\r\n\t * @param {Object=} associatedObjectForCache object for caching\r\n\t * @param {string | HashConstructor=} hashFunction hash function to use\r\n\t * @returns {ConcatenatedModule} the module\r\n\t */\r\n\tstatic create(\r\n\t\trootModule,\r\n\t\tmodules,\r\n\t\truntime,\r\n\t\tassociatedObjectForCache,\r\n\t\thashFunction = \"md4\"\r\n\t) {\r\n\t\tconst identifier = ConcatenatedModule._createIdentifier(\r\n\t\t\trootModule,\r\n\t\t\tmodules,\r\n\t\t\tassociatedObjectForCache,\r\n\t\t\thashFunction\r\n\t\t);\r\n\t\treturn new ConcatenatedModule({\r\n\t\t\tidentifier,\r\n\t\t\trootModule,\r\n\t\t\tmodules,\r\n\t\t\truntime\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Object} options options\r\n\t * @param {string} options.identifier the identifier of the module\r\n\t * @param {Module=} options.rootModule the root module of the concatenation\r\n\t * @param {RuntimeSpec} options.runtime the selected runtime\r\n\t * @param {Set<Module>=} options.modules all concatenated modules\r\n\t */\r\n\tconstructor({ identifier, rootModule, modules, runtime }) {\r\n\t\tsuper(\"javascript/esm\", null, rootModule && rootModule.layer);\r\n\r\n\t\t// Info from Factory\r\n\t\t/** @type {string} */\r\n\t\tthis._identifier = identifier;\r\n\t\t/** @type {Module} */\r\n\t\tthis.rootModule = rootModule;\r\n\t\t/** @type {Set<Module>} */\r\n\t\tthis._modules = modules;\r\n\t\tthis._runtime = runtime;\r\n\t\tthis.factoryMeta = rootModule && rootModule.factoryMeta;\r\n\t}\r\n\r\n\t/**\r\n\t * Assuming this module is in the cache. Update the (cached) module with\r\n\t * the fresh module from the factory. Usually updates internal references\r\n\t * and properties.\r\n\t * @param {Module} module fresh module\r\n\t * @returns {void}\r\n\t */\r\n\tupdateCacheModule(module) {\r\n\t\tthrow new Error(\"Must not be called\");\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Set<string>} types available (do not mutate)\r\n\t */\r\n\tgetSourceTypes() {\r\n\t\treturn TYPES;\r\n\t}\r\n\r\n\tget modules() {\r\n\t\treturn Array.from(this._modules);\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {string} a unique identifier of the module\r\n\t */\r\n\tidentifier() {\r\n\t\treturn this._identifier;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {RequestShortener} requestShortener the request shortener\r\n\t * @returns {string} a user readable identifier of the module\r\n\t */\r\n\treadableIdentifier(requestShortener) {\r\n\t\treturn (\r\n\t\t\tthis.rootModule.readableIdentifier(requestShortener) +\r\n\t\t\t` + ${this._modules.size - 1} modules`\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {LibIdentOptions} options options\r\n\t * @returns {string | null} an identifier for library inclusion\r\n\t */\r\n\tlibIdent(options) {\r\n\t\treturn this.rootModule.libIdent(options);\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {string | null} absolute path which should be used for condition matching (usually the resource path)\r\n\t */\r\n\tnameForCondition() {\r\n\t\treturn this.rootModule.nameForCondition();\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ModuleGraph} moduleGraph the module graph\r\n\t * @returns {ConnectionState} how this module should be connected to referencing modules when consumed for side-effects only\r\n\t */\r\n\tgetSideEffectsConnectionState(moduleGraph) {\r\n\t\treturn this.rootModule.getSideEffectsConnectionState(moduleGraph);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {WebpackOptions} options webpack options\r\n\t * @param {Compilation} compilation the compilation\r\n\t * @param {ResolverWithOptions} resolver the resolver\r\n\t * @param {InputFileSystem} fs the file system\r\n\t * @param {function(WebpackError=): void} callback callback function\r\n\t * @returns {void}\r\n\t */\r\n\tbuild(options, compilation, resolver, fs, callback) {\r\n\t\tconst { rootModule } = this;\r\n\t\tthis.buildInfo = {\r\n\t\t\tstrict: true,\r\n\t\t\tcacheable: true,\r\n\t\t\tmoduleArgument: rootModule.buildInfo.moduleArgument,\r\n\t\t\texportsArgument: rootModule.buildInfo.exportsArgument,\r\n\t\t\tfileDependencies: new LazySet(),\r\n\t\t\tcontextDependencies: new LazySet(),\r\n\t\t\tmissingDependencies: new LazySet(),\r\n\t\t\ttopLevelDeclarations: new Set(),\r\n\t\t\tassets: undefined\r\n\t\t};\r\n\t\tthis.buildMeta = rootModule.buildMeta;\r\n\t\tthis.clearDependenciesAndBlocks();\r\n\t\tthis.clearWarningsAndErrors();\r\n\r\n\t\tfor (const m of this._modules) {\r\n\t\t\t// populate cacheable\r\n\t\t\tif (!m.buildInfo.cacheable) {\r\n\t\t\t\tthis.buildInfo.cacheable = false;\r\n\t\t\t}\r\n\r\n\t\t\t// populate dependencies\r\n\t\t\tfor (const d of m.dependencies.filter(\r\n\t\t\t\tdep =>\r\n\t\t\t\t\t!(dep instanceof HarmonyImportDependency) ||\r\n\t\t\t\t\t!this._modules.has(compilation.moduleGraph.getModule(dep))\r\n\t\t\t)) {\r\n\t\t\t\tthis.dependencies.push(d);\r\n\t\t\t}\r\n\t\t\t// populate blocks\r\n\t\t\tfor (const d of m.blocks) {\r\n\t\t\t\tthis.blocks.push(d);\r\n\t\t\t}\r\n\r\n\t\t\t// populate warnings\r\n\t\t\tconst warnings = m.getWarnings();\r\n\t\t\tif (warnings !== undefined) {\r\n\t\t\t\tfor (const warning of warnings) {\r\n\t\t\t\t\tthis.addWarning(warning);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// populate errors\r\n\t\t\tconst errors = m.getErrors();\r\n\t\t\tif (errors !== undefined) {\r\n\t\t\t\tfor (const error of errors) {\r\n\t\t\t\t\tthis.addError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// populate topLevelDeclarations\r\n\t\t\tif (m.buildInfo.topLevelDeclarations) {\r\n\t\t\t\tconst topLevelDeclarations = this.buildInfo.topLevelDeclarations;\r\n\t\t\t\tif (topLevelDeclarations !== undefined) {\r\n\t\t\t\t\tfor (const decl of m.buildInfo.topLevelDeclarations) {\r\n\t\t\t\t\t\ttopLevelDeclarations.add(decl);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.buildInfo.topLevelDeclarations = undefined;\r\n\t\t\t}\r\n\r\n\t\t\t// populate assets\r\n\t\t\tif (m.buildInfo.assets) {\r\n\t\t\t\tif (this.buildInfo.assets === undefined) {\r\n\t\t\t\t\tthis.buildInfo.assets = Object.create(null);\r\n\t\t\t\t}\r\n\t\t\t\tObject.assign(this.buildInfo.assets, m.buildInfo.assets);\r\n\t\t\t}\r\n\t\t\tif (m.buildInfo.assetsInfo) {\r\n\t\t\t\tif (this.buildInfo.assetsInfo === undefined) {\r\n\t\t\t\t\tthis.buildInfo.assetsInfo = new Map();\r\n\t\t\t\t}\r\n\t\t\t\tfor (const [key, value] of m.buildInfo.assetsInfo) {\r\n\t\t\t\t\tthis.buildInfo.assetsInfo.set(key, value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcallback();\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string=} type the source type for which the size should be estimated\r\n\t * @returns {number} the estimated size of the module (must be non-zero)\r\n\t */\r\n\tsize(type) {\r\n\t\t// Guess size from embedded modules\r\n\t\tlet size = 0;\r\n\t\tfor (const module of this._modules) {\r\n\t\t\tsize += module.size(type);\r\n\t\t}\r\n\t\treturn size;\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * @param {Module} rootModule the root of the concatenation\r\n\t * @param {Set<Module>} modulesSet a set of modules which should be concatenated\r\n\t * @param {RuntimeSpec} runtime for this runtime\r\n\t * @param {ModuleGraph} moduleGraph the module graph\r\n\t * @returns {ConcatenationEntry[]} concatenation list\r\n\t */\r\n\t_createConcatenationList(rootModule, modulesSet, runtime, moduleGraph) {\r\n\t\t/** @type {ConcatenationEntry[]} */\r\n\t\tconst list = [];\r\n\t\t/** @type {Map<Module, RuntimeSpec | true>} */\r\n\t\tconst existingEntries = new Map();\r\n\r\n\t\t/**\r\n\t\t * @param {Module} module a module\r\n\t\t * @returns {Iterable<{ connection: ModuleGraphConnection, runtimeCondition: RuntimeSpec | true }>} imported modules in order\r\n\t\t */\r\n\t\tconst getConcatenatedImports = module => {\r\n\t\t\tlet connections = Array.from(moduleGraph.getOutgoingConnections(module));\r\n\t\t\tif (module === rootModule) {\r\n\t\t\t\tfor (const c of moduleGraph.getOutgoingConnections(this))\r\n\t\t\t\t\tconnections.push(c);\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * @type {Array<{ connection: ModuleGraphConnection, sourceOrder: number, rangeStart: number }>}\r\n\t\t\t */\r\n\t\t\tconst references = connections\r\n\t\t\t\t.filter(connection => {\r\n\t\t\t\t\tif (!(connection.dependency instanceof HarmonyImportDependency))\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tconnection &&\r\n\t\t\t\t\t\tconnection.resolvedOriginModule === module &&\r\n\t\t\t\t\t\tconnection.module &&\r\n\t\t\t\t\t\tconnection.isTargetActive(runtime)\r\n\t\t\t\t\t);\r\n\t\t\t\t})\r\n\t\t\t\t.map(connection => {\r\n\t\t\t\t\tconst dep = /** @type {HarmonyImportDependency} */ (\r\n\t\t\t\t\t\tconnection.dependency\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tconnection,\r\n\t\t\t\t\t\tsourceOrder: dep.sourceOrder,\r\n\t\t\t\t\t\trangeStart: dep.range && dep.range[0]\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t/**\r\n\t\t\t * bySourceOrder\r\n\t\t\t * @example\r\n\t\t\t * import a from \"a\"; // sourceOrder=1\r\n\t\t\t * import b from \"b\"; // sourceOrder=2\r\n\t\t\t *\r\n\t\t\t * byRangeStart\r\n\t\t\t * @example\r\n\t\t\t * import {a, b} from \"a\"; // sourceOrder=1\r\n\t\t\t * a.a(); // first range\r\n\t\t\t * b.b(); // second range\r\n\t\t\t *\r\n\t\t\t * If there is no reexport, we have the same source.\r\n\t\t\t * If there is reexport, but module has side effects, this will lead to reexport module only.\r\n\t\t\t * If there is side-effects-free reexport, we can get simple deterministic result with range start comparison.\r\n\t\t\t */\r\n\t\t\treferences.sort(concatComparators(bySourceOrder, byRangeStart));\r\n\t\t\t/** @type {Map<Module, { connection: ModuleGraphConnection, runtimeCondition: RuntimeSpec | true }>} */\r\n\t\t\tconst referencesMap = new Map();\r\n\t\t\tfor (const { connection } of references) {\r\n\t\t\t\tconst runtimeCondition = filterRuntime(runtime, r =>\r\n\t\t\t\t\tconnection.isTargetActive(r)\r\n\t\t\t\t);\r\n\t\t\t\tif (runtimeCondition === false) continue;\r\n\t\t\t\tconst module = connection.module;\r\n\t\t\t\tconst entry = referencesMap.get(module);\r\n\t\t\t\tif (entry === undefined) {\r\n\t\t\t\t\treferencesMap.set(module, { connection, runtimeCondition });\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tentry.runtimeCondition = mergeRuntimeConditionNonFalse(\r\n\t\t\t\t\tentry.runtimeCondition,\r\n\t\t\t\t\truntimeCondition,\r\n\t\t\t\t\truntime\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn referencesMap.values();\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @param {ModuleGraphConnection} connection graph connection\r\n\t\t * @param {RuntimeSpec | true} runtimeCondition runtime condition\r\n\t\t * @returns {void}\r\n\t\t */\r\n\t\tconst enterModule = (connection, runtimeCondition) => {\r\n\t\t\tconst module = connection.module;\r\n\t\t\tif (!module) return;\r\n\t\t\tconst existingEntry = existingEntries.get(module);\r\n\t\t\tif (existingEntry === true) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (modulesSet.has(module)) {\r\n\t\t\t\texistingEntries.set(module, true);\r\n\t\t\t\tif (runtimeCondition !== true) {\r\n\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t`Cannot runtime-conditional concatenate a module (${module.identifier()} in ${this.rootModule.identifier()}, ${runtimeConditionToString(\r\n\t\t\t\t\t\t\truntimeCondition\r\n\t\t\t\t\t\t)}). This should not happen.`\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tconst imports = getConcatenatedImports(module);\r\n\t\t\t\tfor (const { connection, runtimeCondition } of imports)\r\n\t\t\t\t\tenterModule(connection, runtimeCondition);\r\n\t\t\t\tlist.push({\r\n\t\t\t\t\ttype: \"concatenated\",\r\n\t\t\t\t\tmodule: connection.module,\r\n\t\t\t\t\truntimeCondition\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (existingEntry !== undefined) {\r\n\t\t\t\t\tconst reducedRuntimeCondition = subtractRuntimeCondition(\r\n\t\t\t\t\t\truntimeCondition,\r\n\t\t\t\t\t\texistingEntry,\r\n\t\t\t\t\t\truntime\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (reducedRuntimeCondition === false) return;\r\n\t\t\t\t\truntimeCondition = reducedRuntimeCondition;\r\n\t\t\t\t\texistingEntries.set(\r\n\t\t\t\t\t\tconnection.module,\r\n\t\t\t\t\t\tmergeRuntimeConditionNonFalse(\r\n\t\t\t\t\t\t\texistingEntry,\r\n\t\t\t\t\t\t\truntimeCondition,\r\n\t\t\t\t\t\t\truntime\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\texistingEntries.set(connection.module, runtimeCondition);\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length > 0) {\r\n\t\t\t\t\tconst lastItem = list[list.length - 1];\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tlastItem.type === \"external\" &&\r\n\t\t\t\t\t\tlastItem.module === connection.module\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tlastItem.runtimeCondition = mergeRuntimeCondition(\r\n\t\t\t\t\t\t\tlastItem.runtimeCondition,\r\n\t\t\t\t\t\t\truntimeCondition,\r\n\t\t\t\t\t\t\truntime\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlist.push({\r\n\t\t\t\t\ttype: \"external\",\r\n\t\t\t\t\tget module() {\r\n\t\t\t\t\t\t// We need to use a getter here, because the module in the dependency\r\n\t\t\t\t\t\t// could be replaced by some other process (i. e. also replaced with a\r\n\t\t\t\t\t\t// concatenated module)\r\n\t\t\t\t\t\treturn connection.module;\r\n\t\t\t\t\t},\r\n\t\t\t\t\truntimeCondition\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\texistingEntries.set(rootModule, true);\r\n\t\tconst imports = getConcatenatedImports(rootModule);\r\n\t\tfor (const { connection, runtimeCondition } of imports)\r\n\t\t\tenterModule(connection, runtimeCondition);\r\n\t\tlist.push({\r\n\t\t\ttype: \"concatenated\",\r\n\t\t\tmodule: rootModule,\r\n\t\t\truntimeCondition: true\r\n\t\t});\r\n\r\n\t\treturn list;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Module} rootModule the root module of the concatenation\r\n\t * @param {Set<Module>} modules all modules in the concatenation (including the root module)\r\n\t * @param {Object=} associatedObjectForCache object for caching\r\n\t * @param {string | HashConstructor=} hashFunction hash function to use\r\n\t * @returns {string} the identifier\r\n\t */\r\n\tstatic _createIdentifier(\r\n\t\trootModule,\r\n\t\tmodules,\r\n\t\tassociatedObjectForCache,\r\n\t\thashFunction = \"md4\"\r\n\t) {\r\n\t\tconst cachedMakePathsRelative = makePathsRelative.bindContextCache(\r\n\t\t\trootModule.context,\r\n\t\t\tassociatedObjectForCache\r\n\t\t);\r\n\t\tlet identifiers = [];\r\n\t\tfor (const module of modules) {\r\n\t\t\tidentifiers.push(cachedMakePathsRelative(module.identifier()));\r\n\t\t}\r\n\t\tidentifiers.sort();\r\n\t\tconst hash = createHash(hashFunction);\r\n\t\thash.update(identifiers.join(\" \"));\r\n\t\treturn rootModule.identifier() + \"|\" + hash.digest(\"hex\");\r\n\t}\r\n\r\n\t/**\r\n\t * @param {LazySet<string>} fileDependencies set where file dependencies are added to\r\n\t * @param {LazySet<string>} contextDependencies set where context dependencies are added to\r\n\t * @param {LazySet<string>} missingDependencies set where missing dependencies are added to\r\n\t * @param {LazySet<string>} buildDependencies set where build dependencies are added to\r\n\t */\r\n\taddCacheDependencies(\r\n\t\tfileDependencies,\r\n\t\tcontextDependencies,\r\n\t\tmissingDependencies,\r\n\t\tbuildDependencies\r\n\t) {\r\n\t\tfor (const module of this._modules) {\r\n\t\t\tmodule.addCacheDependencies(\r\n\t\t\t\tfileDependencies,\r\n\t\t\t\tcontextDependencies,\r\n\t\t\t\tmissingDependencies,\r\n\t\t\t\tbuildDependencies\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {CodeGenerationContext} context context for code generation\r\n\t * @returns {CodeGenerationResult} result\r\n\t */\r\n\tcodeGeneration({\r\n\t\tdependencyTemplates,\r\n\t\truntimeTemplate,\r\n\t\tmoduleGraph,\r\n\t\tchunkGraph,\r\n\t\truntime: generationRuntime,\r\n\t\tcodeGenerationResults\r\n\t}) {\r\n\t\t/** @type {Set<string>} */\r\n\t\tconst runtimeRequirements = new Set();\r\n\t\tconst runtime = intersectRuntime(generationRuntime, this._runtime);\r\n\r\n\t\tconst requestShortener = runtimeTemplate.requestShortener;\r\n\t\t// Meta info for each module\r\n\t\tconst [modulesWithInfo, moduleToInfoMap] = this._getModulesWithInfo(\r\n\t\t\tmoduleGraph,\r\n\t\t\truntime\r\n\t\t);\r\n\r\n\t\t// Set with modules that need a generated namespace object\r\n\t\t/** @type {Set<ConcatenatedModuleInfo>} */\r\n\t\tconst neededNamespaceObjects = new Set();\r\n\r\n\t\t// Generate source code and analyse scopes\r\n\t\t// Prepare a ReplaceSource for the final source\r\n\t\tfor (const info of moduleToInfoMap.values()) {\r\n\t\t\tthis._analyseModule(\r\n\t\t\t\tmoduleToInfoMap,\r\n\t\t\t\tinfo,\r\n\t\t\t\tdependencyTemplates,\r\n\t\t\t\truntimeTemplate,\r\n\t\t\t\tmoduleGraph,\r\n\t\t\t\tchunkGraph,\r\n\t\t\t\truntime,\r\n\t\t\t\tcodeGenerationResults\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// List of all used names to avoid conflicts\r\n\t\tconst allUsedNames = new Set(RESERVED_NAMES);\r\n\t\t// Updated Top level declarations are created by renaming\r\n\t\tconst topLevelDeclarations = new Set();\r\n\r\n\t\t// List of additional names in scope for module references\r\n\t\t/** @type {Map<string, { usedNames: Set<string>, alreadyCheckedScopes: Set<TODO> }>} */\r\n\t\tconst usedNamesInScopeInfo = new Map();\r\n\t\t/**\r\n\t\t * @param {string} module module identifier\r\n\t\t * @param {string} id export id\r\n\t\t * @returns {{ usedNames: Set<string>, alreadyCheckedScopes: Set<TODO> }} info\r\n\t\t */\r\n\t\tconst getUsedNamesInScopeInfo = (module, id) => {\r\n\t\t\tconst key = `${module}-${id}`;\r\n\t\t\tlet info = usedNamesInScopeInfo.get(key);\r\n\t\t\tif (info === undefined) {\r\n\t\t\t\tinfo = {\r\n\t\t\t\t\tusedNames: new Set(),\r\n\t\t\t\t\talreadyCheckedScopes: new Set()\r\n\t\t\t\t};\r\n\t\t\t\tusedNamesInScopeInfo.set(key, info);\r\n\t\t\t}\r\n\t\t\treturn info;\r\n\t\t};\r\n\r\n\t\t// Set of already checked scopes\r\n\t\tconst ignoredScopes = new Set();\r\n\r\n\t\t// get all global names\r\n\t\tfor (const info of modulesWithInfo) {\r\n\t\t\tif (info.type === \"concatenated\") {\r\n\t\t\t\t// ignore symbols from moduleScope\r\n\t\t\t\tif (info.moduleScope) {\r\n\t\t\t\t\tignoredScopes.add(info.moduleScope);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// The super class expression in class scopes behaves weird\r\n\t\t\t\t// We get ranges of all super class expressions to make\r\n\t\t\t\t// renaming to work correctly\r\n\t\t\t\tconst superClassCache = new WeakMap();\r\n\t\t\t\tconst getSuperClassExpressions = scope => {\r\n\t\t\t\t\tconst cacheEntry = superClassCache.get(scope);\r\n\t\t\t\t\tif (cacheEntry !== undefined) return cacheEntry;\r\n\t\t\t\t\tconst superClassExpressions = [];\r\n\t\t\t\t\tfor (const childScope of scope.childScopes) {\r\n\t\t\t\t\t\tif (childScope.type !== \"class\") continue;\r\n\t\t\t\t\t\tconst block = childScope.block;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(block.type === \"ClassDeclaration\" ||\r\n\t\t\t\t\t\t\t\tblock.type === \"ClassExpression\") &&\r\n\t\t\t\t\t\t\tblock.superClass\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tsuperClassExpressions.push({\r\n\t\t\t\t\t\t\t\trange: block.superClass.range,\r\n\t\t\t\t\t\t\t\tvariables: childScope.variables\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsuperClassCache.set(scope, superClassExpressions);\r\n\t\t\t\t\treturn superClassExpressions;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// add global symbols\r\n\t\t\t\tif (info.globalScope) {\r\n\t\t\t\t\tfor (const reference of info.globalScope.through) {\r\n\t\t\t\t\t\tconst name = reference.identifier.name;\r\n\t\t\t\t\t\tif (ConcatenationScope.isModuleReference(name)) {\r\n\t\t\t\t\t\t\tconst match = ConcatenationScope.matchModuleReference(name);\r\n\t\t\t\t\t\t\tif (!match) continue;\r\n\t\t\t\t\t\t\tconst referencedInfo = modulesWithInfo[match.index];\r\n\t\t\t\t\t\t\tif (referencedInfo.type === \"reference\")\r\n\t\t\t\t\t\t\t\tthrow new Error(\"Module reference can't point to a reference\");\r\n\t\t\t\t\t\t\tconst binding = getFinalBinding(\r\n\t\t\t\t\t\t\t\tmoduleGraph,\r\n\t\t\t\t\t\t\t\treferencedInfo,\r\n\t\t\t\t\t\t\t\tmatch.ids,\r\n\t\t\t\t\t\t\t\tmoduleToInfoMap,\r\n\t\t\t\t\t\t\t\truntime,\r\n\t\t\t\t\t\t\t\trequestShortener,\r\n\t\t\t\t\t\t\t\truntimeTemplate,\r\n\t\t\t\t\t\t\t\tneededNamespaceObjects,\r\n\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\tinfo.module.buildMeta.strictHarmonyModule,\r\n\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tif (!binding.ids) continue;\r\n\t\t\t\t\t\t\tconst { usedNames, alreadyCheckedScopes } =\r\n\t\t\t\t\t\t\t\tgetUsedNamesInScopeInfo(\r\n\t\t\t\t\t\t\t\t\tbinding.info.module.identifier(),\r\n\t\t\t\t\t\t\t\t\t\"name\" in binding ? binding.name : \"\"\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tfor (const expr of getSuperClassExpressions(reference.from)) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\texpr.range[0] <= reference.identifier.range[0] &&\r\n\t\t\t\t\t\t\t\t\texpr.range[1] >= reference.identifier.range[1]\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tfor (const variable of expr.variables) {\r\n\t\t\t\t\t\t\t\t\t\tusedNames.add(variable.name);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taddScopeSymbols(\r\n\t\t\t\t\t\t\t\treference.from,\r\n\t\t\t\t\t\t\t\tusedNames,\r\n\t\t\t\t\t\t\t\talreadyCheckedScopes,\r\n\t\t\t\t\t\t\t\tignoredScopes\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tallUsedNames.add(name);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// generate names for symbols\r\n\t\tfor (const info of moduleToInfoMap.values()) {\r\n\t\t\tconst { usedNames: namespaceObjectUsedNames } = getUsedNamesInScopeInfo(\r\n\t\t\t\tinfo.module.identifier(),\r\n\t\t\t\t\"\"\r\n\t\t\t);\r\n\t\t\tswitch (info.type) {\r\n\t\t\t\tcase \"concatenated\": {\r\n\t\t\t\t\tfor (const variable of info.moduleScope.variables) {\r\n\t\t\t\t\t\tconst name = variable.name;\r\n\t\t\t\t\t\tconst { usedNames, alreadyCheckedScopes } = getUsedNamesInScopeInfo(\r\n\t\t\t\t\t\t\tinfo.module.identifier(),\r\n\t\t\t\t\t\t\tname\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (allUsedNames.has(name) || usedNames.has(name)) {\r\n\t\t\t\t\t\t\tconst references = getAllReferences(variable);\r\n\t\t\t\t\t\t\tfor (const ref of references) {\r\n\t\t\t\t\t\t\t\taddScopeSymbols(\r\n\t\t\t\t\t\t\t\t\tref.from,\r\n\t\t\t\t\t\t\t\t\tusedNames,\r\n\t\t\t\t\t\t\t\t\talreadyCheckedScopes,\r\n\t\t\t\t\t\t\t\t\tignoredScopes\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst newName = this.findNewName(\r\n\t\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\t\tallUsedNames,\r\n\t\t\t\t\t\t\t\tusedNames,\r\n\t\t\t\t\t\t\t\tinfo.module.readableIdentifier(requestShortener)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tallUsedNames.add(newName);\r\n\t\t\t\t\t\t\tinfo.internalNames.set(name, newName);\r\n\t\t\t\t\t\t\ttopLevelDeclarations.add(newName);\r\n\t\t\t\t\t\t\tconst source = info.source;\r\n\t\t\t\t\t\t\tconst allIdentifiers = new Set(\r\n\t\t\t\t\t\t\t\treferences.map(r => r.identifier).concat(variable.identifiers)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tfor (const identifier of allIdentifiers) {\r\n\t\t\t\t\t\t\t\tconst r = identifier.range;\r\n\t\t\t\t\t\t\t\tconst path = getPathInAst(info.ast, identifier);\r\n\t\t\t\t\t\t\t\tif (path && path.length > 1) {\r\n\t\t\t\t\t\t\t\t\tconst maybeProperty =\r\n\t\t\t\t\t\t\t\t\t\tpath[1].type === \"AssignmentPattern\" &&\r\n\t\t\t\t\t\t\t\t\t\tpath[1].left === path[0]\r\n\t\t\t\t\t\t\t\t\t\t\t? path[2]\r\n\t\t\t\t\t\t\t\t\t\t\t: path[1];\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tmaybeProperty.type === \"Property\" &&\r\n\t\t\t\t\t\t\t\t\t\tmaybeProperty.shorthand\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\tsource.insert(r[1], `: ${newName}`);\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tsource.replace(r[0], r[1] - 1, newName);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tallUsedNames.add(name);\r\n\t\t\t\t\t\t\tinfo.internalNames.set(name, name);\r\n\t\t\t\t\t\t\ttopLevelDeclarations.add(name);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet namespaceObjectName;\r\n\t\t\t\t\tif (info.namespaceExportSymbol) {\r\n\t\t\t\t\t\tnamespaceObjectName = info.internalNames.get(\r\n\t\t\t\t\t\t\tinfo.namespaceExportSymbol\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnamespaceObjectName = this.findNewName(\r\n\t\t\t\t\t\t\t\"namespaceObject\",\r\n\t\t\t\t\t\t\tallUsedNames,\r\n\t\t\t\t\t\t\tnamespaceObjectUsedNames,\r\n\t\t\t\t\t\t\tinfo.module.readableIdentifier(requestShortener)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tallUsedNames.add(namespaceObjectName);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinfo.namespaceObjectName = namespaceObjectName;\r\n\t\t\t\t\ttopLevelDeclarations.add(namespaceObjectName);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"external\": {\r\n\t\t\t\t\tconst externalName = this.findNewName(\r\n\t\t\t\t\t\t\"\",\r\n\t\t\t\t\t\tallUsedNames,\r\n\t\t\t\t\t\tnamespaceObjectUsedNames,\r\n\t\t\t\t\t\tinfo.module.readableIdentifier(requestShortener)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tallUsedNames.add(externalName);\r\n\t\t\t\t\tinfo.name = externalName;\r\n\t\t\t\t\ttopLevelDeclarations.add(externalName);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (info.module.buildMeta.exportsType !== \"namespace\") {\r\n\t\t\t\tconst externalNameInterop = this.findNewName(\r\n\t\t\t\t\t\"namespaceObject\",\r\n\t\t\t\t\tallUsedNames,\r\n\t\t\t\t\tnamespaceObjectUsedNames,\r\n\t\t\t\t\tinfo.module.readableIdentifier(requestShortener)\r\n\t\t\t\t);\r\n\t\t\t\tallUsedNames.add(externalNameInterop);\r\n\t\t\t\tinfo.interopNamespaceObjectName = externalNameInterop;\r\n\t\t\t\ttopLevelDeclarations.add(externalNameInterop);\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tinfo.module.buildMeta.exportsType === \"default\" &&\r\n\t\t\t\tinfo.module.buildMeta.defaultObject !== \"redirect\"\r\n\t\t\t) {\r\n\t\t\t\tconst externalNameInterop = this.findNewName(\r\n\t\t\t\t\t\"namespaceObject2\",\r\n\t\t\t\t\tallUsedNames,\r\n\t\t\t\t\tnamespaceObjectUsedNames,\r\n\t\t\t\t\tinfo.module.readableIdentifier(requestShortener)\r\n\t\t\t\t);\r\n\t\t\t\tallUsedNames.add(externalNameInterop);\r\n\t\t\t\tinfo.interopNamespaceObject2Name = externalNameInterop;\r\n\t\t\t\ttopLevelDeclarations.add(externalNameInterop);\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tinfo.module.buildMeta.exportsType === \"dynamic\" ||\r\n\t\t\t\t!info.module.buildMeta.exportsType\r\n\t\t\t) {\r\n\t\t\t\tconst externalNameInterop = this.findNewName(\r\n\t\t\t\t\t\"default\",\r\n\t\t\t\t\tallUsedNames,\r\n\t\t\t\t\tnamespaceObjectUsedNames,\r\n\t\t\t\t\tinfo.module.readableIdentifier(requestShortener)\r\n\t\t\t\t);\r\n\t\t\t\tallUsedNames.add(externalNameInterop);\r\n\t\t\t\tinfo.interopDefaultAccessName = externalNameInterop;\r\n\t\t\t\ttopLevelDeclarations.add(externalNameInterop);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Find and replace references to modules\r\n\t\tfor (const info of moduleToInfoMap.values()) {\r\n\t\t\tif (info.type === \"concatenated\") {\r\n\t\t\t\tfor (const reference of info.globalScope.through) {\r\n\t\t\t\t\tconst name = reference.identifier.name;\r\n\t\t\t\t\tconst match = ConcatenationScope.matchModuleReference(name);\r\n\t\t\t\t\tif (match) {\r\n\t\t\t\t\t\tconst referencedInfo = modulesWithInfo[match.index];\r\n\t\t\t\t\t\tif (referencedInfo.type === \"reference\")\r\n\t\t\t\t\t\t\tthrow new Error(\"Module reference can't point to a reference\");\r\n\t\t\t\t\t\tconst finalName = getFinalName(\r\n\t\t\t\t\t\t\tmoduleGraph,\r\n\t\t\t\t\t\t\treferencedInfo,\r\n\t\t\t\t\t\t\tmatch.ids,\r\n\t\t\t\t\t\t\tmoduleToInfoMap,\r\n\t\t\t\t\t\t\truntime,\r\n\t\t\t\t\t\t\trequestShortener,\r\n\t\t\t\t\t\t\truntimeTemplate,\r\n\t\t\t\t\t\t\tneededNamespaceObjects,\r\n\t\t\t\t\t\t\tmatch.call,\r\n\t\t\t\t\t\t\t!match.directImport,\r\n\t\t\t\t\t\t\tinfo.module.buildMeta.strictHarmonyModule,\r\n\t\t\t\t\t\t\tmatch.asiSafe\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst r = reference.identifier.range;\r\n\t\t\t\t\t\tconst source = info.source;\r\n\t\t\t\t\t\t// range is extended by 2 chars to cover the appended \"._\"\r\n\t\t\t\t\t\tsource.replace(r[0], r[1] + 1, finalName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Map with all root exposed used exports\r\n\t\t/** @type {Map<string, function(RequestShortener): string>} */\r\n\t\tconst exportsMap = new Map();\r\n\r\n\t\t// Set with all root exposed unused exports\r\n\t\t/** @type {Set<string>} */\r\n\t\tconst unusedExports = new Set();\r\n\r\n\t\tconst rootInfo = /** @type {ConcatenatedModuleInfo} */ (\r\n\t\t\tmoduleToInfoMap.get(this.rootModule)\r\n\t\t);\r\n\t\tconst strictHarmonyModule = rootInfo.module.buildMeta.strictHarmonyModule;\r\n\t\tconst exportsInfo = moduleGraph.getExportsInfo(rootInfo.module);\r\n\t\tfor (const exportInfo of exportsInfo.orderedExports) {\r\n\t\t\tconst name = exportInfo.name;\r\n\t\t\tif (exportInfo.provided === false) continue;\r\n\t\t\tconst used = exportInfo.getUsedName(undefined, runtime);\r\n\t\t\tif (!used) {\r\n\t\t\t\tunusedExports.add(name);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\texportsMap.set(used, requestShortener => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst finalName = getFinalName(\r\n\t\t\t\t\t\tmoduleGraph,\r\n\t\t\t\t\t\trootInfo,\r\n\t\t\t\t\t\t[name],\r\n\t\t\t\t\t\tmoduleToInfoMap,\r\n\t\t\t\t\t\truntime,\r\n\t\t\t\t\t\trequestShortener,\r\n\t\t\t\t\t\truntimeTemplate,\r\n\t\t\t\t\t\tneededNamespaceObjects,\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\tstrictHarmonyModule,\r\n\t\t\t\t\t\ttrue\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn `/* ${\r\n\t\t\t\t\t\texportInfo.isReexport() ? \"reexport\" : \"binding\"\r\n\t\t\t\t\t} */ ${finalName}`;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\te.message += `\\nwhile generating the root export '${name}' (used name: '${used}')`;\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst result = new ConcatSource();\r\n\r\n\t\t// add harmony compatibility flag (must be first because of possible circular dependencies)\r\n\t\tif (\r\n\t\t\tmoduleGraph.getExportsInfo(this).otherExportsInfo.getUsed(runtime) !==\r\n\t\t\tUsageState.Unused\r\n\t\t) {\r\n\t\t\tresult.add(`// ESM COMPAT FLAG\\n`);\r\n\t\t\tresult.add(\r\n\t\t\t\truntimeTemplate.defineEsModuleFlagStatement({\r\n\t\t\t\t\texportsArgument: this.exportsArgument,\r\n\t\t\t\t\truntimeRequirements\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// define exports\r\n\t\tif (exportsMap.size > 0) {\r\n\t\t\truntimeRequirements.add(RuntimeGlobals.exports);\r\n\t\t\truntimeRequirements.add(RuntimeGlobals.definePropertyGetters);\r\n\t\t\tconst definitions = [];\r\n\t\t\tfor (const [key, value] of exportsMap) {\r\n\t\t\t\tdefinitions.push(\r\n\t\t\t\t\t`\\n  ${JSON.stringify(key)}: ${runtimeTemplate.returningFunction(\r\n\t\t\t\t\t\tvalue(requestShortener)\r\n\t\t\t\t\t)}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tresult.add(`\\n// EXPORTS\\n`);\r\n\t\t\tresult.add(\r\n\t\t\t\t`${RuntimeGlobals.definePropertyGetters}(${\r\n\t\t\t\t\tthis.exportsArgument\r\n\t\t\t\t}, {${definitions.join(\",\")}\\n});\\n`\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// list unused exports\r\n\t\tif (unusedExports.size > 0) {\r\n\t\t\tresult.add(\r\n\t\t\t\t`\\n// UNUSED EXPORTS: ${joinIterableWithComma(unusedExports)}\\n`\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// generate namespace objects\r\n\t\tconst namespaceObjectSources = new Map();\r\n\t\tfor (const info of neededNamespaceObjects) {\r\n\t\t\tif (info.namespaceExportSymbol) continue;\r\n\t\t\tconst nsObj = [];\r\n\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(info.module);\r\n\t\t\tfor (const exportInfo of exportsInfo.orderedExports) {\r\n\t\t\t\tif (exportInfo.provided === false) continue;\r\n\t\t\t\tconst usedName = exportInfo.getUsedName(undefined, runtime);\r\n\t\t\t\tif (usedName) {\r\n\t\t\t\t\tconst finalName = getFinalName(\r\n\t\t\t\t\t\tmoduleGraph,\r\n\t\t\t\t\t\tinfo,\r\n\t\t\t\t\t\t[exportInfo.name],\r\n\t\t\t\t\t\tmoduleToInfoMap,\r\n\t\t\t\t\t\truntime,\r\n\t\t\t\t\t\trequestShortener,\r\n\t\t\t\t\t\truntimeTemplate,\r\n\t\t\t\t\t\tneededNamespaceObjects,\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\tundefined,\r\n\t\t\t\t\t\tinfo.module.buildMeta.strictHarmonyModule,\r\n\t\t\t\t\t\ttrue\r\n\t\t\t\t\t);\r\n\t\t\t\t\tnsObj.push(\r\n\t\t\t\t\t\t`\\n  ${JSON.stringify(\r\n\t\t\t\t\t\t\tusedName\r\n\t\t\t\t\t\t)}: ${runtimeTemplate.returningFunction(finalName)}`\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst name = info.namespaceObjectName;\r\n\t\t\tconst defineGetters =\r\n\t\t\t\tnsObj.length > 0\r\n\t\t\t\t\t? `${RuntimeGlobals.definePropertyGetters}(${name}, {${nsObj.join(\r\n\t\t\t\t\t\t\t\",\"\r\n\t\t\t\t\t  )}\\n});\\n`\r\n\t\t\t\t\t: \"\";\r\n\t\t\tif (nsObj.length > 0)\r\n\t\t\t\truntimeRequirements.add(RuntimeGlobals.definePropertyGetters);\r\n\t\t\tnamespaceObjectSources.set(\r\n\t\t\t\tinfo,\r\n\t\t\t\t`\r\n// NAMESPACE OBJECT: ${info.module.readableIdentifier(requestShortener)}\r\nvar ${name} = {};\r\n${RuntimeGlobals.makeNamespaceObject}(${name});\r\n${defineGetters}`\r\n\t\t\t);\r\n\t\t\truntimeRequirements.add(RuntimeGlobals.makeNamespaceObject);\r\n\t\t}\r\n\r\n\t\t// define required namespace objects (must be before evaluation modules)\r\n\t\tfor (const info of modulesWithInfo) {\r\n\t\t\tif (info.type === \"concatenated\") {\r\n\t\t\t\tconst source = namespaceObjectSources.get(info);\r\n\t\t\t\tif (!source) continue;\r\n\t\t\t\tresult.add(source);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst chunkInitFragments = [];\r\n\r\n\t\t// evaluate modules in order\r\n\t\tfor (const rawInfo of modulesWithInfo) {\r\n\t\t\tlet name;\r\n\t\t\tlet isConditional = false;\r\n\t\t\tconst info = rawInfo.type === \"reference\" ? rawInfo.target : rawInfo;\r\n\t\t\tswitch (info.type) {\r\n\t\t\t\tcase \"concatenated\": {\r\n\t\t\t\t\tresult.add(\r\n\t\t\t\t\t\t`\\n;// CONCATENATED MODULE: ${info.module.readableIdentifier(\r\n\t\t\t\t\t\t\trequestShortener\r\n\t\t\t\t\t\t)}\\n`\r\n\t\t\t\t\t);\r\n\t\t\t\t\tresult.add(info.source);\r\n\t\t\t\t\tif (info.chunkInitFragments) {\r\n\t\t\t\t\t\tfor (const f of info.chunkInitFragments) chunkInitFragments.push(f);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (info.runtimeRequirements) {\r\n\t\t\t\t\t\tfor (const r of info.runtimeRequirements) {\r\n\t\t\t\t\t\t\truntimeRequirements.add(r);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tname = info.namespaceObjectName;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"external\": {\r\n\t\t\t\t\tresult.add(\r\n\t\t\t\t\t\t`\\n// EXTERNAL MODULE: ${info.module.readableIdentifier(\r\n\t\t\t\t\t\t\trequestShortener\r\n\t\t\t\t\t\t)}\\n`\r\n\t\t\t\t\t);\r\n\t\t\t\t\truntimeRequirements.add(RuntimeGlobals.require);\r\n\t\t\t\t\tconst { runtimeCondition } =\r\n\t\t\t\t\t\t/** @type {ExternalModuleInfo | ReferenceToModuleInfo} */ (rawInfo);\r\n\t\t\t\t\tconst condition = runtimeTemplate.runtimeConditionExpression({\r\n\t\t\t\t\t\tchunkGraph,\r\n\t\t\t\t\t\truntimeCondition,\r\n\t\t\t\t\t\truntime,\r\n\t\t\t\t\t\truntimeRequirements\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (condition !== \"true\") {\r\n\t\t\t\t\t\tisConditional = true;\r\n\t\t\t\t\t\tresult.add(`if (${condition}) {\\n`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult.add(\r\n\t\t\t\t\t\t`var ${info.name} = __webpack_require__(${JSON.stringify(\r\n\t\t\t\t\t\t\tchunkGraph.getModuleId(info.module)\r\n\t\t\t\t\t\t)});`\r\n\t\t\t\t\t);\r\n\t\t\t\t\tname = info.name;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// @ts-expect-error never is expected here\r\n\t\t\t\t\tthrow new Error(`Unsupported concatenation entry type ${info.type}`);\r\n\t\t\t}\r\n\t\t\tif (info.interopNamespaceObjectUsed) {\r\n\t\t\t\truntimeRequirements.add(RuntimeGlobals.createFakeNamespaceObject);\r\n\t\t\t\tresult.add(\r\n\t\t\t\t\t`\\nvar ${info.interopNamespaceObjectName} = /*#__PURE__*/${RuntimeGlobals.createFakeNamespaceObject}(${name}, 2);`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (info.interopNamespaceObject2Used) {\r\n\t\t\t\truntimeRequirements.add(RuntimeGlobals.createFakeNamespaceObject);\r\n\t\t\t\tresult.add(\r\n\t\t\t\t\t`\\nvar ${info.interopNamespaceObject2Name} = /*#__PURE__*/${RuntimeGlobals.createFakeNamespaceObject}(${name});`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (info.interopDefaultAccessUsed) {\r\n\t\t\t\truntimeRequirements.add(RuntimeGlobals.compatGetDefaultExport);\r\n\t\t\t\tresult.add(\r\n\t\t\t\t\t`\\nvar ${info.interopDefaultAccessName} = /*#__PURE__*/${RuntimeGlobals.compatGetDefaultExport}(${name});`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (isConditional) {\r\n\t\t\t\tresult.add(\"\\n}\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst data = new Map();\r\n\t\tif (chunkInitFragments.length > 0)\r\n\t\t\tdata.set(\"chunkInitFragments\", chunkInitFragments);\r\n\t\tdata.set(\"topLevelDeclarations\", topLevelDeclarations);\r\n\r\n\t\t/** @type {CodeGenerationResult} */\r\n\t\tconst resultEntry = {\r\n\t\t\tsources: new Map([[\"javascript\", new CachedSource(result)]]),\r\n\t\t\tdata,\r\n\t\t\truntimeRequirements\r\n\t\t};\r\n\r\n\t\treturn resultEntry;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Map<Module, ModuleInfo>} modulesMap modulesMap\r\n\t * @param {ModuleInfo} info info\r\n\t * @param {DependencyTemplates} dependencyTemplates dependencyTemplates\r\n\t * @param {RuntimeTemplate} runtimeTemplate runtimeTemplate\r\n\t * @param {ModuleGraph} moduleGraph moduleGraph\r\n\t * @param {ChunkGraph} chunkGraph chunkGraph\r\n\t * @param {RuntimeSpec} runtime runtime\r\n\t * @param {CodeGenerationResults} codeGenerationResults codeGenerationResults\r\n\t */\r\n\t_analyseModule(\r\n\t\tmodulesMap,\r\n\t\tinfo,\r\n\t\tdependencyTemplates,\r\n\t\truntimeTemplate,\r\n\t\tmoduleGraph,\r\n\t\tchunkGraph,\r\n\t\truntime,\r\n\t\tcodeGenerationResults\r\n\t) {\r\n\t\tif (info.type === \"concatenated\") {\r\n\t\t\tconst m = info.module;\r\n\t\t\ttry {\r\n\t\t\t\t// Create a concatenation scope to track and capture information\r\n\t\t\t\tconst concatenationScope = new ConcatenationScope(modulesMap, info);\r\n\r\n\t\t\t\t// TODO cache codeGeneration results\r\n\t\t\t\tconst codeGenResult = m.codeGeneration({\r\n\t\t\t\t\tdependencyTemplates,\r\n\t\t\t\t\truntimeTemplate,\r\n\t\t\t\t\tmoduleGraph,\r\n\t\t\t\t\tchunkGraph,\r\n\t\t\t\t\truntime,\r\n\t\t\t\t\tconcatenationScope,\r\n\t\t\t\t\tcodeGenerationResults,\r\n\t\t\t\t\tsourceTypes: TYPES\r\n\t\t\t\t});\r\n\t\t\t\tconst source = codeGenResult.sources.get(\"javascript\");\r\n\t\t\t\tconst data = codeGenResult.data;\r\n\t\t\t\tconst chunkInitFragments = data && data.get(\"chunkInitFragments\");\r\n\t\t\t\tconst code = source.source().toString();\r\n\t\t\t\tlet ast;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tast = JavascriptParser._parse(code, {\r\n\t\t\t\t\t\tsourceType: \"module\"\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\terr.loc &&\r\n\t\t\t\t\t\ttypeof err.loc === \"object\" &&\r\n\t\t\t\t\t\ttypeof err.loc.line === \"number\"\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tconst lineNumber = err.loc.line;\r\n\t\t\t\t\t\tconst lines = code.split(\"\\n\");\r\n\t\t\t\t\t\terr.message +=\r\n\t\t\t\t\t\t\t\"\\n| \" +\r\n\t\t\t\t\t\t\tlines\r\n\t\t\t\t\t\t\t\t.slice(Math.max(0, lineNumber - 3), lineNumber + 2)\r\n\t\t\t\t\t\t\t\t.join(\"\\n| \");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow err;\r\n\t\t\t\t}\r\n\t\t\t\tconst scopeManager = eslintScope.analyze(ast, {\r\n\t\t\t\t\tecmaVersion: 6,\r\n\t\t\t\t\tsourceType: \"module\",\r\n\t\t\t\t\toptimistic: true,\r\n\t\t\t\t\tignoreEval: true,\r\n\t\t\t\t\timpliedStrict: true\r\n\t\t\t\t});\r\n\t\t\t\tconst globalScope = scopeManager.acquire(ast);\r\n\t\t\t\tconst moduleScope = globalScope.childScopes[0];\r\n\t\t\t\tconst resultSource = new ReplaceSource(source);\r\n\t\t\t\tinfo.runtimeRequirements = codeGenResult.runtimeRequirements;\r\n\t\t\t\tinfo.ast = ast;\r\n\t\t\t\tinfo.internalSource = source;\r\n\t\t\t\tinfo.source = resultSource;\r\n\t\t\t\tinfo.chunkInitFragments = chunkInitFragments;\r\n\t\t\t\tinfo.globalScope = globalScope;\r\n\t\t\t\tinfo.moduleScope = moduleScope;\r\n\t\t\t} catch (err) {\r\n\t\t\t\terr.message += `\\nwhile analyzing module ${m.identifier()} for concatenation`;\r\n\t\t\t\tthrow err;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ModuleGraph} moduleGraph the module graph\r\n\t * @param {RuntimeSpec} runtime the runtime\r\n\t * @returns {[ModuleInfoOrReference[], Map<Module, ModuleInfo>]} module info items\r\n\t */\r\n\t_getModulesWithInfo(moduleGraph, runtime) {\r\n\t\tconst orderedConcatenationList = this._createConcatenationList(\r\n\t\t\tthis.rootModule,\r\n\t\t\tthis._modules,\r\n\t\t\truntime,\r\n\t\t\tmoduleGraph\r\n\t\t);\r\n\t\t/** @type {Map<Module, ModuleInfo>} */\r\n\t\tconst map = new Map();\r\n\t\tconst list = orderedConcatenationList.map((info, index) => {\r\n\t\t\tlet item = map.get(info.module);\r\n\t\t\tif (item === undefined) {\r\n\t\t\t\tswitch (info.type) {\r\n\t\t\t\t\tcase \"concatenated\":\r\n\t\t\t\t\t\titem = {\r\n\t\t\t\t\t\t\ttype: \"concatenated\",\r\n\t\t\t\t\t\t\tmodule: info.module,\r\n\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\tast: undefined,\r\n\t\t\t\t\t\t\tinternalSource: undefined,\r\n\t\t\t\t\t\t\truntimeRequirements: undefined,\r\n\t\t\t\t\t\t\tsource: undefined,\r\n\t\t\t\t\t\t\tglobalScope: undefined,\r\n\t\t\t\t\t\t\tmoduleScope: undefined,\r\n\t\t\t\t\t\t\tinternalNames: new Map(),\r\n\t\t\t\t\t\t\texportMap: undefined,\r\n\t\t\t\t\t\t\trawExportMap: undefined,\r\n\t\t\t\t\t\t\tnamespaceExportSymbol: undefined,\r\n\t\t\t\t\t\t\tnamespaceObjectName: undefined,\r\n\t\t\t\t\t\t\tinteropNamespaceObjectUsed: false,\r\n\t\t\t\t\t\t\tinteropNamespaceObjectName: undefined,\r\n\t\t\t\t\t\t\tinteropNamespaceObject2Used: false,\r\n\t\t\t\t\t\t\tinteropNamespaceObject2Name: undefined,\r\n\t\t\t\t\t\t\tinteropDefaultAccessUsed: false,\r\n\t\t\t\t\t\t\tinteropDefaultAccessName: undefined\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"external\":\r\n\t\t\t\t\t\titem = {\r\n\t\t\t\t\t\t\ttype: \"external\",\r\n\t\t\t\t\t\t\tmodule: info.module,\r\n\t\t\t\t\t\t\truntimeCondition: info.runtimeCondition,\r\n\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\tname: undefined,\r\n\t\t\t\t\t\t\tinteropNamespaceObjectUsed: false,\r\n\t\t\t\t\t\t\tinteropNamespaceObjectName: undefined,\r\n\t\t\t\t\t\t\tinteropNamespaceObject2Used: false,\r\n\t\t\t\t\t\t\tinteropNamespaceObject2Name: undefined,\r\n\t\t\t\t\t\t\tinteropDefaultAccessUsed: false,\r\n\t\t\t\t\t\t\tinteropDefaultAccessName: undefined\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t\t`Unsupported concatenation entry type ${info.type}`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tmap.set(item.module, item);\r\n\t\t\t\treturn item;\r\n\t\t\t} else {\r\n\t\t\t\t/** @type {ReferenceToModuleInfo} */\r\n\t\t\t\tconst ref = {\r\n\t\t\t\t\ttype: \"reference\",\r\n\t\t\t\t\truntimeCondition: info.runtimeCondition,\r\n\t\t\t\t\ttarget: item\r\n\t\t\t\t};\r\n\t\t\t\treturn ref;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn [list, map];\r\n\t}\r\n\r\n\tfindNewName(oldName, usedNamed1, usedNamed2, extraInfo) {\r\n\t\tlet name = oldName;\r\n\r\n\t\tif (name === ConcatenationScope.DEFAULT_EXPORT) {\r\n\t\t\tname = \"\";\r\n\t\t}\r\n\t\tif (name === ConcatenationScope.NAMESPACE_OBJECT_EXPORT) {\r\n\t\t\tname = \"namespaceObject\";\r\n\t\t}\r\n\r\n\t\t// Remove uncool stuff\r\n\t\textraInfo = extraInfo.replace(\r\n\t\t\t/\\.+\\/|(\\/index)?\\.([a-zA-Z0-9]{1,4})($|\\s|\\?)|\\s*\\+\\s*\\d+\\s*modules/g,\r\n\t\t\t\"\"\r\n\t\t);\r\n\r\n\t\tconst splittedInfo = extraInfo.split(\"/\");\r\n\t\twhile (splittedInfo.length) {\r\n\t\t\tname = splittedInfo.pop() + (name ? \"_\" + name : \"\");\r\n\t\t\tconst nameIdent = Template.toIdentifier(name);\r\n\t\t\tif (\r\n\t\t\t\t!usedNamed1.has(nameIdent) &&\r\n\t\t\t\t(!usedNamed2 || !usedNamed2.has(nameIdent))\r\n\t\t\t)\r\n\t\t\t\treturn nameIdent;\r\n\t\t}\r\n\r\n\t\tlet i = 0;\r\n\t\tlet nameWithNumber = Template.toIdentifier(`${name}_${i}`);\r\n\t\twhile (\r\n\t\t\tusedNamed1.has(nameWithNumber) ||\r\n\t\t\t(usedNamed2 && usedNamed2.has(nameWithNumber))\r\n\t\t) {\r\n\t\t\ti++;\r\n\t\t\tnameWithNumber = Template.toIdentifier(`${name}_${i}`);\r\n\t\t}\r\n\t\treturn nameWithNumber;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Hash} hash the hash used to track dependencies\r\n\t * @param {UpdateHashContext} context context\r\n\t * @returns {void}\r\n\t */\r\n\tupdateHash(hash, context) {\r\n\t\tconst { chunkGraph, runtime } = context;\r\n\t\tfor (const info of this._createConcatenationList(\r\n\t\t\tthis.rootModule,\r\n\t\t\tthis._modules,\r\n\t\t\tintersectRuntime(runtime, this._runtime),\r\n\t\t\tchunkGraph.moduleGraph\r\n\t\t)) {\r\n\t\t\tswitch (info.type) {\r\n\t\t\t\tcase \"concatenated\":\r\n\t\t\t\t\tinfo.module.updateHash(hash, context);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"external\":\r\n\t\t\t\t\thash.update(`${chunkGraph.getModuleId(info.module)}`);\r\n\t\t\t\t\t// TODO runtimeCondition\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsuper.updateHash(hash, context);\r\n\t}\r\n\r\n\tstatic deserialize(context) {\r\n\t\tconst obj = new ConcatenatedModule({\r\n\t\t\tidentifier: undefined,\r\n\t\t\trootModule: undefined,\r\n\t\t\tmodules: undefined,\r\n\t\t\truntime: undefined\r\n\t\t});\r\n\t\tobj.deserialize(context);\r\n\t\treturn obj;\r\n\t}\r\n}\r\n\r\nmakeSerializable(ConcatenatedModule, \"webpack/lib/optimize/ConcatenatedModule\");\r\n\r\nmodule.exports = ConcatenatedModule;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}