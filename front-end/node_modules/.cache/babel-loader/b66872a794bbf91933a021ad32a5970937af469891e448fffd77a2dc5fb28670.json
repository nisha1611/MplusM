{"ast":null,"code":"/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\n\n\"use strict\";\n\nconst path = require(\"path\");\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").WatchOptions} WatchOptions */\n/** @typedef {import(\"../FileSystemInfo\").FileSystemInfoEntry} FileSystemInfoEntry */\n\n/**\r\n * @typedef {Object} IStats\r\n * @property {() => boolean} isFile\r\n * @property {() => boolean} isDirectory\r\n * @property {() => boolean} isBlockDevice\r\n * @property {() => boolean} isCharacterDevice\r\n * @property {() => boolean} isSymbolicLink\r\n * @property {() => boolean} isFIFO\r\n * @property {() => boolean} isSocket\r\n * @property {number | bigint} dev\r\n * @property {number | bigint} ino\r\n * @property {number | bigint} mode\r\n * @property {number | bigint} nlink\r\n * @property {number | bigint} uid\r\n * @property {number | bigint} gid\r\n * @property {number | bigint} rdev\r\n * @property {number | bigint} size\r\n * @property {number | bigint} blksize\r\n * @property {number | bigint} blocks\r\n * @property {number | bigint} atimeMs\r\n * @property {number | bigint} mtimeMs\r\n * @property {number | bigint} ctimeMs\r\n * @property {number | bigint} birthtimeMs\r\n * @property {Date} atime\r\n * @property {Date} mtime\r\n * @property {Date} ctime\r\n * @property {Date} birthtime\r\n */\n\n/**\r\n * @typedef {Object} IDirent\r\n * @property {() => boolean} isFile\r\n * @property {() => boolean} isDirectory\r\n * @property {() => boolean} isBlockDevice\r\n * @property {() => boolean} isCharacterDevice\r\n * @property {() => boolean} isSymbolicLink\r\n * @property {() => boolean} isFIFO\r\n * @property {() => boolean} isSocket\r\n * @property {string | Buffer} name\r\n */\n\n/** @typedef {function((NodeJS.ErrnoException | null)=): void} Callback */\n/** @typedef {function((NodeJS.ErrnoException | null)=, Buffer=): void} BufferCallback */\n/** @typedef {function((NodeJS.ErrnoException | null)=, Buffer|string=): void} BufferOrStringCallback */\n/** @typedef {function((NodeJS.ErrnoException | null)=, (string | Buffer)[] | IDirent[]=): void} DirentArrayCallback */\n/** @typedef {function((NodeJS.ErrnoException | null)=, string=): void} StringCallback */\n/** @typedef {function((NodeJS.ErrnoException | null)=, number=): void} NumberCallback */\n/** @typedef {function((NodeJS.ErrnoException | null)=, IStats=): void} StatsCallback */\n/** @typedef {function((NodeJS.ErrnoException | Error | null)=, any=): void} ReadJsonCallback */\n/** @typedef {function((NodeJS.ErrnoException | Error | null)=, IStats|string=): void} LstatReadlinkAbsoluteCallback */\n\n/**\r\n * @typedef {Object} WatcherInfo\r\n * @property {Set<string>} changes get current aggregated changes that have not yet send to callback\r\n * @property {Set<string>} removals get current aggregated removals that have not yet send to callback\r\n * @property {Map<string, FileSystemInfoEntry | \"ignore\">} fileTimeInfoEntries get info about files\r\n * @property {Map<string, FileSystemInfoEntry | \"ignore\">} contextTimeInfoEntries get info about directories\r\n */\n\n// TODO webpack 6 deprecate missing getInfo\n/**\r\n * @typedef {Object} Watcher\r\n * @property {function(): void} close closes the watcher and all underlying file watchers\r\n * @property {function(): void} pause closes the watcher, but keeps underlying file watchers alive until the next watch call\r\n * @property {function(): Set<string>=} getAggregatedChanges get current aggregated changes that have not yet send to callback\r\n * @property {function(): Set<string>=} getAggregatedRemovals get current aggregated removals that have not yet send to callback\r\n * @property {function(): Map<string, FileSystemInfoEntry | \"ignore\">} getFileTimeInfoEntries get info about files\r\n * @property {function(): Map<string, FileSystemInfoEntry | \"ignore\">} getContextTimeInfoEntries get info about directories\r\n * @property {function(): WatcherInfo=} getInfo get info about timestamps and changes\r\n */\n\n/**\r\n * @callback WatchMethod\r\n * @param {Iterable<string>} files watched files\r\n * @param {Iterable<string>} directories watched directories\r\n * @param {Iterable<string>} missing watched exitance entries\r\n * @param {number} startTime timestamp of start time\r\n * @param {WatchOptions} options options object\r\n * @param {function(Error=, Map<string, FileSystemInfoEntry | \"ignore\">, Map<string, FileSystemInfoEntry | \"ignore\">, Set<string>, Set<string>): void} callback aggregated callback\r\n * @param {function(string, number): void} callbackUndelayed callback when the first change was detected\r\n * @returns {Watcher} a watcher\r\n */\n\n// TODO webpack 6 make optional methods required\n\n/**\r\n * @typedef {Object} OutputFileSystem\r\n * @property {function(string, Buffer|string, Callback): void} writeFile\r\n * @property {function(string, Callback): void} mkdir\r\n * @property {function(string, DirentArrayCallback): void=} readdir\r\n * @property {function(string, Callback): void=} rmdir\r\n * @property {function(string, Callback): void=} unlink\r\n * @property {function(string, StatsCallback): void} stat\r\n * @property {function(string, StatsCallback): void=} lstat\r\n * @property {function(string, BufferOrStringCallback): void} readFile\r\n * @property {(function(string, string): string)=} join\r\n * @property {(function(string, string): string)=} relative\r\n * @property {(function(string): string)=} dirname\r\n */\n\n/**\r\n * @typedef {Object} InputFileSystem\r\n * @property {function(string, BufferOrStringCallback): void} readFile\r\n * @property {(function(string, ReadJsonCallback): void)=} readJson\r\n * @property {function(string, BufferOrStringCallback): void} readlink\r\n * @property {function(string, DirentArrayCallback): void} readdir\r\n * @property {function(string, StatsCallback): void} stat\r\n * @property {function(string, StatsCallback): void=} lstat\r\n * @property {(function(string, BufferOrStringCallback): void)=} realpath\r\n * @property {(function(string=): void)=} purge\r\n * @property {(function(string, string): string)=} join\r\n * @property {(function(string, string): string)=} relative\r\n * @property {(function(string): string)=} dirname\r\n */\n\n/**\r\n * @typedef {Object} WatchFileSystem\r\n * @property {WatchMethod} watch\r\n */\n\n/**\r\n * @typedef {Object} IntermediateFileSystemExtras\r\n * @property {function(string): void} mkdirSync\r\n * @property {function(string): NodeJS.WritableStream} createWriteStream\r\n * @property {function(string, string, NumberCallback): void} open\r\n * @property {function(number, Buffer, number, number, number, NumberCallback): void} read\r\n * @property {function(number, Callback): void} close\r\n * @property {function(string, string, Callback): void} rename\r\n */\n\n/** @typedef {InputFileSystem & OutputFileSystem & IntermediateFileSystemExtras} IntermediateFileSystem */\n\n/**\r\n *\r\n * @param {InputFileSystem|OutputFileSystem|undefined} fs a file system\r\n * @param {string} rootPath the root path\r\n * @param {string} targetPath the target path\r\n * @returns {string} location of targetPath relative to rootPath\r\n */\nconst relative = (fs, rootPath, targetPath) => {\n  if (fs && fs.relative) {\n    return fs.relative(rootPath, targetPath);\n  } else if (path.posix.isAbsolute(rootPath)) {\n    return path.posix.relative(rootPath, targetPath);\n  } else if (path.win32.isAbsolute(rootPath)) {\n    return path.win32.relative(rootPath, targetPath);\n  } else {\n    throw new Error(`${rootPath} is neither a posix nor a windows path, and there is no 'relative' method defined in the file system`);\n  }\n};\nexports.relative = relative;\n\n/**\r\n * @param {InputFileSystem|OutputFileSystem|undefined} fs a file system\r\n * @param {string} rootPath a path\r\n * @param {string} filename a filename\r\n * @returns {string} the joined path\r\n */\nconst join = (fs, rootPath, filename) => {\n  if (fs && fs.join) {\n    return fs.join(rootPath, filename);\n  } else if (path.posix.isAbsolute(rootPath)) {\n    return path.posix.join(rootPath, filename);\n  } else if (path.win32.isAbsolute(rootPath)) {\n    return path.win32.join(rootPath, filename);\n  } else {\n    throw new Error(`${rootPath} is neither a posix nor a windows path, and there is no 'join' method defined in the file system`);\n  }\n};\nexports.join = join;\n\n/**\r\n * @param {InputFileSystem|OutputFileSystem|undefined} fs a file system\r\n * @param {string} absPath an absolute path\r\n * @returns {string} the parent directory of the absolute path\r\n */\nconst dirname = (fs, absPath) => {\n  if (fs && fs.dirname) {\n    return fs.dirname(absPath);\n  } else if (path.posix.isAbsolute(absPath)) {\n    return path.posix.dirname(absPath);\n  } else if (path.win32.isAbsolute(absPath)) {\n    return path.win32.dirname(absPath);\n  } else {\n    throw new Error(`${absPath} is neither a posix nor a windows path, and there is no 'dirname' method defined in the file system`);\n  }\n};\nexports.dirname = dirname;\n\n/**\r\n * @param {OutputFileSystem} fs a file system\r\n * @param {string} p an absolute path\r\n * @param {function(Error=): void} callback callback function for the error\r\n * @returns {void}\r\n */\nconst mkdirp = (fs, p, callback) => {\n  fs.mkdir(p, err => {\n    if (err) {\n      if (err.code === \"ENOENT\") {\n        const dir = dirname(fs, p);\n        if (dir === p) {\n          callback(err);\n          return;\n        }\n        mkdirp(fs, dir, err => {\n          if (err) {\n            callback(err);\n            return;\n          }\n          fs.mkdir(p, err => {\n            if (err) {\n              if (err.code === \"EEXIST\") {\n                callback();\n                return;\n              }\n              callback(err);\n              return;\n            }\n            callback();\n          });\n        });\n        return;\n      } else if (err.code === \"EEXIST\") {\n        callback();\n        return;\n      }\n      callback(err);\n      return;\n    }\n    callback();\n  });\n};\nexports.mkdirp = mkdirp;\n\n/**\r\n * @param {IntermediateFileSystem} fs a file system\r\n * @param {string} p an absolute path\r\n * @returns {void}\r\n */\nconst mkdirpSync = (fs, p) => {\n  try {\n    fs.mkdirSync(p);\n  } catch (err) {\n    if (err) {\n      if (err.code === \"ENOENT\") {\n        const dir = dirname(fs, p);\n        if (dir === p) {\n          throw err;\n        }\n        mkdirpSync(fs, dir);\n        fs.mkdirSync(p);\n        return;\n      } else if (err.code === \"EEXIST\") {\n        return;\n      }\n      throw err;\n    }\n  }\n};\nexports.mkdirpSync = mkdirpSync;\n\n/**\r\n * @param {InputFileSystem} fs a file system\r\n * @param {string} p an absolute path\r\n * @param {ReadJsonCallback} callback callback\r\n * @returns {void}\r\n */\nconst readJson = (fs, p, callback) => {\n  if (\"readJson\" in fs) return fs.readJson(p, callback);\n  fs.readFile(p, (err, buf) => {\n    if (err) return callback(err);\n    let data;\n    try {\n      data = JSON.parse(buf.toString(\"utf-8\"));\n    } catch (e) {\n      return callback(e);\n    }\n    return callback(null, data);\n  });\n};\nexports.readJson = readJson;\n\n/**\r\n * @param {InputFileSystem} fs a file system\r\n * @param {string} p an absolute path\r\n * @param {ReadJsonCallback} callback callback\r\n * @returns {void}\r\n */\nconst lstatReadlinkAbsolute = (fs, p, callback) => {\n  let i = 3;\n  const doReadLink = () => {\n    fs.readlink(p, (err, target) => {\n      if (err && --i > 0) {\n        // It might was just changed from symlink to file\n        // we retry 2 times to catch this case before throwing the error\n        return doStat();\n      }\n      if (err || !target) return doStat();\n      const value = target.toString();\n      callback(null, join(fs, dirname(fs, p), value));\n    });\n  };\n  const doStat = () => {\n    if (\"lstat\" in fs) {\n      return fs.lstat(p, (err, stats) => {\n        if (err) return callback(err);\n        if (stats.isSymbolicLink()) {\n          return doReadLink();\n        }\n        callback(null, stats);\n      });\n    } else {\n      return fs.stat(p, callback);\n    }\n  };\n  if (\"lstat\" in fs) return doStat();\n  doReadLink();\n};\nexports.lstatReadlinkAbsolute = lstatReadlinkAbsolute;","map":{"version":3,"names":["path","require","relative","fs","rootPath","targetPath","posix","isAbsolute","win32","Error","exports","join","filename","dirname","absPath","mkdirp","p","callback","mkdir","err","code","dir","mkdirpSync","mkdirSync","readJson","readFile","buf","data","JSON","parse","toString","e","lstatReadlinkAbsolute","i","doReadLink","readlink","target","doStat","value","lstat","stats","isSymbolicLink","stat"],"sources":["C:/Users/91930/Desktop/Github projects/Pharmacy Demo/front-end/node_modules/webpack/lib/util/fs.js"],"sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n\r\n\"use strict\";\r\n\r\nconst path = require(\"path\");\r\n\r\n/** @typedef {import(\"../../declarations/WebpackOptions\").WatchOptions} WatchOptions */\r\n/** @typedef {import(\"../FileSystemInfo\").FileSystemInfoEntry} FileSystemInfoEntry */\r\n\r\n/**\r\n * @typedef {Object} IStats\r\n * @property {() => boolean} isFile\r\n * @property {() => boolean} isDirectory\r\n * @property {() => boolean} isBlockDevice\r\n * @property {() => boolean} isCharacterDevice\r\n * @property {() => boolean} isSymbolicLink\r\n * @property {() => boolean} isFIFO\r\n * @property {() => boolean} isSocket\r\n * @property {number | bigint} dev\r\n * @property {number | bigint} ino\r\n * @property {number | bigint} mode\r\n * @property {number | bigint} nlink\r\n * @property {number | bigint} uid\r\n * @property {number | bigint} gid\r\n * @property {number | bigint} rdev\r\n * @property {number | bigint} size\r\n * @property {number | bigint} blksize\r\n * @property {number | bigint} blocks\r\n * @property {number | bigint} atimeMs\r\n * @property {number | bigint} mtimeMs\r\n * @property {number | bigint} ctimeMs\r\n * @property {number | bigint} birthtimeMs\r\n * @property {Date} atime\r\n * @property {Date} mtime\r\n * @property {Date} ctime\r\n * @property {Date} birthtime\r\n */\r\n\r\n/**\r\n * @typedef {Object} IDirent\r\n * @property {() => boolean} isFile\r\n * @property {() => boolean} isDirectory\r\n * @property {() => boolean} isBlockDevice\r\n * @property {() => boolean} isCharacterDevice\r\n * @property {() => boolean} isSymbolicLink\r\n * @property {() => boolean} isFIFO\r\n * @property {() => boolean} isSocket\r\n * @property {string | Buffer} name\r\n */\r\n\r\n/** @typedef {function((NodeJS.ErrnoException | null)=): void} Callback */\r\n/** @typedef {function((NodeJS.ErrnoException | null)=, Buffer=): void} BufferCallback */\r\n/** @typedef {function((NodeJS.ErrnoException | null)=, Buffer|string=): void} BufferOrStringCallback */\r\n/** @typedef {function((NodeJS.ErrnoException | null)=, (string | Buffer)[] | IDirent[]=): void} DirentArrayCallback */\r\n/** @typedef {function((NodeJS.ErrnoException | null)=, string=): void} StringCallback */\r\n/** @typedef {function((NodeJS.ErrnoException | null)=, number=): void} NumberCallback */\r\n/** @typedef {function((NodeJS.ErrnoException | null)=, IStats=): void} StatsCallback */\r\n/** @typedef {function((NodeJS.ErrnoException | Error | null)=, any=): void} ReadJsonCallback */\r\n/** @typedef {function((NodeJS.ErrnoException | Error | null)=, IStats|string=): void} LstatReadlinkAbsoluteCallback */\r\n\r\n/**\r\n * @typedef {Object} WatcherInfo\r\n * @property {Set<string>} changes get current aggregated changes that have not yet send to callback\r\n * @property {Set<string>} removals get current aggregated removals that have not yet send to callback\r\n * @property {Map<string, FileSystemInfoEntry | \"ignore\">} fileTimeInfoEntries get info about files\r\n * @property {Map<string, FileSystemInfoEntry | \"ignore\">} contextTimeInfoEntries get info about directories\r\n */\r\n\r\n// TODO webpack 6 deprecate missing getInfo\r\n/**\r\n * @typedef {Object} Watcher\r\n * @property {function(): void} close closes the watcher and all underlying file watchers\r\n * @property {function(): void} pause closes the watcher, but keeps underlying file watchers alive until the next watch call\r\n * @property {function(): Set<string>=} getAggregatedChanges get current aggregated changes that have not yet send to callback\r\n * @property {function(): Set<string>=} getAggregatedRemovals get current aggregated removals that have not yet send to callback\r\n * @property {function(): Map<string, FileSystemInfoEntry | \"ignore\">} getFileTimeInfoEntries get info about files\r\n * @property {function(): Map<string, FileSystemInfoEntry | \"ignore\">} getContextTimeInfoEntries get info about directories\r\n * @property {function(): WatcherInfo=} getInfo get info about timestamps and changes\r\n */\r\n\r\n/**\r\n * @callback WatchMethod\r\n * @param {Iterable<string>} files watched files\r\n * @param {Iterable<string>} directories watched directories\r\n * @param {Iterable<string>} missing watched exitance entries\r\n * @param {number} startTime timestamp of start time\r\n * @param {WatchOptions} options options object\r\n * @param {function(Error=, Map<string, FileSystemInfoEntry | \"ignore\">, Map<string, FileSystemInfoEntry | \"ignore\">, Set<string>, Set<string>): void} callback aggregated callback\r\n * @param {function(string, number): void} callbackUndelayed callback when the first change was detected\r\n * @returns {Watcher} a watcher\r\n */\r\n\r\n// TODO webpack 6 make optional methods required\r\n\r\n/**\r\n * @typedef {Object} OutputFileSystem\r\n * @property {function(string, Buffer|string, Callback): void} writeFile\r\n * @property {function(string, Callback): void} mkdir\r\n * @property {function(string, DirentArrayCallback): void=} readdir\r\n * @property {function(string, Callback): void=} rmdir\r\n * @property {function(string, Callback): void=} unlink\r\n * @property {function(string, StatsCallback): void} stat\r\n * @property {function(string, StatsCallback): void=} lstat\r\n * @property {function(string, BufferOrStringCallback): void} readFile\r\n * @property {(function(string, string): string)=} join\r\n * @property {(function(string, string): string)=} relative\r\n * @property {(function(string): string)=} dirname\r\n */\r\n\r\n/**\r\n * @typedef {Object} InputFileSystem\r\n * @property {function(string, BufferOrStringCallback): void} readFile\r\n * @property {(function(string, ReadJsonCallback): void)=} readJson\r\n * @property {function(string, BufferOrStringCallback): void} readlink\r\n * @property {function(string, DirentArrayCallback): void} readdir\r\n * @property {function(string, StatsCallback): void} stat\r\n * @property {function(string, StatsCallback): void=} lstat\r\n * @property {(function(string, BufferOrStringCallback): void)=} realpath\r\n * @property {(function(string=): void)=} purge\r\n * @property {(function(string, string): string)=} join\r\n * @property {(function(string, string): string)=} relative\r\n * @property {(function(string): string)=} dirname\r\n */\r\n\r\n/**\r\n * @typedef {Object} WatchFileSystem\r\n * @property {WatchMethod} watch\r\n */\r\n\r\n/**\r\n * @typedef {Object} IntermediateFileSystemExtras\r\n * @property {function(string): void} mkdirSync\r\n * @property {function(string): NodeJS.WritableStream} createWriteStream\r\n * @property {function(string, string, NumberCallback): void} open\r\n * @property {function(number, Buffer, number, number, number, NumberCallback): void} read\r\n * @property {function(number, Callback): void} close\r\n * @property {function(string, string, Callback): void} rename\r\n */\r\n\r\n/** @typedef {InputFileSystem & OutputFileSystem & IntermediateFileSystemExtras} IntermediateFileSystem */\r\n\r\n/**\r\n *\r\n * @param {InputFileSystem|OutputFileSystem|undefined} fs a file system\r\n * @param {string} rootPath the root path\r\n * @param {string} targetPath the target path\r\n * @returns {string} location of targetPath relative to rootPath\r\n */\r\nconst relative = (fs, rootPath, targetPath) => {\r\n\tif (fs && fs.relative) {\r\n\t\treturn fs.relative(rootPath, targetPath);\r\n\t} else if (path.posix.isAbsolute(rootPath)) {\r\n\t\treturn path.posix.relative(rootPath, targetPath);\r\n\t} else if (path.win32.isAbsolute(rootPath)) {\r\n\t\treturn path.win32.relative(rootPath, targetPath);\r\n\t} else {\r\n\t\tthrow new Error(\r\n\t\t\t`${rootPath} is neither a posix nor a windows path, and there is no 'relative' method defined in the file system`\r\n\t\t);\r\n\t}\r\n};\r\nexports.relative = relative;\r\n\r\n/**\r\n * @param {InputFileSystem|OutputFileSystem|undefined} fs a file system\r\n * @param {string} rootPath a path\r\n * @param {string} filename a filename\r\n * @returns {string} the joined path\r\n */\r\nconst join = (fs, rootPath, filename) => {\r\n\tif (fs && fs.join) {\r\n\t\treturn fs.join(rootPath, filename);\r\n\t} else if (path.posix.isAbsolute(rootPath)) {\r\n\t\treturn path.posix.join(rootPath, filename);\r\n\t} else if (path.win32.isAbsolute(rootPath)) {\r\n\t\treturn path.win32.join(rootPath, filename);\r\n\t} else {\r\n\t\tthrow new Error(\r\n\t\t\t`${rootPath} is neither a posix nor a windows path, and there is no 'join' method defined in the file system`\r\n\t\t);\r\n\t}\r\n};\r\nexports.join = join;\r\n\r\n/**\r\n * @param {InputFileSystem|OutputFileSystem|undefined} fs a file system\r\n * @param {string} absPath an absolute path\r\n * @returns {string} the parent directory of the absolute path\r\n */\r\nconst dirname = (fs, absPath) => {\r\n\tif (fs && fs.dirname) {\r\n\t\treturn fs.dirname(absPath);\r\n\t} else if (path.posix.isAbsolute(absPath)) {\r\n\t\treturn path.posix.dirname(absPath);\r\n\t} else if (path.win32.isAbsolute(absPath)) {\r\n\t\treturn path.win32.dirname(absPath);\r\n\t} else {\r\n\t\tthrow new Error(\r\n\t\t\t`${absPath} is neither a posix nor a windows path, and there is no 'dirname' method defined in the file system`\r\n\t\t);\r\n\t}\r\n};\r\nexports.dirname = dirname;\r\n\r\n/**\r\n * @param {OutputFileSystem} fs a file system\r\n * @param {string} p an absolute path\r\n * @param {function(Error=): void} callback callback function for the error\r\n * @returns {void}\r\n */\r\nconst mkdirp = (fs, p, callback) => {\r\n\tfs.mkdir(p, err => {\r\n\t\tif (err) {\r\n\t\t\tif (err.code === \"ENOENT\") {\r\n\t\t\t\tconst dir = dirname(fs, p);\r\n\t\t\t\tif (dir === p) {\r\n\t\t\t\t\tcallback(err);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tmkdirp(fs, dir, err => {\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tcallback(err);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfs.mkdir(p, err => {\r\n\t\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\t\tif (err.code === \"EEXIST\") {\r\n\t\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcallback(err);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t} else if (err.code === \"EEXIST\") {\r\n\t\t\t\tcallback();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcallback(err);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcallback();\r\n\t});\r\n};\r\nexports.mkdirp = mkdirp;\r\n\r\n/**\r\n * @param {IntermediateFileSystem} fs a file system\r\n * @param {string} p an absolute path\r\n * @returns {void}\r\n */\r\nconst mkdirpSync = (fs, p) => {\r\n\ttry {\r\n\t\tfs.mkdirSync(p);\r\n\t} catch (err) {\r\n\t\tif (err) {\r\n\t\t\tif (err.code === \"ENOENT\") {\r\n\t\t\t\tconst dir = dirname(fs, p);\r\n\t\t\t\tif (dir === p) {\r\n\t\t\t\t\tthrow err;\r\n\t\t\t\t}\r\n\t\t\t\tmkdirpSync(fs, dir);\r\n\t\t\t\tfs.mkdirSync(p);\r\n\t\t\t\treturn;\r\n\t\t\t} else if (err.code === \"EEXIST\") {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthrow err;\r\n\t\t}\r\n\t}\r\n};\r\nexports.mkdirpSync = mkdirpSync;\r\n\r\n/**\r\n * @param {InputFileSystem} fs a file system\r\n * @param {string} p an absolute path\r\n * @param {ReadJsonCallback} callback callback\r\n * @returns {void}\r\n */\r\nconst readJson = (fs, p, callback) => {\r\n\tif (\"readJson\" in fs) return fs.readJson(p, callback);\r\n\tfs.readFile(p, (err, buf) => {\r\n\t\tif (err) return callback(err);\r\n\t\tlet data;\r\n\t\ttry {\r\n\t\t\tdata = JSON.parse(buf.toString(\"utf-8\"));\r\n\t\t} catch (e) {\r\n\t\t\treturn callback(e);\r\n\t\t}\r\n\t\treturn callback(null, data);\r\n\t});\r\n};\r\nexports.readJson = readJson;\r\n\r\n/**\r\n * @param {InputFileSystem} fs a file system\r\n * @param {string} p an absolute path\r\n * @param {ReadJsonCallback} callback callback\r\n * @returns {void}\r\n */\r\nconst lstatReadlinkAbsolute = (fs, p, callback) => {\r\n\tlet i = 3;\r\n\tconst doReadLink = () => {\r\n\t\tfs.readlink(p, (err, target) => {\r\n\t\t\tif (err && --i > 0) {\r\n\t\t\t\t// It might was just changed from symlink to file\r\n\t\t\t\t// we retry 2 times to catch this case before throwing the error\r\n\t\t\t\treturn doStat();\r\n\t\t\t}\r\n\t\t\tif (err || !target) return doStat();\r\n\t\t\tconst value = target.toString();\r\n\t\t\tcallback(null, join(fs, dirname(fs, p), value));\r\n\t\t});\r\n\t};\r\n\tconst doStat = () => {\r\n\t\tif (\"lstat\" in fs) {\r\n\t\t\treturn fs.lstat(p, (err, stats) => {\r\n\t\t\t\tif (err) return callback(err);\r\n\t\t\t\tif (stats.isSymbolicLink()) {\r\n\t\t\t\t\treturn doReadLink();\r\n\t\t\t\t}\r\n\t\t\t\tcallback(null, stats);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn fs.stat(p, callback);\r\n\t\t}\r\n\t};\r\n\tif (\"lstat\" in fs) return doStat();\r\n\tdoReadLink();\r\n};\r\nexports.lstatReadlinkAbsolute = lstatReadlinkAbsolute;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;;AAE5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,QAAQ,GAAG,CAACC,EAAE,EAAEC,QAAQ,EAAEC,UAAU,KAAK;EAC9C,IAAIF,EAAE,IAAIA,EAAE,CAACD,QAAQ,EAAE;IACtB,OAAOC,EAAE,CAACD,QAAQ,CAACE,QAAQ,EAAEC,UAAU,CAAC;EACzC,CAAC,MAAM,IAAIL,IAAI,CAACM,KAAK,CAACC,UAAU,CAACH,QAAQ,CAAC,EAAE;IAC3C,OAAOJ,IAAI,CAACM,KAAK,CAACJ,QAAQ,CAACE,QAAQ,EAAEC,UAAU,CAAC;EACjD,CAAC,MAAM,IAAIL,IAAI,CAACQ,KAAK,CAACD,UAAU,CAACH,QAAQ,CAAC,EAAE;IAC3C,OAAOJ,IAAI,CAACQ,KAAK,CAACN,QAAQ,CAACE,QAAQ,EAAEC,UAAU,CAAC;EACjD,CAAC,MAAM;IACN,MAAM,IAAII,KAAK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"},"metadata":{},"sourceType":"script","externalDependencies":[]}