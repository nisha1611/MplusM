{"ast":null,"code":"'use strict';\n\n/*!\r\n * ignore\r\n */\nmodule.exports = function validateBeforeSave(schema) {\n  const unshift = true;\n  schema.pre('save', false, function validateBeforeSave(next, options) {\n    const _this = this;\n    // Nested docs have their own presave\n    if (this.$isSubdocument) {\n      return next();\n    }\n    const hasValidateBeforeSaveOption = options && typeof options === 'object' && 'validateBeforeSave' in options;\n    let shouldValidate;\n    if (hasValidateBeforeSaveOption) {\n      shouldValidate = !!options.validateBeforeSave;\n    } else {\n      shouldValidate = this.$__schema.options.validateBeforeSave;\n    }\n\n    // Validate\n    if (shouldValidate) {\n      const hasValidateModifiedOnlyOption = options && typeof options === 'object' && 'validateModifiedOnly' in options;\n      const validateOptions = hasValidateModifiedOnlyOption ? {\n        validateModifiedOnly: options.validateModifiedOnly\n      } : null;\n      this.$validate(validateOptions, function (error) {\n        return _this.$__schema.s.hooks.execPost('save:error', _this, [_this], {\n          error: error\n        }, function (error) {\n          _this.$op = 'save';\n          next(error);\n        });\n      });\n    } else {\n      next();\n    }\n  }, null, unshift);\n};","map":{"version":3,"names":["module","exports","validateBeforeSave","schema","unshift","pre","next","options","_this","$isSubdocument","hasValidateBeforeSaveOption","shouldValidate","$__schema","hasValidateModifiedOnlyOption","validateOptions","validateModifiedOnly","$validate","error","s","hooks","execPost","$op"],"sources":["C:/Users/91930/Desktop/Github projects/Pharmacy Demo/back-end/node_modules/mongoose/lib/plugins/validateBeforeSave.js"],"sourcesContent":["'use strict';\r\n\r\n/*!\r\n * ignore\r\n */\r\n\r\nmodule.exports = function validateBeforeSave(schema) {\r\n  const unshift = true;\r\n  schema.pre('save', false, function validateBeforeSave(next, options) {\r\n    const _this = this;\r\n    // Nested docs have their own presave\r\n    if (this.$isSubdocument) {\r\n      return next();\r\n    }\r\n\r\n    const hasValidateBeforeSaveOption = options &&\r\n        (typeof options === 'object') &&\r\n        ('validateBeforeSave' in options);\r\n\r\n    let shouldValidate;\r\n    if (hasValidateBeforeSaveOption) {\r\n      shouldValidate = !!options.validateBeforeSave;\r\n    } else {\r\n      shouldValidate = this.$__schema.options.validateBeforeSave;\r\n    }\r\n\r\n    // Validate\r\n    if (shouldValidate) {\r\n      const hasValidateModifiedOnlyOption = options &&\r\n          (typeof options === 'object') &&\r\n          ('validateModifiedOnly' in options);\r\n      const validateOptions = hasValidateModifiedOnlyOption ?\r\n        { validateModifiedOnly: options.validateModifiedOnly } :\r\n        null;\r\n      this.$validate(validateOptions, function(error) {\r\n        return _this.$__schema.s.hooks.execPost('save:error', _this, [_this], { error: error }, function(error) {\r\n          _this.$op = 'save';\r\n          next(error);\r\n        });\r\n      });\r\n    } else {\r\n      next();\r\n    }\r\n  }, null, unshift);\r\n};\r\n"],"mappings":"AAAA,YAAY;;AAEZ;AACA;AACA;AAEAA,MAAM,CAACC,OAAO,GAAG,SAASC,kBAAkB,CAACC,MAAM,EAAE;EACnD,MAAMC,OAAO,GAAG,IAAI;EACpBD,MAAM,CAACE,GAAG,CAAC,MAAM,EAAE,KAAK,EAAE,SAASH,kBAAkB,CAACI,IAAI,EAAEC,OAAO,EAAE;IACnE,MAAMC,KAAK,GAAG,IAAI;IAClB;IACA,IAAI,IAAI,CAACC,cAAc,EAAE;MACvB,OAAOH,IAAI,EAAE;IACf;IAEA,MAAMI,2BAA2B,GAAGH,OAAO,IACtC,OAAOA,OAAO,KAAK,QAAS,IAC5B,oBAAoB,IAAIA,OAAQ;IAErC,IAAII,cAAc;IAClB,IAAID,2BAA2B,EAAE;MAC/BC,cAAc,GAAG,CAAC,CAACJ,OAAO,CAACL,kBAAkB;IAC/C,CAAC,MAAM;MACLS,cAAc,GAAG,IAAI,CAACC,SAAS,CAACL,OAAO,CAACL,kBAAkB;IAC5D;;IAEA;IACA,IAAIS,cAAc,EAAE;MAClB,MAAME,6BAA6B,GAAGN,OAAO,IACxC,OAAOA,OAAO,KAAK,QAAS,IAC5B,sBAAsB,IAAIA,OAAQ;MACvC,MAAMO,eAAe,GAAGD,6BAA6B,GACnD;QAAEE,oBAAoB,EAAER,OAAO,CAACQ;MAAqB,CAAC,GACtD,IAAI;MACN,IAAI,CAACC,SAAS,CAACF,eAAe,EAAE,UAASG,KAAK,EAAE;QAC9C,OAAOT,KAAK,CAACI,SAAS,CAACM,CAAC,CAACC,KAAK,CAACC,QAAQ,CAAC,YAAY,EAAEZ,KAAK,EAAE,CAACA,KAAK,CAAC,EAAE;UAAES,KAAK,EAAEA;QAAM,CAAC,EAAE,UAASA,KAAK,EAAE;UACtGT,KAAK,CAACa,GAAG,GAAG,MAAM;UAClBf,IAAI,CAACW,KAAK,CAAC;QACb,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,MAAM;MACLX,IAAI,EAAE;IACR;EACF,CAAC,EAAE,IAAI,EAAEF,OAAO,CAAC;AACnB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}