{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SetProfilingLevelOperation = exports.ProfilingLevel = void 0;\nconst error_1 = require(\"../error\");\nconst utils_1 = require(\"../utils\");\nconst command_1 = require(\"./command\");\nconst levelValues = new Set(['off', 'slow_only', 'all']);\n/** @public */\nexports.ProfilingLevel = Object.freeze({\n  off: 'off',\n  slowOnly: 'slow_only',\n  all: 'all'\n});\n/** @internal */\nclass SetProfilingLevelOperation extends command_1.CommandOperation {\n  constructor(db, level, options) {\n    super(db, options);\n    this.options = options;\n    switch (level) {\n      case exports.ProfilingLevel.off:\n        this.profile = 0;\n        break;\n      case exports.ProfilingLevel.slowOnly:\n        this.profile = 1;\n        break;\n      case exports.ProfilingLevel.all:\n        this.profile = 2;\n        break;\n      default:\n        this.profile = 0;\n        break;\n    }\n    this.level = level;\n  }\n  execute(server, session, callback) {\n    const level = this.level;\n    if (!levelValues.has(level)) {\n      return callback(new error_1.MongoInvalidArgumentError(`Profiling level must be one of \"${(0, utils_1.enumToString)(exports.ProfilingLevel)}\"`));\n    }\n    // TODO(NODE-3483): Determine error to put here\n    super.executeCommand(server, session, {\n      profile: this.profile\n    }, (err, doc) => {\n      if (err == null && doc.ok === 1) return callback(undefined, level);\n      return err != null ? callback(err) : callback(new error_1.MongoRuntimeError('Error with profile command'));\n    });\n  }\n}\nexports.SetProfilingLevelOperation = SetProfilingLevelOperation;","map":{"version":3,"mappings":";;;;;;AACA;AAIA;AACA;AAEA,MAAMA,WAAW,GAAG,IAAIC,GAAG,CAAC,CAAC,KAAK,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;AAExD;AACaC,sBAAc,GAAGC,MAAM,CAACC,MAAM,CAAC;EAC1CC,GAAG,EAAE,KAAK;EACVC,QAAQ,EAAE,WAAW;EACrBC,GAAG,EAAE;CACG,CAAC;AAQX;AACA,MAAaC,0BAA2B,SAAQC,0BAAgC;EAK9EC,YAAYC,EAAM,EAAEC,KAAqB,EAAEC,OAAiC;IAC1E,KAAK,CAACF,EAAE,EAAEE,OAAO,CAAC;IAClB,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,QAAQD,KAAK;MACX,KAAKV,sBAAc,CAACG,GAAG;QACrB,IAAI,CAACS,OAAO,GAAG,CAAC;QAChB;MACF,KAAKZ,sBAAc,CAACI,QAAQ;QAC1B,IAAI,CAACQ,OAAO,GAAG,CAAC;QAChB;MACF,KAAKZ,sBAAc,CAACK,GAAG;QACrB,IAAI,CAACO,OAAO,GAAG,CAAC;QAChB;MACF;QACE,IAAI,CAACA,OAAO,GAAG,CAAC;QAChB;IAAM;IAGV,IAAI,CAACF,KAAK,GAAGA,KAAK;EACpB;EAESG,OAAO,CACdC,MAAc,EACdC,OAAkC,EAClCC,QAAkC;IAElC,MAAMN,KAAK,GAAG,IAAI,CAACA,KAAK;IAExB,IAAI,CAACZ,WAAW,CAACmB,GAAG,CAACP,KAAK,CAAC,EAAE;MAC3B,OAAOM,QAAQ,CACb,IAAIE,iCAAyB,CAC3B,mCAAmC,wBAAY,EAAClB,sBAAc,CAAC,GAAG,CACnE,CACF;;IAGH;IACA,KAAK,CAACmB,cAAc,CAACL,MAAM,EAAEC,OAAO,EAAE;MAAEH,OAAO,EAAE,IAAI,CAACA;IAAO,CAAE,EAAE,CAACQ,GAAG,EAAEC,GAAG,KAAI;MAC5E,IAAID,GAAG,IAAI,IAAI,IAAIC,GAAG,CAACC,EAAE,KAAK,CAAC,EAAE,OAAON,QAAQ,CAACO,SAAS,EAAEb,KAAK,CAAC;MAClE,OAAOU,GAAG,IAAI,IAAI,GACdJ,QAAQ,CAACI,GAAG,CAAC,GACbJ,QAAQ,CAAC,IAAIE,yBAAiB,CAAC,4BAA4B,CAAC,CAAC;IACnE,CAAC,CAAC;EACJ;;AAhDFlB","names":["levelValues","Set","exports","Object","freeze","off","slowOnly","all","SetProfilingLevelOperation","command_1","constructor","db","level","options","profile","execute","server","session","callback","has","error_1","executeCommand","err","doc","ok","undefined"],"sources":["C:\\Users\\91930\\Desktop\\Github projects\\Pharmacy Demo\\back-end\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\set_profiling_level.ts"],"sourcesContent":["import type { Db } from '../db';\r\nimport { MongoInvalidArgumentError, MongoRuntimeError } from '../error';\r\nimport type { Server } from '../sdam/server';\r\nimport type { ClientSession } from '../sessions';\r\nimport type { Callback } from '../utils';\r\nimport { enumToString } from '../utils';\r\nimport { CommandOperation, CommandOperationOptions } from './command';\r\n\r\nconst levelValues = new Set(['off', 'slow_only', 'all']);\r\n\r\n/** @public */\r\nexport const ProfilingLevel = Object.freeze({\r\n  off: 'off',\r\n  slowOnly: 'slow_only',\r\n  all: 'all'\r\n} as const);\r\n\r\n/** @public */\r\nexport type ProfilingLevel = typeof ProfilingLevel[keyof typeof ProfilingLevel];\r\n\r\n/** @public */\r\nexport type SetProfilingLevelOptions = CommandOperationOptions;\r\n\r\n/** @internal */\r\nexport class SetProfilingLevelOperation extends CommandOperation<ProfilingLevel> {\r\n  override options: SetProfilingLevelOptions;\r\n  level: ProfilingLevel;\r\n  profile: 0 | 1 | 2;\r\n\r\n  constructor(db: Db, level: ProfilingLevel, options: SetProfilingLevelOptions) {\r\n    super(db, options);\r\n    this.options = options;\r\n    switch (level) {\r\n      case ProfilingLevel.off:\r\n        this.profile = 0;\r\n        break;\r\n      case ProfilingLevel.slowOnly:\r\n        this.profile = 1;\r\n        break;\r\n      case ProfilingLevel.all:\r\n        this.profile = 2;\r\n        break;\r\n      default:\r\n        this.profile = 0;\r\n        break;\r\n    }\r\n\r\n    this.level = level;\r\n  }\r\n\r\n  override execute(\r\n    server: Server,\r\n    session: ClientSession | undefined,\r\n    callback: Callback<ProfilingLevel>\r\n  ): void {\r\n    const level = this.level;\r\n\r\n    if (!levelValues.has(level)) {\r\n      return callback(\r\n        new MongoInvalidArgumentError(\r\n          `Profiling level must be one of \"${enumToString(ProfilingLevel)}\"`\r\n        )\r\n      );\r\n    }\r\n\r\n    // TODO(NODE-3483): Determine error to put here\r\n    super.executeCommand(server, session, { profile: this.profile }, (err, doc) => {\r\n      if (err == null && doc.ok === 1) return callback(undefined, level);\r\n      return err != null\r\n        ? callback(err)\r\n        : callback(new MongoRuntimeError('Error with profile command'));\r\n    });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}