{"ast":null,"code":"'use strict';\n\nconst PromiseProvider = require('../promise_provider');\nconst immediate = require('./immediate');\nconst emittedSymbol = Symbol('mongoose:emitted');\nmodule.exports = function promiseOrCallback(callback, fn, ee, Promise) {\n  if (typeof callback === 'function') {\n    try {\n      return fn(function (error) {\n        if (error != null) {\n          if (ee != null && ee.listeners != null && ee.listeners('error').length > 0 && !error[emittedSymbol]) {\n            error[emittedSymbol] = true;\n            ee.emit('error', error);\n          }\n          try {\n            callback(error);\n          } catch (error) {\n            return immediate(() => {\n              throw error;\n            });\n          }\n          return;\n        }\n        callback.apply(this, arguments);\n      });\n    } catch (error) {\n      if (ee != null && ee.listeners != null && ee.listeners('error').length > 0 && !error[emittedSymbol]) {\n        error[emittedSymbol] = true;\n        ee.emit('error', error);\n      }\n      return callback(error);\n    }\n  }\n  Promise = Promise || PromiseProvider.get();\n  return new Promise((resolve, reject) => {\n    fn(function (error, res) {\n      if (error != null) {\n        if (ee != null && ee.listeners != null && ee.listeners('error').length > 0 && !error[emittedSymbol]) {\n          error[emittedSymbol] = true;\n          ee.emit('error', error);\n        }\n        return reject(error);\n      }\n      if (arguments.length > 2) {\n        return resolve(Array.prototype.slice.call(arguments, 1));\n      }\n      resolve(res);\n    });\n  });\n};","map":{"version":3,"names":["PromiseProvider","require","immediate","emittedSymbol","Symbol","module","exports","promiseOrCallback","callback","fn","ee","Promise","error","listeners","length","emit","apply","arguments","get","resolve","reject","res","Array","prototype","slice","call"],"sources":["C:/Users/91930/Desktop/Github projects/Pharmacy Demo/back-end/node_modules/mongoose/lib/helpers/promiseOrCallback.js"],"sourcesContent":["'use strict';\r\n\r\nconst PromiseProvider = require('../promise_provider');\r\nconst immediate = require('./immediate');\r\n\r\nconst emittedSymbol = Symbol('mongoose:emitted');\r\n\r\nmodule.exports = function promiseOrCallback(callback, fn, ee, Promise) {\r\n  if (typeof callback === 'function') {\r\n    try {\r\n      return fn(function(error) {\r\n        if (error != null) {\r\n          if (ee != null && ee.listeners != null && ee.listeners('error').length > 0 && !error[emittedSymbol]) {\r\n            error[emittedSymbol] = true;\r\n            ee.emit('error', error);\r\n          }\r\n          try {\r\n            callback(error);\r\n          } catch (error) {\r\n            return immediate(() => {\r\n              throw error;\r\n            });\r\n          }\r\n          return;\r\n        }\r\n        callback.apply(this, arguments);\r\n      });\r\n    } catch (error) {\r\n      if (ee != null && ee.listeners != null && ee.listeners('error').length > 0 && !error[emittedSymbol]) {\r\n        error[emittedSymbol] = true;\r\n        ee.emit('error', error);\r\n      }\r\n\r\n      return callback(error);\r\n    }\r\n  }\r\n\r\n  Promise = Promise || PromiseProvider.get();\r\n\r\n  return new Promise((resolve, reject) => {\r\n    fn(function(error, res) {\r\n      if (error != null) {\r\n        if (ee != null && ee.listeners != null && ee.listeners('error').length > 0 && !error[emittedSymbol]) {\r\n          error[emittedSymbol] = true;\r\n          ee.emit('error', error);\r\n        }\r\n        return reject(error);\r\n      }\r\n      if (arguments.length > 2) {\r\n        return resolve(Array.prototype.slice.call(arguments, 1));\r\n      }\r\n      resolve(res);\r\n    });\r\n  });\r\n};\r\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,eAAe,GAAGC,OAAO,CAAC,qBAAqB,CAAC;AACtD,MAAMC,SAAS,GAAGD,OAAO,CAAC,aAAa,CAAC;AAExC,MAAME,aAAa,GAAGC,MAAM,CAAC,kBAAkB,CAAC;AAEhDC,MAAM,CAACC,OAAO,GAAG,SAASC,iBAAiB,CAACC,QAAQ,EAAEC,EAAE,EAAEC,EAAE,EAAEC,OAAO,EAAE;EACrE,IAAI,OAAOH,QAAQ,KAAK,UAAU,EAAE;IAClC,IAAI;MACF,OAAOC,EAAE,CAAC,UAASG,KAAK,EAAE;QACxB,IAAIA,KAAK,IAAI,IAAI,EAAE;UACjB,IAAIF,EAAE,IAAI,IAAI,IAAIA,EAAE,CAACG,SAAS,IAAI,IAAI,IAAIH,EAAE,CAACG,SAAS,CAAC,OAAO,CAAC,CAACC,MAAM,GAAG,CAAC,IAAI,CAACF,KAAK,CAACT,aAAa,CAAC,EAAE;YACnGS,KAAK,CAACT,aAAa,CAAC,GAAG,IAAI;YAC3BO,EAAE,CAACK,IAAI,CAAC,OAAO,EAAEH,KAAK,CAAC;UACzB;UACA,IAAI;YACFJ,QAAQ,CAACI,KAAK,CAAC;UACjB,CAAC,CAAC,OAAOA,KAAK,EAAE;YACd,OAAOV,SAAS,CAAC,MAAM;cACrB,MAAMU,KAAK;YACb,CAAC,CAAC;UACJ;UACA;QACF;QACAJ,QAAQ,CAACQ,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;MACjC,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOL,KAAK,EAAE;MACd,IAAIF,EAAE,IAAI,IAAI,IAAIA,EAAE,CAACG,SAAS,IAAI,IAAI,IAAIH,EAAE,CAACG,SAAS,CAAC,OAAO,CAAC,CAACC,MAAM,GAAG,CAAC,IAAI,CAACF,KAAK,CAACT,aAAa,CAAC,EAAE;QACnGS,KAAK,CAACT,aAAa,CAAC,GAAG,IAAI;QAC3BO,EAAE,CAACK,IAAI,CAAC,OAAO,EAAEH,KAAK,CAAC;MACzB;MAEA,OAAOJ,QAAQ,CAACI,KAAK,CAAC;IACxB;EACF;EAEAD,OAAO,GAAGA,OAAO,IAAIX,eAAe,CAACkB,GAAG,EAAE;EAE1C,OAAO,IAAIP,OAAO,CAAC,CAACQ,OAAO,EAAEC,MAAM,KAAK;IACtCX,EAAE,CAAC,UAASG,KAAK,EAAES,GAAG,EAAE;MACtB,IAAIT,KAAK,IAAI,IAAI,EAAE;QACjB,IAAIF,EAAE,IAAI,IAAI,IAAIA,EAAE,CAACG,SAAS,IAAI,IAAI,IAAIH,EAAE,CAACG,SAAS,CAAC,OAAO,CAAC,CAACC,MAAM,GAAG,CAAC,IAAI,CAACF,KAAK,CAACT,aAAa,CAAC,EAAE;UACnGS,KAAK,CAACT,aAAa,CAAC,GAAG,IAAI;UAC3BO,EAAE,CAACK,IAAI,CAAC,OAAO,EAAEH,KAAK,CAAC;QACzB;QACA,OAAOQ,MAAM,CAACR,KAAK,CAAC;MACtB;MACA,IAAIK,SAAS,CAACH,MAAM,GAAG,CAAC,EAAE;QACxB,OAAOK,OAAO,CAACG,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,IAAI,CAACR,SAAS,EAAE,CAAC,CAAC,CAAC;MAC1D;MACAE,OAAO,CAACE,GAAG,CAAC;IACd,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}