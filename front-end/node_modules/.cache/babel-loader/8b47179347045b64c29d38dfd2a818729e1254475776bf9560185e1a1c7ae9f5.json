{"ast":null,"code":"'use strict';\n\nconst each = require('../helpers/each');\n\n/*!\r\n * ignore\r\n */\n\nmodule.exports = function saveSubdocs(schema) {\n  const unshift = true;\n  schema.s.hooks.pre('save', false, function saveSubdocsPreSave(next) {\n    if (this.$isSubdocument) {\n      next();\n      return;\n    }\n    const _this = this;\n    const subdocs = this.$getAllSubdocs();\n    if (!subdocs.length) {\n      next();\n      return;\n    }\n    each(subdocs, function (subdoc, cb) {\n      subdoc.$__schema.s.hooks.execPre('save', subdoc, function (err) {\n        cb(err);\n      });\n    }, function (error) {\n      if (error) {\n        return _this.$__schema.s.hooks.execPost('save:error', _this, [_this], {\n          error: error\n        }, function (error) {\n          next(error);\n        });\n      }\n      next();\n    });\n  }, null, unshift);\n  schema.s.hooks.post('save', function saveSubdocsPostSave(doc, next) {\n    if (this.$isSubdocument) {\n      next();\n      return;\n    }\n    const _this = this;\n    const subdocs = this.$getAllSubdocs();\n    if (!subdocs.length) {\n      next();\n      return;\n    }\n    each(subdocs, function (subdoc, cb) {\n      subdoc.$__schema.s.hooks.execPost('save', subdoc, [subdoc], function (err) {\n        cb(err);\n      });\n    }, function (error) {\n      if (error) {\n        return _this.$__schema.s.hooks.execPost('save:error', _this, [_this], {\n          error: error\n        }, function (error) {\n          next(error);\n        });\n      }\n      next();\n    });\n  }, null, unshift);\n};","map":{"version":3,"names":["each","require","module","exports","saveSubdocs","schema","unshift","s","hooks","pre","saveSubdocsPreSave","next","$isSubdocument","_this","subdocs","$getAllSubdocs","length","subdoc","cb","$__schema","execPre","err","error","execPost","post","saveSubdocsPostSave","doc"],"sources":["C:/Users/91930/Desktop/Github projects/Pharmacy Demo/back-end/node_modules/mongoose/lib/plugins/saveSubdocs.js"],"sourcesContent":["'use strict';\r\n\r\nconst each = require('../helpers/each');\r\n\r\n/*!\r\n * ignore\r\n */\r\n\r\nmodule.exports = function saveSubdocs(schema) {\r\n  const unshift = true;\r\n  schema.s.hooks.pre('save', false, function saveSubdocsPreSave(next) {\r\n    if (this.$isSubdocument) {\r\n      next();\r\n      return;\r\n    }\r\n\r\n    const _this = this;\r\n    const subdocs = this.$getAllSubdocs();\r\n\r\n    if (!subdocs.length) {\r\n      next();\r\n      return;\r\n    }\r\n\r\n    each(subdocs, function(subdoc, cb) {\r\n      subdoc.$__schema.s.hooks.execPre('save', subdoc, function(err) {\r\n        cb(err);\r\n      });\r\n    }, function(error) {\r\n      if (error) {\r\n        return _this.$__schema.s.hooks.execPost('save:error', _this, [_this], { error: error }, function(error) {\r\n          next(error);\r\n        });\r\n      }\r\n      next();\r\n    });\r\n  }, null, unshift);\r\n\r\n  schema.s.hooks.post('save', function saveSubdocsPostSave(doc, next) {\r\n    if (this.$isSubdocument) {\r\n      next();\r\n      return;\r\n    }\r\n\r\n    const _this = this;\r\n    const subdocs = this.$getAllSubdocs();\r\n\r\n    if (!subdocs.length) {\r\n      next();\r\n      return;\r\n    }\r\n\r\n    each(subdocs, function(subdoc, cb) {\r\n      subdoc.$__schema.s.hooks.execPost('save', subdoc, [subdoc], function(err) {\r\n        cb(err);\r\n      });\r\n    }, function(error) {\r\n      if (error) {\r\n        return _this.$__schema.s.hooks.execPost('save:error', _this, [_this], { error: error }, function(error) {\r\n          next(error);\r\n        });\r\n      }\r\n      next();\r\n    });\r\n  }, null, unshift);\r\n};\r\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,IAAI,GAAGC,OAAO,CAAC,iBAAiB,CAAC;;AAEvC;AACA;AACA;;AAEAC,MAAM,CAACC,OAAO,GAAG,SAASC,WAAW,CAACC,MAAM,EAAE;EAC5C,MAAMC,OAAO,GAAG,IAAI;EACpBD,MAAM,CAACE,CAAC,CAACC,KAAK,CAACC,GAAG,CAAC,MAAM,EAAE,KAAK,EAAE,SAASC,kBAAkB,CAACC,IAAI,EAAE;IAClE,IAAI,IAAI,CAACC,cAAc,EAAE;MACvBD,IAAI,EAAE;MACN;IACF;IAEA,MAAME,KAAK,GAAG,IAAI;IAClB,MAAMC,OAAO,GAAG,IAAI,CAACC,cAAc,EAAE;IAErC,IAAI,CAACD,OAAO,CAACE,MAAM,EAAE;MACnBL,IAAI,EAAE;MACN;IACF;IAEAX,IAAI,CAACc,OAAO,EAAE,UAASG,MAAM,EAAEC,EAAE,EAAE;MACjCD,MAAM,CAACE,SAAS,CAACZ,CAAC,CAACC,KAAK,CAACY,OAAO,CAAC,MAAM,EAAEH,MAAM,EAAE,UAASI,GAAG,EAAE;QAC7DH,EAAE,CAACG,GAAG,CAAC;MACT,CAAC,CAAC;IACJ,CAAC,EAAE,UAASC,KAAK,EAAE;MACjB,IAAIA,KAAK,EAAE;QACT,OAAOT,KAAK,CAACM,SAAS,CAACZ,CAAC,CAACC,KAAK,CAACe,QAAQ,CAAC,YAAY,EAAEV,KAAK,EAAE,CAACA,KAAK,CAAC,EAAE;UAAES,KAAK,EAAEA;QAAM,CAAC,EAAE,UAASA,KAAK,EAAE;UACtGX,IAAI,CAACW,KAAK,CAAC;QACb,CAAC,CAAC;MACJ;MACAX,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC,EAAE,IAAI,EAAEL,OAAO,CAAC;EAEjBD,MAAM,CAACE,CAAC,CAACC,KAAK,CAACgB,IAAI,CAAC,MAAM,EAAE,SAASC,mBAAmB,CAACC,GAAG,EAAEf,IAAI,EAAE;IAClE,IAAI,IAAI,CAACC,cAAc,EAAE;MACvBD,IAAI,EAAE;MACN;IACF;IAEA,MAAME,KAAK,GAAG,IAAI;IAClB,MAAMC,OAAO,GAAG,IAAI,CAACC,cAAc,EAAE;IAErC,IAAI,CAACD,OAAO,CAACE,MAAM,EAAE;MACnBL,IAAI,EAAE;MACN;IACF;IAEAX,IAAI,CAACc,OAAO,EAAE,UAASG,MAAM,EAAEC,EAAE,EAAE;MACjCD,MAAM,CAACE,SAAS,CAACZ,CAAC,CAACC,KAAK,CAACe,QAAQ,CAAC,MAAM,EAAEN,MAAM,EAAE,CAACA,MAAM,CAAC,EAAE,UAASI,GAAG,EAAE;QACxEH,EAAE,CAACG,GAAG,CAAC;MACT,CAAC,CAAC;IACJ,CAAC,EAAE,UAASC,KAAK,EAAE;MACjB,IAAIA,KAAK,EAAE;QACT,OAAOT,KAAK,CAACM,SAAS,CAACZ,CAAC,CAACC,KAAK,CAACe,QAAQ,CAAC,YAAY,EAAEV,KAAK,EAAE,CAACA,KAAK,CAAC,EAAE;UAAES,KAAK,EAAEA;QAAM,CAAC,EAAE,UAASA,KAAK,EAAE;UACtGX,IAAI,CAACW,KAAK,CAAC;QACb,CAAC,CAAC;MACJ;MACAX,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC,EAAE,IAAI,EAAEL,OAAO,CAAC;AACnB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}