{"ast":null,"code":"/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n*/\n\n\"use strict\";\n\nconst {\n  SyncWaterfallHook\n} = require(\"tapable\");\nconst Compilation = require(\"../Compilation\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst Template = require(\"../Template\");\nconst HelperRuntimeModule = require(\"./HelperRuntimeModule\");\n\n/** @typedef {import(\"../Chunk\")} Chunk */\n/** @typedef {import(\"../Compiler\")} Compiler */\n\n/**\r\n * @typedef {Object} LoadScriptCompilationHooks\r\n * @property {SyncWaterfallHook<[string, Chunk]>} createScript\r\n */\n\n/** @type {WeakMap<Compilation, LoadScriptCompilationHooks>} */\nconst compilationHooksMap = new WeakMap();\nclass LoadScriptRuntimeModule extends HelperRuntimeModule {\n  /**\r\n   * @param {Compilation} compilation the compilation\r\n   * @returns {LoadScriptCompilationHooks} hooks\r\n   */\n  static getCompilationHooks(compilation) {\n    if (!(compilation instanceof Compilation)) {\n      throw new TypeError(\"The 'compilation' argument must be an instance of Compilation\");\n    }\n    let hooks = compilationHooksMap.get(compilation);\n    if (hooks === undefined) {\n      hooks = {\n        createScript: new SyncWaterfallHook([\"source\", \"chunk\"])\n      };\n      compilationHooksMap.set(compilation, hooks);\n    }\n    return hooks;\n  }\n\n  /**\r\n   * @param {boolean=} withCreateScriptUrl use create script url for trusted types\r\n   */\n  constructor(withCreateScriptUrl) {\n    super(\"load script\");\n    this._withCreateScriptUrl = withCreateScriptUrl;\n  }\n\n  /**\r\n   * @returns {string} runtime code\r\n   */\n  generate() {\n    const {\n      compilation\n    } = this;\n    const {\n      runtimeTemplate,\n      outputOptions\n    } = compilation;\n    const {\n      scriptType,\n      chunkLoadTimeout: loadTimeout,\n      crossOriginLoading,\n      uniqueName,\n      charset\n    } = outputOptions;\n    const fn = RuntimeGlobals.loadScript;\n    const {\n      createScript\n    } = LoadScriptRuntimeModule.getCompilationHooks(compilation);\n    const code = Template.asString([\"script = document.createElement('script');\", scriptType ? `script.type = ${JSON.stringify(scriptType)};` : \"\", charset ? \"script.charset = 'utf-8';\" : \"\", `script.timeout = ${loadTimeout / 1000};`, `if (${RuntimeGlobals.scriptNonce}) {`, Template.indent(`script.setAttribute(\"nonce\", ${RuntimeGlobals.scriptNonce});`), \"}\", uniqueName ? 'script.setAttribute(\"data-webpack\", dataWebpackPrefix + key);' : \"\", `script.src = ${this._withCreateScriptUrl ? `${RuntimeGlobals.createScriptUrl}(url)` : \"url\"};`, crossOriginLoading ? crossOriginLoading === \"use-credentials\" ? 'script.crossOrigin = \"use-credentials\";' : Template.asString([\"if (script.src.indexOf(window.location.origin + '/') !== 0) {\", Template.indent(`script.crossOrigin = ${JSON.stringify(crossOriginLoading)};`), \"}\"]) : \"\"]);\n    return Template.asString([\"var inProgress = {};\", uniqueName ? `var dataWebpackPrefix = ${JSON.stringify(uniqueName + \":\")};` : \"// data-webpack is not used as build has no uniqueName\", \"// loadScript function to load a script via script tag\", `${fn} = ${runtimeTemplate.basicFunction(\"url, done, key, chunkId\", [\"if(inProgress[url]) { inProgress[url].push(done); return; }\", \"var script, needAttach;\", \"if(key !== undefined) {\", Template.indent(['var scripts = document.getElementsByTagName(\"script\");', \"for(var i = 0; i < scripts.length; i++) {\", Template.indent([\"var s = scripts[i];\", `if(s.getAttribute(\"src\") == url${uniqueName ? ' || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key' : \"\"}) { script = s; break; }`]), \"}\"]), \"}\", \"if(!script) {\", Template.indent([\"needAttach = true;\", createScript.call(code, this.chunk)]), \"}\", \"inProgress[url] = [done];\", \"var onScriptComplete = \" + runtimeTemplate.basicFunction(\"prev, event\", Template.asString([\"// avoid mem leaks in IE.\", \"script.onerror = script.onload = null;\", \"clearTimeout(timeout);\", \"var doneFns = inProgress[url];\", \"delete inProgress[url];\", \"script.parentNode && script.parentNode.removeChild(script);\", `doneFns && doneFns.forEach(${runtimeTemplate.returningFunction(\"fn(event)\", \"fn\")});`, \"if(prev) return prev(event);\"])) + \";\", `var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), ${loadTimeout});`, \"script.onerror = onScriptComplete.bind(null, script.onerror);\", \"script.onload = onScriptComplete.bind(null, script.onload);\", \"needAttach && document.head.appendChild(script);\"])};`]);\n  }\n}\nmodule.exports = LoadScriptRuntimeModule;","map":{"version":3,"names":["SyncWaterfallHook","require","Compilation","RuntimeGlobals","Template","HelperRuntimeModule","compilationHooksMap","WeakMap","LoadScriptRuntimeModule","getCompilationHooks","compilation","TypeError","hooks","get","undefined","createScript","set","constructor","withCreateScriptUrl","_withCreateScriptUrl","generate","runtimeTemplate","outputOptions","scriptType","chunkLoadTimeout","loadTimeout","crossOriginLoading","uniqueName","charset","fn","loadScript","code","asString","JSON","stringify","scriptNonce","indent","createScriptUrl","basicFunction","call","chunk","returningFunction","module","exports"],"sources":["C:/Users/91930/Desktop/Github projects/Pharmacy Demo/front-end/node_modules/webpack/lib/runtime/LoadScriptRuntimeModule.js"],"sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n*/\r\n\r\n\"use strict\";\r\n\r\nconst { SyncWaterfallHook } = require(\"tapable\");\r\nconst Compilation = require(\"../Compilation\");\r\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\r\nconst Template = require(\"../Template\");\r\nconst HelperRuntimeModule = require(\"./HelperRuntimeModule\");\r\n\r\n/** @typedef {import(\"../Chunk\")} Chunk */\r\n/** @typedef {import(\"../Compiler\")} Compiler */\r\n\r\n/**\r\n * @typedef {Object} LoadScriptCompilationHooks\r\n * @property {SyncWaterfallHook<[string, Chunk]>} createScript\r\n */\r\n\r\n/** @type {WeakMap<Compilation, LoadScriptCompilationHooks>} */\r\nconst compilationHooksMap = new WeakMap();\r\n\r\nclass LoadScriptRuntimeModule extends HelperRuntimeModule {\r\n\t/**\r\n\t * @param {Compilation} compilation the compilation\r\n\t * @returns {LoadScriptCompilationHooks} hooks\r\n\t */\r\n\tstatic getCompilationHooks(compilation) {\r\n\t\tif (!(compilation instanceof Compilation)) {\r\n\t\t\tthrow new TypeError(\r\n\t\t\t\t\"The 'compilation' argument must be an instance of Compilation\"\r\n\t\t\t);\r\n\t\t}\r\n\t\tlet hooks = compilationHooksMap.get(compilation);\r\n\t\tif (hooks === undefined) {\r\n\t\t\thooks = {\r\n\t\t\t\tcreateScript: new SyncWaterfallHook([\"source\", \"chunk\"])\r\n\t\t\t};\r\n\t\t\tcompilationHooksMap.set(compilation, hooks);\r\n\t\t}\r\n\t\treturn hooks;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {boolean=} withCreateScriptUrl use create script url for trusted types\r\n\t */\r\n\tconstructor(withCreateScriptUrl) {\r\n\t\tsuper(\"load script\");\r\n\t\tthis._withCreateScriptUrl = withCreateScriptUrl;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {string} runtime code\r\n\t */\r\n\tgenerate() {\r\n\t\tconst { compilation } = this;\r\n\t\tconst { runtimeTemplate, outputOptions } = compilation;\r\n\t\tconst {\r\n\t\t\tscriptType,\r\n\t\t\tchunkLoadTimeout: loadTimeout,\r\n\t\t\tcrossOriginLoading,\r\n\t\t\tuniqueName,\r\n\t\t\tcharset\r\n\t\t} = outputOptions;\r\n\t\tconst fn = RuntimeGlobals.loadScript;\r\n\r\n\t\tconst { createScript } =\r\n\t\t\tLoadScriptRuntimeModule.getCompilationHooks(compilation);\r\n\r\n\t\tconst code = Template.asString([\r\n\t\t\t\"script = document.createElement('script');\",\r\n\t\t\tscriptType ? `script.type = ${JSON.stringify(scriptType)};` : \"\",\r\n\t\t\tcharset ? \"script.charset = 'utf-8';\" : \"\",\r\n\t\t\t`script.timeout = ${loadTimeout / 1000};`,\r\n\t\t\t`if (${RuntimeGlobals.scriptNonce}) {`,\r\n\t\t\tTemplate.indent(\r\n\t\t\t\t`script.setAttribute(\"nonce\", ${RuntimeGlobals.scriptNonce});`\r\n\t\t\t),\r\n\t\t\t\"}\",\r\n\t\t\tuniqueName\r\n\t\t\t\t? 'script.setAttribute(\"data-webpack\", dataWebpackPrefix + key);'\r\n\t\t\t\t: \"\",\r\n\t\t\t`script.src = ${\r\n\t\t\t\tthis._withCreateScriptUrl\r\n\t\t\t\t\t? `${RuntimeGlobals.createScriptUrl}(url)`\r\n\t\t\t\t\t: \"url\"\r\n\t\t\t};`,\r\n\t\t\tcrossOriginLoading\r\n\t\t\t\t? crossOriginLoading === \"use-credentials\"\r\n\t\t\t\t\t? 'script.crossOrigin = \"use-credentials\";'\r\n\t\t\t\t\t: Template.asString([\r\n\t\t\t\t\t\t\t\"if (script.src.indexOf(window.location.origin + '/') !== 0) {\",\r\n\t\t\t\t\t\t\tTemplate.indent(\r\n\t\t\t\t\t\t\t\t`script.crossOrigin = ${JSON.stringify(crossOriginLoading)};`\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\"}\"\r\n\t\t\t\t\t  ])\r\n\t\t\t\t: \"\"\r\n\t\t]);\r\n\r\n\t\treturn Template.asString([\r\n\t\t\t\"var inProgress = {};\",\r\n\t\t\tuniqueName\r\n\t\t\t\t? `var dataWebpackPrefix = ${JSON.stringify(uniqueName + \":\")};`\r\n\t\t\t\t: \"// data-webpack is not used as build has no uniqueName\",\r\n\t\t\t\"// loadScript function to load a script via script tag\",\r\n\t\t\t`${fn} = ${runtimeTemplate.basicFunction(\"url, done, key, chunkId\", [\r\n\t\t\t\t\"if(inProgress[url]) { inProgress[url].push(done); return; }\",\r\n\t\t\t\t\"var script, needAttach;\",\r\n\t\t\t\t\"if(key !== undefined) {\",\r\n\t\t\t\tTemplate.indent([\r\n\t\t\t\t\t'var scripts = document.getElementsByTagName(\"script\");',\r\n\t\t\t\t\t\"for(var i = 0; i < scripts.length; i++) {\",\r\n\t\t\t\t\tTemplate.indent([\r\n\t\t\t\t\t\t\"var s = scripts[i];\",\r\n\t\t\t\t\t\t`if(s.getAttribute(\"src\") == url${\r\n\t\t\t\t\t\t\tuniqueName\r\n\t\t\t\t\t\t\t\t? ' || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key'\r\n\t\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t\t}) { script = s; break; }`\r\n\t\t\t\t\t]),\r\n\t\t\t\t\t\"}\"\r\n\t\t\t\t]),\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\"if(!script) {\",\r\n\t\t\t\tTemplate.indent([\r\n\t\t\t\t\t\"needAttach = true;\",\r\n\t\t\t\t\tcreateScript.call(code, this.chunk)\r\n\t\t\t\t]),\r\n\t\t\t\t\"}\",\r\n\t\t\t\t\"inProgress[url] = [done];\",\r\n\t\t\t\t\"var onScriptComplete = \" +\r\n\t\t\t\t\truntimeTemplate.basicFunction(\r\n\t\t\t\t\t\t\"prev, event\",\r\n\t\t\t\t\t\tTemplate.asString([\r\n\t\t\t\t\t\t\t\"// avoid mem leaks in IE.\",\r\n\t\t\t\t\t\t\t\"script.onerror = script.onload = null;\",\r\n\t\t\t\t\t\t\t\"clearTimeout(timeout);\",\r\n\t\t\t\t\t\t\t\"var doneFns = inProgress[url];\",\r\n\t\t\t\t\t\t\t\"delete inProgress[url];\",\r\n\t\t\t\t\t\t\t\"script.parentNode && script.parentNode.removeChild(script);\",\r\n\t\t\t\t\t\t\t`doneFns && doneFns.forEach(${runtimeTemplate.returningFunction(\r\n\t\t\t\t\t\t\t\t\"fn(event)\",\r\n\t\t\t\t\t\t\t\t\"fn\"\r\n\t\t\t\t\t\t\t)});`,\r\n\t\t\t\t\t\t\t\"if(prev) return prev(event);\"\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t) +\r\n\t\t\t\t\t\";\",\r\n\t\t\t\t`var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), ${loadTimeout});`,\r\n\t\t\t\t\"script.onerror = onScriptComplete.bind(null, script.onerror);\",\r\n\t\t\t\t\"script.onload = onScriptComplete.bind(null, script.onload);\",\r\n\t\t\t\t\"needAttach && document.head.appendChild(script);\"\r\n\t\t\t])};`\r\n\t\t]);\r\n\t}\r\n}\r\n\r\nmodule.exports = LoadScriptRuntimeModule;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}